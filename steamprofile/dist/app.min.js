var Prototype={Version:"1.7",Browser:function(){var e=navigator.userAgent,t="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!t,Opera:t,WebKit:e.indexOf("AppleWebKit/")>-1,Gecko:e.indexOf("Gecko")>-1&&-1===e.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(e)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var e=window.Element||window.HTMLElement;return!(!e||!e.prototype)}(),SpecificElementExtensions:function(){if(void 0!==window.HTMLDivElement)return!0;var e=document.createElement("div"),t=document.createElement("form"),n=!1;return e.__proto__&&e.__proto__!==t.__proto__&&(n=!0),e=t=null,n}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(e){return e}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);var Abstract={},Try={these:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e}},Class=function(){var e=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}();function t(){}return{create:function(){var e=null,n=$A(arguments);function i(){this.initialize.apply(this,arguments)}Object.isFunction(n[0])&&(e=n.shift()),Object.extend(i,Class.Methods),i.superclass=e,i.subclasses=[],e&&(t.prototype=e.prototype,i.prototype=new t,e.subclasses.push(i));for(var o=0,r=n.length;o<r;o++)i.addMethods(n[o]);return i.prototype.initialize||(i.prototype.initialize=Prototype.emptyFunction),i.prototype.constructor=i,i},Methods:{addMethods:function(t){var n=this.superclass&&this.superclass.prototype,i=Object.keys(t);e&&(t.toString!=Object.prototype.toString&&i.push("toString"),t.valueOf!=Object.prototype.valueOf&&i.push("valueOf"));for(var o=0,r=i.length;o<r;o++){var s=i[o],a=t[s];if(n&&Object.isFunction(a)&&"$super"==a.argumentNames()[0]){var l=a;(a=function(e){return function(){return n[e].apply(this,arguments)}}(s).wrap(l)).valueOf=l.valueOf.bind(l),a.toString=l.toString.bind(l)}this.prototype[s]=a}return this}}}}();!function(){var e=Object.prototype.toString,t="Null",n="Undefined",i="Boolean",o="Number",r="String",s="Object",a="[object Function]",l="[object Boolean]",c="[object Number]",u="[object String]",d="[object Array]",h="[object Date]",p=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&void 0===JSON.stringify(Prototype.K);function f(e){switch(e){case null:return t;case void 0:return n}switch(typeof e){case"boolean":return i;case"number":return o;case"string":return r}return s}function m(e,t){for(var n in t)e[n]=t[n];return e}function g(t){return e.call(t)===d}function v(e){return void 0===e}"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(g=Array.isArray),m(Object,{extend:m,inspect:function(e){try{return v(e)?"undefined":null===e?"null":e.inspect?e.inspect():String(e)}catch(e){if(e instanceof RangeError)return"...";throw e}},toJSON:p?function(e){return JSON.stringify(e)}:function(t){return function t(n,i,o){var r=i[n];f(r)===s&&"function"==typeof r.toJSON&&(r=r.toJSON(n));var a=e.call(r);switch(a){case c:case l:case u:r=r.valueOf()}switch(r){case null:return"null";case!0:return"true";case!1:return"false"}switch(typeof r){case"string":return r.inspect(!0);case"number":return isFinite(r)?String(r):"null";case"object":for(var h=0,p=o.length;h<p;h++)if(o[h]===r)throw new TypeError;o.push(r);var m=[];if(a===d){for(var h=0,p=r.length;h<p;h++){var g=t(h,r,o);m.push(void 0===g?"null":g)}m="["+m.join(",")+"]"}else{for(var v=Object.keys(r),h=0,p=v.length;h<p;h++){var n=v[h],g=t(n,r,o);void 0!==g&&m.push(n.inspect(!0)+":"+g)}m="{"+m.join(",")+"}"}return o.pop(),m}}("",{"":t},[])},toQueryString:function(e){return $H(e).toQueryString()},toHTML:function(e){return e&&e.toHTML?e.toHTML():String.interpret(e)},keys:Object.keys||function(e){if(f(e)!==s)throw new TypeError;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},values:function(e){var t=[];for(var n in e)t.push(e[n]);return t},clone:function(e){return m({},e)},isElement:function(e){return!(!e||1!=e.nodeType)},isArray:g,isHash:function(e){return e instanceof Hash},isFunction:function(t){return e.call(t)===a},isString:function(t){return e.call(t)===u},isNumber:function(t){return e.call(t)===c},isDate:function(t){return e.call(t)===h},isUndefined:v})}(),Object.extend(Function.prototype,function(){var e=Array.prototype.slice;function t(e,t){for(var n=e.length,i=t.length;i--;)e[n+i]=t[i];return e}function n(n,i){return t(n=e.call(n,0),i)}return{argumentNames:function(){var e=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]},bind:function(t){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;var i=this,o=e.call(arguments,1);return function(){var e=n(o,arguments);return i.apply(t,e)}},bindAsEventListener:function(n){var i=this,o=e.call(arguments,1);return function(e){var r=t([e||window.event],o);return i.apply(n,r)}},curry:function(){if(!arguments.length)return this;var t=this,i=e.call(arguments,0);return function(){var e=n(i,arguments);return t.apply(this,e)}},delay:function(t){var n=this,i=e.call(arguments,1);return t*=1e3,window.setTimeout(function(){return n.apply(n,i)},t)},defer:function(){var e=t([.01],arguments);return this.delay.apply(this,e)},wrap:function(e){var n=this;return function(){var i=t([n.bind(this)],arguments);return e.apply(this,i)}},methodize:function(){if(this._methodized)return this._methodized;var e=this;return this._methodized=function(){var n=t([this],arguments);return e.apply(null,n)}}}}()),function(e){e.toISOString||(e.toISOString=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}),e.toJSON||(e.toJSON=function(){return this.toISOString()})}(Date.prototype),RegExp.prototype.match=RegExp.prototype.test,RegExp.escape=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(e,t){this.callback=e,this.frequency=t,this.currentlyExecuting=!1,this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(e){throw this.currentlyExecuting=!1,e}}});Object.extend(String,{interpret:function(e){return null==e?"":String(e)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}}),Object.extend(String.prototype,function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&"function"==typeof JSON.parse&&JSON.parse('{"test": true}').test;function prepareReplacement(e){if(Object.isFunction(e))return e;var t=new Template(e);return function(e){return t.evaluate(e)}}function gsub(e,t){var n,i="",o=this;if(t=prepareReplacement(t),Object.isString(e)&&(e=RegExp.escape(e)),!e.length&&!e.source)return(t=t(""))+o.split("").join(t)+t;for(;o.length>0;)(n=o.match(e))?(i+=o.slice(0,n.index),i+=String.interpret(t(n)),o=o.slice(n.index+n[0].length)):(i+=o,o="");return i}function sub(e,t,n){return t=prepareReplacement(t),n=Object.isUndefined(n)?1:n,this.gsub(e,function(e){return--n<0?e[0]:t(e)})}function scan(e,t){return this.gsub(e,t),String(this)}function truncate(e,t){return e=e||30,t=Object.isUndefined(t)?"...":t,this.length>e?this.slice(0,e-t.length)+t:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var e=new RegExp(Prototype.ScriptFragment,"img"),t=new RegExp(Prototype.ScriptFragment,"im");return(this.match(e)||[]).map(function(e){return(e.match(t)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(e){var t=this.strip().match(/([^?#]*)(#.*)?$/);return t?t[1].split(e||"&").inject({},function(e,t){if((t=t.split("="))[0]){var n=decodeURIComponent(t.shift()),i=t.length>1?t.join("="):t[0];null!=i&&(i=decodeURIComponent(i)),n in e?(Object.isArray(e[n])||(e[n]=[e[n]]),e[n].push(i)):e[n]=i}return e}):{}}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(e){return e<1?"":new Array(e+1).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(e){var t=this.replace(/[\x00-\x1f\\]/g,function(e){return e in String.specialChar?String.specialChar[e]:"\\u00"+e.charCodeAt().toPaddedString(2,16)});return e?'"'+t.replace(/"/g,'\\"')+'"':"'"+t.replace(/'/g,"\\'")+"'"}function unfilterJSON(e){return this.replace(e||Prototype.JSONFilter,"$1")}function isJSON(){var e=this;return!e.blank()&&(e=(e=(e=e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(e))}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.test(json)&&(json=json.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));try{if(!sanitize||json.isJSON())return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function parseJSON(){var e=this.unfilterJSON();return JSON.parse(e)}function include(e){return this.indexOf(e)>-1}function startsWith(e){return 0===this.lastIndexOf(e,0)}function endsWith(e){var t=this.length-e.length;return t>=0&&this.indexOf(e,t)===t}function empty(){return""==this}function blank(){return/^\s*$/.test(this)}function interpolate(e,t){return new Template(this,t).evaluate(e)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:startsWith,endsWith:endsWith,empty:empty,blank:blank,interpolate:interpolate}}());var Template=Class.create({initialize:function(e,t){this.template=e.toString(),this.pattern=t||Template.Pattern},evaluate:function(e){return e&&Object.isFunction(e.toTemplateReplacements)&&(e=e.toTemplateReplacements()),this.template.gsub(this.pattern,function(t){if(null==e)return t[1]+"";var n=t[1]||"";if("\\"==n)return t[2];var i=e,o=t[3],r=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;if(null==(t=r.exec(o)))return n;for(;null!=t;){if(null==(i=i[t[1].startsWith("[")?t[2].replace(/\\\\]/g,"]"):t[1]])||""==t[3])break;o=o.substring("["==t[3]?t[1].length:t[0].length),t=r.exec(o)}return n+String.interpret(i)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={},Enumerable=function(){function e(e,t){e=e||Prototype.K;var n=!0;return this.each(function(i,o){if(!(n=n&&!!e.call(t,i,o)))throw $break}),n}function t(e,t){e=e||Prototype.K;var n=!1;return this.each(function(i,o){if(n=!!e.call(t,i,o))throw $break}),n}function n(e,t){e=e||Prototype.K;var n=[];return this.each(function(i,o){n.push(e.call(t,i,o))}),n}function i(e,t){var n;return this.each(function(i,o){if(e.call(t,i,o))throw n=i,$break}),n}function o(e,t){var n=[];return this.each(function(i,o){e.call(t,i,o)&&n.push(i)}),n}function r(e){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(e))return!0;var t=!1;return this.each(function(n){if(n==e)throw t=!0,$break}),t}function s(){return this.map()}return{each:function(e,t){var n=0;try{this._each(function(i){e.call(t,i,n++)})}catch(e){if(e!=$break)throw e}return this},eachSlice:function(e,t,n){var i=-e,o=[],r=this.toArray();if(e<1)return r;for(;(i+=e)<r.length;)o.push(r.slice(i,i+e));return o.collect(t,n)},all:e,every:e,any:t,some:t,collect:n,map:n,detect:i,findAll:o,select:o,filter:o,grep:function(e,t,n){t=t||Prototype.K;var i=[];return Object.isString(e)&&(e=new RegExp(RegExp.escape(e))),this.each(function(o,r){e.match(o)&&i.push(t.call(n,o,r))}),i},include:r,member:r,inGroupsOf:function(e,t){return t=Object.isUndefined(t)?null:t,this.eachSlice(e,function(n){for(;n.length<e;)n.push(t);return n})},inject:function(e,t,n){return this.each(function(i,o){e=t.call(n,e,i,o)}),e},invoke:function(e){var t=$A(arguments).slice(1);return this.map(function(n){return n[e].apply(n,t)})},max:function(e,t){var n;return e=e||Prototype.K,this.each(function(i,o){i=e.call(t,i,o),(null==n||i>=n)&&(n=i)}),n},min:function(e,t){var n;return e=e||Prototype.K,this.each(function(i,o){i=e.call(t,i,o),(null==n||i<n)&&(n=i)}),n},partition:function(e,t){e=e||Prototype.K;var n=[],i=[];return this.each(function(o,r){(e.call(t,o,r)?n:i).push(o)}),[n,i]},pluck:function(e){var t=[];return this.each(function(n){t.push(n[e])}),t},reject:function(e,t){var n=[];return this.each(function(i,o){e.call(t,i,o)||n.push(i)}),n},sortBy:function(e,t){return this.map(function(n,i){return{value:n,criteria:e.call(t,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}).pluck("value")},toArray:s,entries:s,zip:function(){var e=Prototype.K,t=$A(arguments);Object.isFunction(t.last())&&(e=t.pop());var n=[this].concat(t).map($A);return this.map(function(t,i){return e(n.pluck(i))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:i}}();function $A(e){if(!e)return[];if("toArray"in Object(e))return e.toArray();for(var t=e.length||0,n=new Array(t);t--;)n[t]=e[t];return n}function $w(e){return Object.isString(e)&&(e=e.strip())?e.split(/\s+/):[]}function $H(e){return new Hash(e)}Array.from=$A,function(){var e=Array.prototype,t=e.slice,n=e.forEach;function i(){return t.call(this,0)}n||(n=function(e,t){for(var n=0,i=this.length>>>0;n<i;n++)n in this&&e.call(t,this[n],n,this)}),Object.extend(e,Enumerable),e._reverse||(e._reverse=e.reverse),Object.extend(e,{_each:n,clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(e){return null!=e})},flatten:function(){return this.inject([],function(e,t){return Object.isArray(t)?e.concat(t.flatten()):(e.push(t),e)})},without:function(){var e=t.call(arguments,0);return this.select(function(t){return!e.include(t)})},reverse:function(e){return(!1===e?this.toArray():this)._reverse()},uniq:function(e){return this.inject([],function(t,n,i){return 0!=i&&(e?t.last()==n:t.include(n))||t.push(n),t})},intersect:function(e){return this.uniq().findAll(function(t){return e.detect(function(e){return t===e})})},clone:i,toArray:i,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}}),function(){return 1!==[].concat(arguments)[0][0]}(1,2)&&(e.concat=function(){for(var e,n=t.call(this,0),i=0,o=arguments.length;i<o;i++)if(e=arguments[i],!Object.isArray(e)||"callee"in e)n.push(e);else for(var r=0,s=e.length;r<s;r++)n.push(e[r]);return n}),e.indexOf||(e.indexOf=function(e,t){t||(t=0);var n=this.length;for(t<0&&(t=n+t);t<n;t++)if(this[t]===e)return t;return-1}),e.lastIndexOf||(e.lastIndexOf=function(e,t){t=isNaN(t)?this.length:(t<0?this.length+t:t)+1;var n=this.slice(0,t).reverse().indexOf(e);return n<0?n:t-n-1})}();var Hash=Class.create(Enumerable,function(){function e(){return Object.clone(this._object)}function t(e,t){return Object.isUndefined(t)?e:e+"="+encodeURIComponent(String.interpret(t))}return{initialize:function(e){this._object=Object.isHash(e)?e.toObject():Object.clone(e)},_each:function(e){for(var t in this._object){var n=this._object[t],i=[t,n];i.key=t,i.value=n,e(i)}},set:function(e,t){return this._object[e]=t},get:function(e){if(this._object[e]!==Object.prototype[e])return this._object[e]},unset:function(e){var t=this._object[e];return delete this._object[e],t},toObject:e,toTemplateReplacements:e,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(e){var t=this.detect(function(t){return t.value===e});return t&&t.key},merge:function(e){return this.clone().update(e)},update:function(e){return new Hash(e).inject(this,function(e,t){return e.set(t.key,t.value),e})},toQueryString:function(){return this.inject([],function(e,n){var i=encodeURIComponent(n.key),o=n.value;if(o&&"object"==typeof o){if(Object.isArray(o)){for(var r,s=[],a=0,l=o.length;a<l;a++)r=o[a],s.push(t(i,r));return e.concat(s)}}else e.push(t(i,o));return e}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(e){return e.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:e,clone:function(){return new Hash(this)}}}());function $R(e,t,n){return new ObjectRange(e,t,n)}Hash.from=$H,Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(e,t){return $R(0,this,!0).each(e,t),this},toPaddedString:function(e,t){var n=this.toString(t||10);return"0".times(e-n.length)+n},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(e,t,n){this.start=e,this.end=t,this.exclusive=n},_each:function(e){for(var t=this.start;this.include(t);)e(t),t=t.succ()},include:function(e){return!(e<this.start)&&(this.exclusive?e<this.end:e<=this.end)}}}()),Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0};function $(e){if(arguments.length>1){for(var t=0,n=[],i=arguments.length;t<i;t++)n.push($(arguments[t]));return n}return Object.isString(e)&&(e=document.getElementById(e)),Element.extend(e)}if(Ajax.Responders={responders:[],_each:function(e){this.responders._each(e)},register:function(e){this.include(e)||this.responders.push(e)},unregister:function(e){this.responders=this.responders.without(e)},dispatch:function(e,t,n,i){this.each(function(o){if(Object.isFunction(o[e]))try{o[e].apply(o,[t,n,i])}catch(e){}})}},Object.extend(Ajax.Responders,Enumerable),Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}}),Ajax.Base=Class.create({initialize:function(e){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0},Object.extend(this.options,e||{}),this.options.method=this.options.method.toLowerCase(),Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}}),Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function(e,t,n){e(n),this.transport=Ajax.getTransport(),this.request(t)},request:function(e){this.url=e,this.method=this.options.method;var t=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(t+=(t?"&":"")+"_method="+this.method,this.method="post"),t&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+t),this.parameters=t.toQueryParams();try{var n=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(n),Ajax.Responders.dispatch("onCreate",this,n),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1),this.transport.onreadystatechange=this.onStateChange.bind(this),this.setRequestHeaders(),this.body="post"==this.method?this.options.postBody||t:null,this.transport.send(this.body),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(e){this.dispatchException(e)}},onStateChange:function(){var e=this.transport.readyState;e>1&&(4!=e||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var e={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(e["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005&&(e.Connection="close")),"object"==typeof this.options.requestHeaders){var t=this.options.requestHeaders;if(Object.isFunction(t.push))for(var n=0,i=t.length;n<i;n+=2)e[t[n]]=t[n+1];else $H(t).each(function(t){e[t.key]=t.value})}for(var o in e)this.transport.setRequestHeader(o,e[o])},success:function(){var e=this.getStatus();return!e||e>=200&&e<300||304==e},getStatus:function(){try{return 1223===this.transport.status?204:this.transport.status||0}catch(e){return 0}},respondToReadyState:function(e){var t=Ajax.Request.Events[e],n=new Ajax.Response(this);if("Complete"==t){try{this._complete=!0,(this.options["on"+n.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(n,n.headerJSON)}catch(e){this.dispatchException(e)}var i=n.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&i&&i.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&this.evalResponse()}try{(this.options["on"+t]||Prototype.emptyFunction)(n,n.headerJSON),Ajax.Responders.dispatch("on"+t,this,n,n.headerJSON)}catch(e){this.dispatchException(e)}"Complete"==t&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var e=this.url.match(/^\s*https?:\/\/[^\/]*/);return!e||e[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(e){try{return this.transport.getResponseHeader(e)||null}catch(e){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(e){(this.options.onException||Prototype.emptyFunction)(this,e),Ajax.Responders.dispatch("onException",this,e)}}),Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"],Ajax.Response=Class.create({initialize:function(e){this.request=e;var t=this.transport=e.transport,n=this.readyState=t.readyState;if((n>2&&!Prototype.Browser.IE||4==n)&&(this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(t.responseText),this.headerJSON=this._getHeaderJSON()),4==n){var i=t.responseXML;this.responseXML=Object.isUndefined(i)?null:i,this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(e){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(e){return null}},getResponseHeader:function(e){return this.transport.getResponseHeader(e)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var e=this.getHeader("X-JSON");if(!e)return null;e=decodeURIComponent(escape(e));try{return e.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}},_getResponseJSON:function(){var e=this.request.options;if(!e.evalJSON||"force"!=e.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(e.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}}}),Ajax.Updater=Class.create(Ajax.Request,{initialize:function(e,t,n,i){this.container={success:t.success||t,failure:t.failure||(t.success?null:t)};var o=(i=Object.clone(i)).onComplete;i.onComplete=function(e,t){this.updateContent(e.responseText),Object.isFunction(o)&&o(e,t)}.bind(this),e(n,i)},updateContent:function(e){var t=this.container[this.success()?"success":"failure"],n=this.options;if(n.evalScripts||(e=e.stripScripts()),t=$(t))if(n.insertion)if(Object.isString(n.insertion)){var i={};i[n.insertion]=e,t.insert(i)}else n.insertion(t,e);else t.update(e)}}),Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function(e,t,n,i){e(i),this.onComplete=this.options.onComplete,this.frequency=this.options.frequency||2,this.decay=this.options.decay||1,this.updater={},this.container=t,this.url=n,this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this),this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0,clearTimeout(this.timer),(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(e){this.options.decay&&(this.decay=e.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=e.responseText),this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}}),Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(e,t){for(var n=[],i=document.evaluate(e,$(t)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),o=0,r=i.snapshotLength;o<r;o++)n.push(Element.extend(i.snapshotItem(o)));return n}),!Node)var Node={};Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),function(e){var t=function(){try{var e=document.createElement('<input name="x">');return"input"===e.tagName.toLowerCase()&&"x"===e.name}catch(e){return!1}}(),n=e.Element;e.Element=function(e,n){n=n||{},e=e.toLowerCase();var i=Element.cache;if(t&&n.name)return e="<"+e+' name="'+n.name+'">',delete n.name,Element.writeAttribute(document.createElement(e),n);i[e]||(i[e]=Element.extend(document.createElement(e)));var o,r=(o=n,"select"===e||"type"in o?document.createElement(e):i[e].cloneNode(!1));return Element.writeAttribute(r,n)},Object.extend(e.Element,n||{}),n&&(e.Element.prototype=n.prototype)}(this),Element.idCounter=1,Element.cache={},Element._purgeElement=function(e){var t=e._prototypeUID;t&&(Element.stopObserving(e),e._prototypeUID=void 0,delete Element.Storage[t])},Element.Methods={visible:function(e){return"none"!=$(e).style.display},toggle:function(e){return e=$(e),Element[Element.visible(e)?"hide":"show"](e),e},hide:function(e){return(e=$(e)).style.display="none",e},show:function(e){return(e=$(e)).style.display="",e},remove:function(e){return(e=$(e)).parentNode.removeChild(e),e},update:function(){var e,t,n=(e=document.createElement("select"),t=!0,e.innerHTML='<option value="test">test</option>',e.options&&e.options[0]&&(t="OPTION"!==e.options[0].nodeName.toUpperCase()),e=null,t),i=function(){try{var e=document.createElement("table");if(e&&e.tBodies){e.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var t=void 0===e.tBodies[0];return e=null,t}}catch(e){return!0}}(),o=function(){try{var e=document.createElement("div");e.innerHTML="<link>";var t=0===e.childNodes.length;return e=null,t}catch(e){return!0}}(),r=n||i||o,s=function(){var e=document.createElement("script"),t=!1;try{e.appendChild(document.createTextNode("")),t=!e.firstChild||e.firstChild&&3!==e.firstChild.nodeType}catch(e){t=!0}return e=null,t}();return function(e,t){e=$(e);for(var n=Element._purgeElement,i=e.getElementsByTagName("*"),a=i.length;a--;)n(i[a]);if(t&&t.toElement&&(t=t.toElement()),Object.isElement(t))return e.update().insert(t);t=Object.toHTML(t);var l=e.tagName.toUpperCase();if("SCRIPT"===l&&s)return e.text=t,e;if(r)if(l in Element._insertionTranslations.tags){for(;e.firstChild;)e.removeChild(e.firstChild);Element._getContentFromAnonymousElement(l,t.stripScripts()).each(function(t){e.appendChild(t)})}else if(o&&Object.isString(t)&&t.indexOf("<link")>-1){for(;e.firstChild;)e.removeChild(e.firstChild);Element._getContentFromAnonymousElement(l,t.stripScripts(),!0).each(function(t){e.appendChild(t)})}else e.innerHTML=t.stripScripts();else e.innerHTML=t.stripScripts();return t.evalScripts.bind(t).defer(),e}}(),replace:function(e,t){if(e=$(e),t&&t.toElement)t=t.toElement();else if(!Object.isElement(t)){t=Object.toHTML(t);var n=e.ownerDocument.createRange();n.selectNode(e),t.evalScripts.bind(t).defer(),t=n.createContextualFragment(t.stripScripts())}return e.parentNode.replaceChild(t,e),e},insert:function(e,t){var n,i,o,r;for(var s in e=$(e),(Object.isString(t)||Object.isNumber(t)||Object.isElement(t)||t&&(t.toElement||t.toHTML))&&(t={bottom:t}),t)n=t[s],s=s.toLowerCase(),i=Element._insertionTranslations[s],n&&n.toElement&&(n=n.toElement()),Object.isElement(n)?i(e,n):(n=Object.toHTML(n),o=("before"==s||"after"==s?e.parentNode:e).tagName.toUpperCase(),r=Element._getContentFromAnonymousElement(o,n.stripScripts()),"top"!=s&&"after"!=s||r.reverse(),r.each(i.curry(e)),n.evalScripts.bind(n).defer());return e},wrap:function(e,t,n){return e=$(e),Object.isElement(t)?$(t).writeAttribute(n||{}):t=Object.isString(t)?new Element(t,n):new Element("div",t),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},inspect:function(e){var t="<"+(e=$(e)).tagName.toLowerCase();return $H({id:"id",className:"class"}).each(function(n){var i=n.first(),o=n.last(),r=(e[i]||"").toString();r&&(t+=" "+o+"="+r.inspect(!0))}),t+">"},recursivelyCollect:function(e,t,n){e=$(e),n=n||-1;for(var i=[];(e=e[t])&&(1==e.nodeType&&i.push(Element.extend(e)),i.length!=n););return i},ancestors:function(e){return Element.recursivelyCollect(e,"parentNode")},descendants:function(e){return Element.select(e,"*")},firstDescendant:function(e){for(e=$(e).firstChild;e&&1!=e.nodeType;)e=e.nextSibling;return $(e)},immediateDescendants:function(e){for(var t=[],n=$(e).firstChild;n;)1===n.nodeType&&t.push(Element.extend(n)),n=n.nextSibling;return t},previousSiblings:function(e,t){return Element.recursivelyCollect(e,"previousSibling")},nextSiblings:function(e){return Element.recursivelyCollect(e,"nextSibling")},siblings:function(e){return e=$(e),Element.previousSiblings(e).reverse().concat(Element.nextSiblings(e))},match:function(e,t){return e=$(e),Object.isString(t)?Prototype.Selector.match(e,t):t.match(e)},up:function(e,t,n){if(e=$(e),1==arguments.length)return $(e.parentNode);var i=Element.ancestors(e);return Object.isNumber(t)?i[t]:Prototype.Selector.find(i,t,n)},down:function(e,t,n){return e=$(e),1==arguments.length?Element.firstDescendant(e):Object.isNumber(t)?Element.descendants(e)[t]:Element.select(e,t)[n||0]},previous:function(e,t,n){return e=$(e),Object.isNumber(t)&&(n=t,t=!1),Object.isNumber(n)||(n=0),t?Prototype.Selector.find(e.previousSiblings(),t,n):e.recursivelyCollect("previousSibling",n+1)[n]},next:function(e,t,n){if(e=$(e),Object.isNumber(t)&&(n=t,t=!1),Object.isNumber(n)||(n=0),t)return Prototype.Selector.find(e.nextSiblings(),t,n);Object.isNumber(n);return e.recursivelyCollect("nextSibling",n+1)[n]},select:function(e){e=$(e);var t=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(t,e)},adjacent:function(e){e=$(e);var t=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(t,e.parentNode).without(e)},identify:function(e){e=$(e);var t=Element.readAttribute(e,"id");if(t)return t;for(;$(t="anonymous_element_"+Element.idCounter++););return Element.writeAttribute(e,"id",t),t},readAttribute:function(e,t){if(e=$(e),Prototype.Browser.IE){var n=Element._attributeTranslations.read;if(n.values[t])return n.values[t](e,t);if(n.names[t]&&(t=n.names[t]),t.include(":"))return e.attributes&&e.attributes[t]?e.attributes[t].value:null}return e.getAttribute(t)},writeAttribute:function(e,t,n){e=$(e);var i={},o=Element._attributeTranslations.write;for(var r in"object"==typeof t?i=t:i[t]=!!Object.isUndefined(n)||n,i)t=o.names[r]||r,n=i[r],o.values[r]&&(t=o.values[r](e,n)),!1===n||null===n?e.removeAttribute(t):!0===n?e.setAttribute(t,t):e.setAttribute(t,n);return e},getHeight:function(e){return Element.getDimensions(e).height},getWidth:function(e){return Element.getDimensions(e).width},classNames:function(e){return new Element.ClassNames(e)},hasClassName:function(e,t){if(e=$(e)){var n=e.className;return n.length>0&&(n==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(n))}},addClassName:function(e,t){if(e=$(e))return Element.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClassName:function(e,t){if(e=$(e))return e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").strip(),e},toggleClassName:function(e,t){if(e=$(e))return Element[Element.hasClassName(e,t)?"removeClassName":"addClassName"](e,t)},cleanWhitespace:function(e){for(var t=(e=$(e)).firstChild;t;){var n=t.nextSibling;3!=t.nodeType||/\S/.test(t.nodeValue)||e.removeChild(t),t=n}return e},empty:function(e){return $(e).innerHTML.blank()},descendantOf:function(e,t){if(e=$(e),t=$(t),e.compareDocumentPosition)return 8==(8&e.compareDocumentPosition(t));if(t.contains)return t.contains(e)&&t!==e;for(;e=e.parentNode;)if(e==t)return!0;return!1},scrollTo:function(e){e=$(e);var t=Element.cumulativeOffset(e);return window.scrollTo(t[0],t[1]),e},getStyle:function(e,t){e=$(e),t="float"==t?"cssFloat":t.camelize();var n=e.style[t];if(!n||"auto"==n){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"opacity"==t?n?parseFloat(n):1:"auto"==n?null:n},getOpacity:function(e){return $(e).getStyle("opacity")},setStyle:function(e,t){var n=(e=$(e)).style;if(Object.isString(t))return e.style.cssText+=";"+t,t.include("opacity")?e.setOpacity(t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var i in t)"opacity"==i?e.setOpacity(t[i]):n["float"==i||"cssFloat"==i?Object.isUndefined(n.styleFloat)?"cssFloat":"styleFloat":i]=t[i];return e},setOpacity:function(e,t){return(e=$(e)).style.opacity=1==t||""===t?"":t<1e-5?0:t,e},makePositioned:function(e){e=$(e);var t=Element.getStyle(e,"position");return"static"!=t&&t||(e._madePositioned=!0,e.style.position="relative",Prototype.Browser.Opera&&(e.style.top=0,e.style.left=0)),e},undoPositioned:function(e){return(e=$(e))._madePositioned&&(e._madePositioned=void 0,e.style.position=e.style.top=e.style.left=e.style.bottom=e.style.right=""),e},makeClipping:function(e){return(e=$(e))._overflow?e:(e._overflow=Element.getStyle(e,"overflow")||"auto","hidden"!==e._overflow&&(e.style.overflow="hidden"),e)},undoClipping:function(e){return(e=$(e))._overflow?(e.style.overflow="auto"==e._overflow?"":e._overflow,e._overflow=null,e):e},clonePosition:function(e,t){var n=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},arguments[2]||{});t=$(t);var i=Element.viewportOffset(t),o=[0,0],r=null;return e=$(e),"absolute"==Element.getStyle(e,"position")&&(r=Element.getOffsetParent(e),o=Element.viewportOffset(r)),r==document.body&&(o[0]-=document.body.offsetLeft,o[1]-=document.body.offsetTop),n.setLeft&&(e.style.left=i[0]-o[0]+n.offsetLeft+"px"),n.setTop&&(e.style.top=i[1]-o[1]+n.offsetTop+"px"),n.setWidth&&(e.style.width=t.offsetWidth+"px"),n.setHeight&&(e.style.height=t.offsetHeight+"px"),e}},Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants}),Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}},Prototype.Browser.Opera?(Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(e,t,n){switch(n){case"height":case"width":if(!Element.visible(t))return null;var i=parseInt(e(t,n),10);return i!==t["offset"+n.capitalize()]?i+"px":("height"===n?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(i,function(n,i){var o=e(t,i);return null===o?n:n-parseInt(o,10)})+"px";default:return e(t,n)}}),Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(e,t,n){return"title"===n?t.title:e(t,n)})):Prototype.Browser.IE?(Element.Methods.getStyle=function(e,t){e=$(e),t="float"==t||"cssFloat"==t?"styleFloat":t.camelize();var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),"opacity"==t?(n=(e.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&n[1]?parseFloat(n[1])/100:1:"auto"==n?"width"!=t&&"height"!=t||"none"==e.getStyle("display")?null:e["offset"+t.capitalize()]+"px":n},Element.Methods.setOpacity=function(e,t){function n(e){return e.replace(/alpha\([^\)]*\)/gi,"")}var i=(e=$(e)).currentStyle;(i&&!i.hasLayout||!i&&"normal"==e.style.zoom)&&(e.style.zoom=1);var o=e.getStyle("filter"),r=e.style;return 1==t||""===t?((o=n(o))?r.filter=o:r.removeAttribute("filter"),e):(t<1e-5&&(t=0),r.filter=n(o)+"alpha(opacity="+100*t+")",e)},Element._attributeTranslations=function(){var e="className",t="for",n=document.createElement("div");return n.setAttribute(e,"x"),"x"!==n.className&&(n.setAttribute("class","x"),"x"===n.className&&(e="class")),n=null,(n=document.createElement("label")).setAttribute(t,"x"),"x"!==n.htmlFor&&(n.setAttribute("htmlFor","x"),"x"===n.htmlFor&&(t="htmlFor")),n=null,{read:{names:{class:e,className:e,for:t,htmlFor:t},values:{_getAttr:function(e,t){return e.getAttribute(t)},_getAttr2:function(e,t){return e.getAttribute(t,2)},_getAttrNode:function(e,t){var n=e.getAttributeNode(t);return n?n.value:""},_getEv:function(){var e,t=document.createElement("div");t.onclick=Prototype.emptyFunction;var n=t.getAttribute("onclick");return String(n).indexOf("{")>-1?e=function(e,t){return(t=e.getAttribute(t))?(t=(t=(t=t.toString()).split("{")[1]).split("}")[0]).strip():null}:""===n&&(e=function(e,t){return(t=e.getAttribute(t))?t.strip():null}),t=null,e}(),_flag:function(e,t){return $(e).hasAttribute(t)?t:null},style:function(e){return e.style.cssText.toLowerCase()},title:function(e){return e.title}}}}}(),Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(e,t){e.checked=!!t},style:function(e,t){e.style.cssText=t||""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(e){Element._attributeTranslations.write.names[e.toLowerCase()]=e,Element._attributeTranslations.has[e.toLowerCase()]=e}),function(e){Object.extend(e,{href:e._getAttr2,src:e._getAttr2,type:e._getAttr,action:e._getAttrNode,disabled:e._flag,checked:e._flag,readonly:e._flag,multiple:e._flag,onload:e._getEv,onunload:e._getEv,onclick:e._getEv,ondblclick:e._getEv,onmousedown:e._getEv,onmouseup:e._getEv,onmouseover:e._getEv,onmousemove:e._getEv,onmouseout:e._getEv,onfocus:e._getEv,onblur:e._getEv,onkeypress:e._getEv,onkeydown:e._getEv,onkeyup:e._getEv,onsubmit:e._getEv,onreset:e._getEv,onselect:e._getEv,onchange:e._getEv})}(Element._attributeTranslations.read.values),Prototype.BrowserFeatures.ElementExtensions&&function(){Element.Methods.down=function(e,t,n){return e=$(e),1==arguments.length?e.firstDescendant():Object.isNumber(t)?function(e){for(var t,n=e.getElementsByTagName("*"),i=[],o=0;t=n[o];o++)"!"!==t.tagName&&i.push(t);return i}(e)[t]:Element.select(e,t)[n||0]}}()):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=function(e,t){return(e=$(e)).style.opacity=1==t?.999999:""===t?"":t<1e-5?0:t,e}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=function(e,t){if((e=$(e)).style.opacity=1==t||""===t?"":t<1e-5?0:t,1==t)if("IMG"==e.tagName.toUpperCase()&&e.width)e.width++,e.width--;else try{var n=document.createTextNode(" ");e.appendChild(n),e.removeChild(n)}catch(e){}return e}),"outerHTML"in document.documentElement&&(Element.Methods.replace=function(e,t){if(e=$(e),t&&t.toElement&&(t=t.toElement()),Object.isElement(t))return e.parentNode.replaceChild(t,e),e;t=Object.toHTML(t);var n=e.parentNode,i=n.tagName.toUpperCase();if(Element._insertionTranslations.tags[i]){var o=e.next(),r=Element._getContentFromAnonymousElement(i,t.stripScripts());n.removeChild(e),o?r.each(function(e){n.insertBefore(e,o)}):r.each(function(e){n.appendChild(e)})}else e.outerHTML=t.stripScripts();return t.evalScripts.bind(t).defer(),e}),Element._returnOffset=function(e,t){var n=[e,t];return n.left=e,n.top=t,n},Element._getContentFromAnonymousElement=function(e,t,n){var i=new Element("div"),o=Element._insertionTranslations.tags[e],r=!1;if(o?r=!0:n&&(r=!0,o=["","",0]),r){i.innerHTML="&nbsp;"+o[0]+t+o[1],i.removeChild(i.firstChild);for(var s=o[2];s--;)i=i.firstChild}else i.innerHTML=t;return $A(i.childNodes)},Element._insertionTranslations={before:function(e,t){e.parentNode.insertBefore(t,e)},top:function(e,t){e.insertBefore(t,e.firstChild)},bottom:function(e,t){e.appendChild(t)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},function(){var e=Element._insertionTranslations.tags;Object.extend(e,{THEAD:e.TBODY,TFOOT:e.TBODY,TH:e.TD})}(),Element.Methods.Simulated={hasAttribute:function(e,t){t=Element._attributeTranslations.has[t]||t;var n=$(e).getAttributeNode(t);return!(!n||!n.specified)}},Element.Methods.ByTag={},Object.extend(Element,Element.Methods),function(e){!Prototype.BrowserFeatures.ElementExtensions&&e.__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=e.__proto__,Prototype.BrowserFeatures.ElementExtensions=!0),e=null}(document.createElement("div")),Element.extend=function(){function e(e,t){for(var n in t){var i=t[n];!Object.isFunction(i)||n in e||(e[n]=i.methodize())}}var t=function(e){if(void 0!==window.Element){var t=window.Element.prototype;if(t){var n="_"+(Math.random()+"").slice(2),i=document.createElement(e);t[n]="x";var o="x"!==i[n];return delete t[n],i=null,o}}return!1}("object");if(Prototype.BrowserFeatures.SpecificElementExtensions)return t?function(t){if(t&&void 0===t._extendedByPrototype){var n=t.tagName;n&&/^(?:object|applet|embed)$/i.test(n)&&(e(t,Element.Methods),e(t,Element.Methods.Simulated),e(t,Element.Methods.ByTag[n.toUpperCase()]))}return t}:Prototype.K;var n={},i=Element.Methods.ByTag,o=Object.extend(function(t){if(!t||void 0!==t._extendedByPrototype||1!=t.nodeType||t==window)return t;var o=Object.clone(n),r=t.tagName.toUpperCase();return i[r]&&Object.extend(o,i[r]),e(t,o),t._extendedByPrototype=Prototype.emptyFunction,t},{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(n,Element.Methods),Object.extend(n,Element.Methods.Simulated))}});return o.refresh(),o}(),document.documentElement.hasAttribute?Element.hasAttribute=function(e,t){return e.hasAttribute(t)}:Element.hasAttribute=Element.Methods.Simulated.hasAttribute,Element.addMethods=function(e){var t=Prototype.BrowserFeatures,n=Element.Methods.ByTag;if(e||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})),2==arguments.length){var i=e;e=arguments[1]}function o(t){t=t.toUpperCase(),Element.Methods.ByTag[t]||(Element.Methods.ByTag[t]={}),Object.extend(Element.Methods.ByTag[t],e)}function r(e,t,n){for(var i in n=n||!1,e){var o=e[i];Object.isFunction(o)&&(n&&i in t||(t[i]=o.methodize()))}}function s(e){var t,n={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(n[e]&&(t="HTML"+n[e]+"Element"),window[t])return window[t];if(t="HTML"+e+"Element",window[t])return window[t];if(t="HTML"+e.capitalize()+"Element",window[t])return window[t];var i=document.createElement(e),o=i.__proto__||i.constructor.prototype;return i=null,o}i?Object.isArray(i)?i.each(o):o(i):Object.extend(Element.Methods,e||{});var a=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(t.ElementExtensions&&(r(Element.Methods,a),r(Element.Methods.Simulated,a,!0)),t.SpecificElementExtensions)for(var l in Element.Methods.ByTag){var c=s(l);Object.isUndefined(c)||r(n[l],c.prototype)}Object.extend(Element,Element.Methods),delete Element.ByTag,Element.extend.refresh&&Element.extend.refresh(),Element.cache={}},document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}},function(e){var t,n=Prototype.Browser,i=document,o={};function r(r){return t||(t=n.WebKit&&!i.evaluate?document:n.Opera&&window.parseFloat(window.opera.version())<9.5?document.body:document.documentElement),o[r]="client"+r,e["get"+r]=function(){return t[o[r]]},e["get"+r]()}e.getWidth=r.curry("Width"),e.getHeight=r.curry("Height")}(document.viewport),Element.Storage={UID:1},Element.addMethods({getStorage:function(e){var t;if(e=$(e))return e===window?t=0:(void 0===e._prototypeUID&&(e._prototypeUID=Element.Storage.UID++),t=e._prototypeUID),Element.Storage[t]||(Element.Storage[t]=$H()),Element.Storage[t]},store:function(e,t,n){if(e=$(e))return 2===arguments.length?Element.getStorage(e).update(t):Element.getStorage(e).set(t,n),e},retrieve:function(e,t,n){if(e=$(e)){var i=Element.getStorage(e),o=i.get(t);return Object.isUndefined(o)&&(i.set(t,n),o=n),o}},clone:function(e,t){if(e=$(e)){var n=e.cloneNode(t);if(n._prototypeUID=void 0,t)for(var i=Element.select(n,"*"),o=i.length;o--;)i[o]._prototypeUID=void 0;return Element.extend(n)}},purge:function(e){if(e=$(e)){var t=Element._purgeElement;t(e);for(var n=e.getElementsByTagName("*"),i=n.length;i--;)t(n[i]);return null}}}),function(){function e(e,t,n){var i=null;if(Object.isElement(e)&&(e=(i=e).getStyle(t)),null===e)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(e))return window.parseFloat(e);var o,r=e.include("%"),s=n===document.viewport;if(/\d/.test(e)&&i&&i.runtimeStyle&&(!r||!s)){var a=i.style.left,l=i.runtimeStyle.left;return i.runtimeStyle.left=i.currentStyle.left,i.style.left=e||0,e=i.style.pixelLeft,i.style.left=a,i.runtimeStyle.left=l,e}if(i&&r){n=n||i.parentNode;var c=(o=e.match(/^(\d+)%?$/i))?Number(o[1])/100:null,u=null,d=(i.getStyle("position"),t.include("left")||t.include("right")||t.include("width")),h=t.include("top")||t.include("bottom")||t.include("height");return n===document.viewport?d?u=document.viewport.getWidth():h&&(u=document.viewport.getHeight()):d?u=$(n).measure("width"):h&&(u=$(n).measure("height")),null===u?0:u*c}return 0}var t=Prototype.K;function n(e){if(a(e=$(e))||l(e)||r(e)||s(e))return $(document.body);if(!("inline"===Element.getStyle(e,"display"))&&e.offsetParent)return $(e.offsetParent);for(;(e=e.parentNode)&&e!==document.body;)if("static"!==Element.getStyle(e,"position"))return s(e)?$(document.body):$(e);return $(document.body)}function i(e){var t=0,n=0;if((e=$(e)).parentNode)for(;t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;);return new Element.Offset(n,t)}function o(e){var t=(e=$(e)).getLayout(),n=0,i=0;do{if(n+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent){if(r(e))break;if("static"!==Element.getStyle(e,"position"))break}}while(e);return i-=t.get("margin-top"),n-=t.get("margin-left"),new Element.Offset(i,n)}function r(e){return"BODY"===e.nodeName.toUpperCase()}function s(e){return"HTML"===e.nodeName.toUpperCase()}function a(e){return e.nodeType===Node.DOCUMENT_NODE}function l(e){return e!==document.body&&!Element.descendantOf(e,document.body)}"currentStyle"in document.documentElement&&(t=function(e){return e.currentStyle.hasLayout||(e.style.zoom=1),e}),Element.Layout=Class.create(Hash,{initialize:function(e,t,n){e(),this.element=$(t),Element.Layout.PROPERTIES.each(function(e){this._set(e,null)},this),n&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(e,t){return Hash.prototype.set.call(this,e,t)},set:function(e,t){throw"Properties of Element.Layout are read-only."},get:function(e,t){var n=e(t);return null===n?this._compute(t):n},_begin:function(){if(!this._prepared){var t=this.element;if(function(e){for(;e&&e.parentNode;){if("none"===e.getStyle("display"))return!1;e=$(e.parentNode)}return!0}(t))this._prepared=!0;else{var n={position:t.style.position||"",width:t.style.width||"",visibility:t.style.visibility||"",display:t.style.display||""};t.store("prototype_original_styles",n);var i=t.getStyle("position"),o=t.getStyle("width");"0px"!==o&&null!==o||(t.style.display="block",o=t.getStyle("width"));var r="fixed"===i?document.viewport:t.parentNode;t.setStyle({position:"absolute",visibility:"hidden",display:"block"});var s,a=t.getStyle("width");if(o&&a===o)s=e(t,"width",r);else if("absolute"===i||"fixed"===i)s=e(t,"width",r);else{s=$(t.parentNode).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}t.setStyle({width:s+"px"}),this._prepared=!0}}},_end:function(){var e=this.element,t=e.retrieve("prototype_original_styles");e.store("prototype_original_styles",null),e.setStyle(t),this._prepared=!1},_compute:function(e){var t=Element.Layout.COMPUTATIONS;if(!(e in t))throw"Property not found.";return this._set(e,t[e].call(this,this.element))},toObject:function(){var e=$A(arguments),t=0===e.length?Element.Layout.PROPERTIES:e.join(" ").split(" "),n={};return t.each(function(e){if(Element.Layout.PROPERTIES.include(e)){var t=this.get(e);null!=t&&(n[e]=t)}},this),n},toHash:function(){var e=this.toObject.apply(this,arguments);return new Hash(e)},toCSS:function(){var e=$A(arguments),t=0===e.length?Element.Layout.PROPERTIES:e.join(" ").split(" "),n={};return t.each(function(e){if(Element.Layout.PROPERTIES.include(e)&&!Element.Layout.COMPOSITE_PROPERTIES.include(e)){var t,i=this.get(e);null!=i&&(n[(t=e,t.include("border")&&(t+="-width"),t.camelize())]=i+"px")}},this),n},inspect:function(){return"#<Element.Layout>"}}),Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(e){this._preComputing||this._begin();var t=this.get("border-box-height");if(t<=0)return this._preComputing||this._end(),0;var n=this.get("border-top"),i=this.get("border-bottom"),o=this.get("padding-top"),r=this.get("padding-bottom");return this._preComputing||this._end(),t-n-i-o-r},width:function(e){this._preComputing||this._begin();var t=this.get("border-box-width");if(t<=0)return this._preComputing||this._end(),0;var n=this.get("border-left"),i=this.get("border-right"),o=this.get("padding-left"),r=this.get("padding-right");return this._preComputing||this._end(),t-n-i-o-r},"padding-box-height":function(e){return this.get("height")+this.get("padding-top")+this.get("padding-bottom")},"padding-box-width":function(e){return this.get("width")+this.get("padding-left")+this.get("padding-right")},"border-box-height":function(e){this._preComputing||this._begin();var t=e.offsetHeight;return this._preComputing||this._end(),t},"border-box-width":function(e){this._preComputing||this._begin();var t=e.offsetWidth;return this._preComputing||this._end(),t},"margin-box-height":function(e){var t=this.get("border-box-height"),n=this.get("margin-top"),i=this.get("margin-bottom");return t<=0?0:t+n+i},"margin-box-width":function(e){var t=this.get("border-box-width"),n=this.get("margin-left"),i=this.get("margin-right");return t<=0?0:t+n+i},top:function(e){return e.positionedOffset().top},bottom:function(e){var t=e.positionedOffset();return e.getOffsetParent().measure("height")-this.get("border-box-height")-t.top},left:function(e){return e.positionedOffset().left},right:function(e){var t=e.positionedOffset();return e.getOffsetParent().measure("width")-this.get("border-box-width")-t.left},"padding-top":function(t){return e(t,"paddingTop")},"padding-bottom":function(t){return e(t,"paddingBottom")},"padding-left":function(t){return e(t,"paddingLeft")},"padding-right":function(t){return e(t,"paddingRight")},"border-top":function(t){return e(t,"borderTopWidth")},"border-bottom":function(t){return e(t,"borderBottomWidth")},"border-left":function(t){return e(t,"borderLeftWidth")},"border-right":function(t){return e(t,"borderRightWidth")},"margin-top":function(t){return e(t,"marginTop")},"margin-bottom":function(t){return e(t,"marginBottom")},"margin-left":function(t){return e(t,"marginLeft")},"margin-right":function(t){return e(t,"marginRight")}}}),"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(e){var n=t(e.getOffsetParent()),i=e.getBoundingClientRect();return(n.getBoundingClientRect().right-i.right).round()},bottom:function(e){var n=t(e.getOffsetParent()),i=e.getBoundingClientRect();return(n.getBoundingClientRect().bottom-i.bottom).round()}}),Element.Offset=Class.create({initialize:function(e,t){this.left=e.round(),this.top=t.round(),this[0]=this.left,this[1]=this.top},relativeTo:function(e){return new Element.Offset(this.left-e.left,this.top-e.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}}),Prototype.Browser.IE?(n=n.wrap(function(e,t){if(a(t=$(t))||l(t)||r(t)||s(t))return $(document.body);var n=t.getStyle("position");if("static"!==n)return e(t);t.setStyle({position:"relative"});var i=e(t);return t.setStyle({position:n}),i}),o=o.wrap(function(e,n){if(!(n=$(n)).parentNode)return new Element.Offset(0,0);var i=n.getStyle("position");if("static"!==i)return e(n);var o=n.getOffsetParent();o&&"fixed"===o.getStyle("position")&&t(o),n.setStyle({position:"relative"});var r=e(n);return n.setStyle({position:i}),r})):Prototype.Browser.Webkit&&(i=function(e){e=$(e);var t=0,n=0;do{if(t+=e.offsetTop||0,n+=e.offsetLeft||0,e.offsetParent==document.body&&"absolute"==Element.getStyle(e,"position"))break;e=e.offsetParent}while(e);return new Element.Offset(n,t)}),Element.addMethods({getLayout:function(e,t){return new Element.Layout(e,t)},measure:function(e,t){return $(e).getLayout().get(t)},getDimensions:function(e){e=$(e);var t=Element.getStyle(e,"display");if(t&&"none"!==t)return{width:e.offsetWidth,height:e.offsetHeight};var n=e.style,i={visibility:n.visibility,position:n.position,display:n.display},o={visibility:"hidden",display:"block"};"fixed"!==i.position&&(o.position="absolute"),Element.setStyle(e,o);var r={width:e.offsetWidth,height:e.offsetHeight};return Element.setStyle(e,i),r},getOffsetParent:n,cumulativeOffset:i,positionedOffset:o,cumulativeScrollOffset:function(e){for(var t=0,n=0;t+=e.scrollTop||0,n+=e.scrollLeft||0,e=e.parentNode;);return new Element.Offset(n,t)},viewportOffset:function(e){o=$(o);var t=0,n=0,i=document.body,o=e;do{if(t+=o.offsetTop||0,n+=o.offsetLeft||0,o.offsetParent==i&&"absolute"==Element.getStyle(o,"position"))break}while(o=o.offsetParent);for(o=e;o!=i&&(t-=o.scrollTop||0,n-=o.scrollLeft||0),o=o.parentNode;);return new Element.Offset(n,t)},absolutize:function(e){if(e=$(e),"absolute"===Element.getStyle(e,"position"))return e;var t=n(e),i=e.viewportOffset(),o=t.viewportOffset(),r=i.relativeTo(o),s=e.getLayout();return e.store("prototype_absolutize_original_styles",{left:e.getStyle("left"),top:e.getStyle("top"),width:e.getStyle("width"),height:e.getStyle("height")}),e.setStyle({position:"absolute",top:r.top+"px",left:r.left+"px",width:s.get("width")+"px",height:s.get("height")+"px"}),e},relativize:function(e){if(e=$(e),"relative"===Element.getStyle(e,"position"))return e;var t=e.retrieve("prototype_absolutize_original_styles");return t&&e.setStyle(t),e}}),"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(e){if(l(e=$(e)))return new Element.Offset(0,0);var t=e.getBoundingClientRect(),n=document.documentElement;return new Element.Offset(t.left-n.clientLeft,t.top-n.clientTop)}})}(),window.$$=function(){var e=$A(arguments).join(", ");return Prototype.Selector.select(e,document)},Prototype.Selector=function(){var e=Prototype.K;return{select:function(){throw new Error('Method "Prototype.Selector.select" must be defined.')},match:function(){throw new Error('Method "Prototype.Selector.match" must be defined.')},find:function(e,t,n){n=n||0;var i,o=Prototype.Selector.match,r=e.length,s=0;for(i=0;i<r;i++)if(o(e[i],t)&&n==s++)return Element.extend(e[i])},extendElements:Element.extend===e?e:function(e){for(var t=0,n=e.length;t<n;t++)Element.extend(e[t]);return e},extendElement:Element.extend}}(),Prototype._original_property=window.Sizzle,function(){var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t=0,n=Object.prototype.toString,i=!1,o=!0;[0,0].sort(function(){return o=!1,0});var r=function(t,i,o,l){o=o||[];var c=i=i||document;if(1!==i.nodeType&&9!==i.nodeType)return[];if(!t||"string"!=typeof t)return o;for(var u,d,p,f,y=[],b=!0,S=g(i),_=t;null!==(e.exec(""),u=e.exec(_));)if(_=u[3],y.push(u[1]),u[2]){f=u[3];break}if(y.length>1&&a.exec(t))if(2===y.length&&s.relative[y[0]])d=v(y[0]+y[1],i);else for(d=s.relative[y[0]]?[i]:r(y.shift(),i);y.length;)t=y.shift(),s.relative[t]&&(t+=y.shift()),d=v(t,d);else{var C;if(!l&&y.length>1&&9===i.nodeType&&!S&&s.match.ID.test(y[0])&&!s.match.ID.test(y[y.length-1]))i=(C=r.find(y.shift(),i,S)).expr?r.filter(C.expr,C.set)[0]:C.set[0];if(i)for(d=(C=l?{expr:y.pop(),set:h(l)}:r.find(y.pop(),1!==y.length||"~"!==y[0]&&"+"!==y[0]||!i.parentNode?i:i.parentNode,S)).expr?r.filter(C.expr,C.set):C.set,y.length>0?p=h(d):b=!1;y.length;){var w=y.pop(),x=w;s.relative[w]?x=y.pop():w="",null==x&&(x=i),s.relative[w](p,x,S)}else p=y=[]}if(p||(p=d),!p)throw"Syntax error, unrecognized expression: "+(w||t);if("[object Array]"===n.call(p))if(b)if(i&&1===i.nodeType)for(var E=0;null!=p[E];E++)p[E]&&(!0===p[E]||1===p[E].nodeType&&m(i,p[E]))&&o.push(d[E]);else for(E=0;null!=p[E];E++)p[E]&&1===p[E].nodeType&&o.push(d[E]);else o.push.apply(o,p);else h(p,o);return f&&(r(f,c,o,l),r.uniqueSort(o)),o};r.uniqueSort=function(e){if(c&&(i=o,e.sort(c),i))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},r.matches=function(e,t){return r(e,null,null,t)},r.find=function(e,t,n){var i;if(!e)return[];for(var o=0,r=s.order.length;o<r;o++){var a,l=s.order[o];if(a=s.leftMatch[l].exec(e)){var c=a[1];if(a.splice(1,1),"\\"!==c.substr(c.length-1)&&(a[1]=(a[1]||"").replace(/\\/g,""),null!=(i=s.find[l](a,t,n)))){e=e.replace(s.match[l],"");break}}}return i||(i=t.getElementsByTagName("*")),{set:i,expr:e}},r.filter=function(e,t,n,i){for(var o,r,a=e,l=[],c=t,u=t&&t[0]&&g(t[0]);e&&t.length;){for(var d in s.filter)if(null!=(o=s.match[d].exec(e))){var h,p,f=s.filter[d];if(r=!1,c==l&&(l=[]),s.preFilter[d])if(o=s.preFilter[d](o,c,n,l,i,u)){if(!0===o)continue}else r=h=!0;if(o)for(var m=0;null!=(p=c[m]);m++)if(p){var v=i^!!(h=f(p,o,m,c));n&&null!=h?v?r=!0:c[m]=!1:v&&(l.push(p),r=!0)}if(void 0!==h){if(n||(c=l),e=e.replace(s.match[d],""),!r)return[];break}}if(e==a){if(null==r)throw"Syntax error, unrecognized expression: "+e;break}a=e}return c};var s=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var i="string"==typeof t,o=i&&!/\W/.test(t),s=i&&!o;o&&!n&&(t=t.toUpperCase());for(var a,l=0,c=e.length;l<c;l++)if(a=e[l]){for(;(a=a.previousSibling)&&1!==a.nodeType;);e[l]=s||a&&a.nodeName===t?a||!1:a===t}s&&r.filter(t,e,!0)},">":function(e,t,n){var i="string"==typeof t;if(i&&!/\W/.test(t)){t=n?t:t.toUpperCase();for(var o=0,s=e.length;o<s;o++){if(l=e[o]){var a=l.parentNode;e[o]=a.nodeName===t&&a}}}else{for(o=0,s=e.length;o<s;o++){var l;(l=e[o])&&(e[o]=i?l.parentNode:l.parentNode===t)}i&&r.filter(t,e,!0)}},"":function(e,n,i){var o=t++,r=f;if(!/\W/.test(n)){var s=n=i?n:n.toUpperCase();r=p}r("parentNode",n,o,e,s,i)},"~":function(e,n,i){var o=t++,r=f;if("string"==typeof n&&!/\W/.test(n)){var s=n=i?n:n.toUpperCase();r=p}r("previousSibling",n,o,e,s,i)}},find:{ID:function(e,t,n){if(void 0!==t.getElementById&&!n){var i=t.getElementById(e[1]);return i?[i]:[]}},NAME:function(e,t,n){if(void 0!==t.getElementsByName){for(var i=[],o=t.getElementsByName(e[1]),r=0,s=o.length;r<s;r++)o[r].getAttribute("name")===e[1]&&i.push(o[r]);return 0===i.length?null:i}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,i,o,r){if(e=" "+e[1].replace(/\\/g,"")+" ",r)return e;for(var s,a=0;null!=(s=t[a]);a++)s&&(o^(s.className&&(" "+s.className+" ").indexOf(e)>=0)?n||i.push(s):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){for(var n=0;!1===t[n];n++);return t[n]&&g(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if("nth"==e[1]){var n=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(("even"==e[2]?"2n":"odd"==e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=n[1]+(n[2]||1)-0,e[3]=n[3]-0}return e[0]=t++,e},ATTR:function(e,t,n,i,o,r){var a=e[1].replace(/\\/g,"");return!r&&s.attrMap[a]&&(e[1]=s.attrMap[a]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,i,o,a){if("not"===t[1]){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var l=r.filter(t[3],n,i,!0^a);return i||o.push.apply(o,l),!1}t[3]=r(t[3],null,null,n)}else if(s.match.POS.test(t[0])||s.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!r(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"BUTTON"===e.nodeName.toUpperCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,i){var o=t[1],r=s.filters[o];if(r)return r(e,n,t,i);if("contains"===o)return(e.textContent||e.innerText||"").indexOf(t[3])>=0;if("not"===o){for(var a=t[3],l=(n=0,a.length);n<l;n++)if(a[n]===e)return!1;return!0}},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"==n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":var o=t[2],r=t[3];if(1==o&&0==r)return!0;var s=t[0],a=e.parentNode;if(a&&(a.sizcache!==s||!e.nodeIndex)){var l=0;for(i=a.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++l);a.sizcache=s}var c=e.nodeIndex-r;return 0==o?0==c:c%o==0&&c/o>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=s.attrHandle[n]?s.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),o=i+"",r=t[2],a=t[4];return null==i?"!="===r:"="===r?o===a:"*="===r?o.indexOf(a)>=0:"~="===r?(" "+o+" ").indexOf(a)>=0:a?"!="===r?o!=a:"^="===r?0===o.indexOf(a):"$="===r?o.substr(o.length-a.length)===a:"|="===r&&(o===a||o.substr(0,a.length+1)===a+"-"):o&&!1!==i},POS:function(e,t,n,i){var o=t[2],r=s.setFilters[o];if(r)return r(e,n,t,i)}}},a=s.match.POS;for(var l in s.match)s.match[l]=new RegExp(s.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),s.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+s.match[l].source);var c,u,d,h=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){h=function(e,t){var i=t||[];if("[object Array]"===n.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var o=0,r=e.length;o<r;o++)i.push(e[o]);else for(o=0;e[o];o++)i.push(e[o]);return i}}function p(e,t,n,i,o,r){for(var s="previousSibling"==e&&!r,a=0,l=i.length;a<l;a++){var c=i[a];if(c){s&&1===c.nodeType&&(c.sizcache=n,c.sizset=a),c=c[e];for(var u=!1;c;){if(c.sizcache===n){u=i[c.sizset];break}if(1!==c.nodeType||r||(c.sizcache=n,c.sizset=a),c.nodeName===t){u=c;break}c=c[e]}i[a]=u}}}function f(e,t,n,i,o,s){for(var a="previousSibling"==e&&!s,l=0,c=i.length;l<c;l++){var u=i[l];if(u){a&&1===u.nodeType&&(u.sizcache=n,u.sizset=l),u=u[e];for(var d=!1;u;){if(u.sizcache===n){d=i[u.sizset];break}if(1===u.nodeType)if(s||(u.sizcache=n,u.sizset=l),"string"!=typeof t){if(u===t){d=!0;break}}else if(r.filter(t,[u]).length>0){d=u;break}u=u[e]}i[l]=d}}}document.documentElement.compareDocumentPosition?c=function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return e==t&&(i=!0),0;var n=4&e.compareDocumentPosition(t)?-1:e===t?0:1;return 0===n&&(i=!0),n}:"sourceIndex"in document.documentElement?c=function(e,t){if(!e.sourceIndex||!t.sourceIndex)return e==t&&(i=!0),0;var n=e.sourceIndex-t.sourceIndex;return 0===n&&(i=!0),n}:document.createRange&&(c=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(i=!0),0;var n=e.ownerDocument.createRange(),o=t.ownerDocument.createRange();n.setStart(e,0),n.setEnd(e,0),o.setStart(t,0),o.setEnd(t,0);var r=n.compareBoundaryPoints(Range.START_TO_END,o);return 0===r&&(i=!0),r}),function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(s.find.ID=function(e,t,n){if(void 0!==t.getElementById&&!n){var i=t.getElementById(e[1]);return i?i.id===e[1]||void 0!==i.getAttributeNode&&i.getAttributeNode("id").nodeValue===e[1]?[i]:void 0:[]}},s.filter.ID=function(e,t){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),(u=document.createElement("div")).appendChild(document.createComment("")),u.getElementsByTagName("*").length>0&&(s.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],o=0;n[o];o++)1===n[o].nodeType&&i.push(n[o]);n=i}return n}),u.innerHTML="<a href='#'></a>",u.firstChild&&void 0!==u.firstChild.getAttribute&&"#"!==u.firstChild.getAttribute("href")&&(s.attrHandle.href=function(e){return e.getAttribute("href",2)}),u=null,document.querySelectorAll&&function(){var e=r,t=document.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){for(var n in r=function(t,n,i,o){if(n=n||document,!o&&9===n.nodeType&&!g(n))try{return h(n.querySelectorAll(t),i)}catch(e){}return e(t,n,i,o)},e)r[n]=e[n];t=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&((d=document.createElement("div")).innerHTML="<div class='test e'></div><div class='test'></div>",0!==d.getElementsByClassName("e").length&&(d.lastChild.className="e",1!==d.getElementsByClassName("e").length&&(s.order.splice(1,0,"CLASS"),s.find.CLASS=function(e,t,n){if(void 0!==t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},d=null)));var m=document.compareDocumentPosition?function(e,t){return 16&e.compareDocumentPosition(t)}:function(e,t){return e!==t&&(!e.contains||e.contains(t))},g=function(e){return 9===e.nodeType&&"HTML"!==e.documentElement.nodeName||!!e.ownerDocument&&"HTML"!==e.ownerDocument.documentElement.nodeName},v=function(e,t){for(var n,i=[],o="",a=t.nodeType?[t]:t;n=s.match.PSEUDO.exec(e);)o+=n[0],e=e.replace(s.match.PSEUDO,"");e=s.relative[e]?e+"*":e;for(var l=0,c=a.length;l<c;l++)r(e,a[l],i);return r.filter(o,i)};window.Sizzle=r}(),function(e){var t=Prototype.Selector.extendElements;Prototype.Selector.engine=e,Prototype.Selector.select=function(n,i){return t(e(n,i||document))},Prototype.Selector.match=function(t,n){return 1==e.matches(n,[t]).length}}(Sizzle),window.Sizzle=Prototype._original_property,delete Prototype._original_property;var Form={reset:function(e){return(e=$(e)).reset(),e},serializeElements:function(e,t){"object"!=typeof t?t={hash:!!t}:Object.isUndefined(t.hash)&&(t.hash=!0);var n,i,o,r,s=!1,a=t.submit;return t.hash?(r={},o=function(e,t,n){return t in e?(Object.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n)):e[t]=n,e}):(r="",o=function(e,t,n){return e+(e?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(n)}),e.inject(r,function(e,t){return!t.disabled&&t.name&&(n=t.name,null==(i=$(t).getValue())||"file"==t.type||"submit"==t.type&&(s||!1===a||a&&n!=a||!(s=!0))||(e=o(e,n,i))),e})}};Form.Methods={serialize:function(e,t){return Form.serializeElements(Form.getElements(e),t)},getElements:function(e){for(var t,n=$(e).getElementsByTagName("*"),i=[],o=Form.Element.Serializers,r=0;t=n[r];r++)i.push(t);return i.inject([],function(e,t){return o[t.tagName.toLowerCase()]&&e.push(Element.extend(t)),e})},getInputs:function(e,t,n){var i=(e=$(e)).getElementsByTagName("input");if(!t&&!n)return $A(i).map(Element.extend);for(var o=0,r=[],s=i.length;o<s;o++){var a=i[o];t&&a.type!=t||n&&a.name!=n||r.push(Element.extend(a))}return r},disable:function(e){return e=$(e),Form.getElements(e).invoke("disable"),e},enable:function(e){return e=$(e),Form.getElements(e).invoke("enable"),e},findFirstElement:function(e){var t=$(e).getElements().findAll(function(e){return"hidden"!=e.type&&!e.disabled}),n=t.findAll(function(e){return e.hasAttribute("tabIndex")&&e.tabIndex>=0}).sortBy(function(e){return e.tabIndex}).first();return n||t.find(function(e){return/^(?:input|select|textarea)$/i.test(e.tagName)})},focusFirstElement:function(e){var t=(e=$(e)).findFirstElement();return t&&t.activate(),e},request:function(e,t){e=$(e);var n=(t=Object.clone(t||{})).parameters,i=e.readAttribute("action")||"";return i.blank()&&(i=window.location.href),t.parameters=e.serialize(!0),n&&(Object.isString(n)&&(n=n.toQueryParams()),Object.extend(t.parameters,n)),e.hasAttribute("method")&&!t.method&&(t.method=e.method),new Ajax.Request(i,t)}},Form.Element={focus:function(e){return $(e).focus(),e},select:function(e){return $(e).select(),e}},Form.Element.Methods={serialize:function(e){if(!(e=$(e)).disabled&&e.name){var t=e.getValue();if(null!=t){var n={};return n[e.name]=t,Object.toQueryString(n)}}return""},getValue:function(e){var t=(e=$(e)).tagName.toLowerCase();return Form.Element.Serializers[t](e)},setValue:function(e,t){var n=(e=$(e)).tagName.toLowerCase();return Form.Element.Serializers[n](e,t),e},clear:function(e){return $(e).value="",e},present:function(e){return""!=$(e).value},activate:function(e){e=$(e);try{e.focus(),!e.select||"input"==e.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(e.type)||e.select()}catch(e){}return e},disable:function(e){return(e=$(e)).disabled=!0,e},enable:function(e){return(e=$(e)).disabled=!1,e}};var Field=Form.Element,$F=Form.Element.Methods.getValue;Form.Element.Serializers=function(){function e(e,t){if(Object.isUndefined(t))return e.checked?e.value:null;e.checked=!!t}function t(e,t){if(Object.isUndefined(t))return e.value;e.value=t}function n(e){var t=e.selectedIndex;return t>=0?o(e.options[t]):null}function i(e){var t=e.length;if(!t)return null;for(var n=0,i=[];n<t;n++){var r=e.options[n];r.selected&&i.push(o(r))}return i}function o(e){return Element.hasAttribute(e,"value")?e.value:e.text}return{input:function(n,i){switch(n.type.toLowerCase()){case"checkbox":case"radio":return e(n,i);default:return t(n,i)}},inputSelector:e,textarea:t,select:function(e,t){if(Object.isUndefined(t))return("select-one"===e.type?n:i)(e);for(var o,r,s=!Object.isArray(t),a=0,l=e.length;a<l;a++)if(o=e.options[a],r=this.optionValue(o),s){if(r==t)return void(o.selected=!0)}else o.selected=t.include(r)},selectOne:n,selectMany:i,optionValue:o,button:t}}(),Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function(e,t,n,i){e(i,n),this.element=$(t),this.lastValue=this.getValue()},execute:function(){var e=this.getValue();(Object.isString(this.lastValue)&&Object.isString(e)?this.lastValue!=e:String(this.lastValue)!=String(e))&&(this.callback(this.element,e),this.lastValue=e)}}),Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}}),Abstract.EventObserver=Class.create({initialize:function(e,t){this.element=$(e),this.callback=t,this.lastValue=this.getValue(),"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var e=this.getValue();this.lastValue!=e&&(this.callback(this.element,e),this.lastValue=e)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(e){if(e.type)switch(e.type.toLowerCase()){case"checkbox":case"radio":Event.observe(e,"click",this.onElementEvent.bind(this));break;default:Event.observe(e,"change",this.onElementEvent.bind(this))}}}),Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}}),function(){var e,t={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},n=document.documentElement,i="onmouseenter"in n&&"onmouseleave"in n,o=function(e){return!1};function r(e,t){return e.which?e.which===t+1:e.button===t}window.attachEvent&&(o=window.addEventListener?function(e){return!(e instanceof window.Event)}:function(e){return!0});var s={0:1,1:4,2:2};function a(e,t){return e.button===s[t]}function l(e){var t=document.documentElement,n=document.body||{scrollLeft:0};return e.pageX||e.clientX+(t.scrollLeft||n.scrollLeft)-(t.clientLeft||0)}function c(e){var t=document.documentElement,n=document.body||{scrollTop:0};return e.pageY||e.clientY+(t.scrollTop||n.scrollTop)-(t.clientTop||0)}e=window.attachEvent?window.addEventListener?function(e,t){return o(e)?a(e,t):r(e,t)}:a:Prototype.Browser.WebKit?function(e,t){switch(t){case 0:return 1==e.which&&!e.metaKey;case 1:return 2==e.which||1==e.which&&e.metaKey;case 2:return 3==e.which;default:return!1}}:r,t.Methods={isLeftClick:function(t){return e(t,0)},isMiddleClick:function(t){return e(t,1)},isRightClick:function(t){return e(t,2)},element:function(e){var n=(e=t.extend(e)).target,i=e.type,o=e.currentTarget;return o&&o.tagName&&("load"===i||"error"===i||"click"===i&&"input"===o.tagName.toLowerCase()&&"radio"===o.type)&&(n=o),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),Element.extend(n)},findElement:function(e,n){var i=t.element(e);if(!n)return i;for(;i;){if(Object.isElement(i)&&Prototype.Selector.match(i,n))return Element.extend(i);i=i.parentNode}},pointer:function(e){return{x:l(e),y:c(e)}},pointerX:l,pointerY:c,stop:function(e){t.extend(e),e.preventDefault(),e.stopPropagation(),e.stopped=!0}};var u=Object.keys(t.Methods).inject({},function(e,n){return e[n]=t.Methods[n].methodize(),e});if(window.attachEvent){var d={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};t.extend=function(e,n){if(!e)return!1;if(!o(e))return e;if(e._extendedByPrototype)return e;e._extendedByPrototype=Prototype.emptyFunction;var i=t.pointer(e);return Object.extend(e,{target:e.srcElement||n,relatedTarget:function(e){var t;switch(e.type){case"mouseover":case"mouseenter":t=e.fromElement;break;case"mouseout":case"mouseleave":t=e.toElement;break;default:return null}return Element.extend(t)}(e),pageX:i.x,pageY:i.y}),Object.extend(e,u),Object.extend(e,d),e}}else t.extend=Prototype.K;window.addEventListener&&(t.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(t.prototype,u));var h=[];Prototype.Browser.IE&&window.attachEvent("onunload",function(){for(var e=0,n=h.length;e<n;e++)t.stopObserving(h[e]),h[e]=null}),Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,!1);var p=Prototype.K,f={mouseenter:"mouseover",mouseleave:"mouseout"};function m(e,n,o){var r=function(e,n,o){var r=Element.retrieve(e,"prototype_event_registry");Object.isUndefined(r)&&(h.push(e),r=Element.retrieve(e,"prototype_event_registry",$H()));var s,a=r.get(n);return Object.isUndefined(a)&&(a=[],r.set(n,a)),!a.pluck("handler").include(o)&&(n.include(":")?s=function(i){return!Object.isUndefined(i.eventName)&&i.eventName===n&&(t.extend(i,e),void o.call(e,i))}:i||"mouseenter"!==n&&"mouseleave"!==n?s=function(n){t.extend(n,e),o.call(e,n)}:"mouseenter"!==n&&"mouseleave"!==n||(s=function(n){t.extend(n,e);for(var i=n.relatedTarget;i&&i!==e;)try{i=i.parentNode}catch(t){i=e}i!==e&&o.call(e,n)}),s.handler=o,a.push(s),s)}(e=$(e),n,o);if(!r)return e;if(n.include(":"))e.addEventListener?e.addEventListener("dataavailable",r,!1):(e.attachEvent("ondataavailable",r),e.attachEvent("onlosecapture",r));else{var s=p(n);e.addEventListener?e.addEventListener(s,r,!1):e.attachEvent("on"+s,r)}return e}function g(e,t,n){e=$(e);var i=Element.retrieve(e,"prototype_event_registry");if(!i)return e;if(!t)return i.each(function(t){var n=t.key;g(e,n)}),e;var o=i.get(t);if(!o)return e;if(!n)return o.each(function(n){g(e,t,n.handler)}),e;for(var r,s=o.length;s--;)if(o[s].handler===n){r=o[s];break}if(!r)return e;if(t.include(":"))e.removeEventListener?e.removeEventListener("dataavailable",r,!1):(e.detachEvent("ondataavailable",r),e.detachEvent("onlosecapture",r));else{var a=p(t);e.removeEventListener?e.removeEventListener(a,r,!1):e.detachEvent("on"+a,r)}return i.set(t,o.without(r)),e}function v(e,n,i,o){var r;return e=$(e),Object.isUndefined(o)&&(o=!0),e==document&&document.createEvent&&!e.dispatchEvent&&(e=document.documentElement),document.createEvent?(r=document.createEvent("HTMLEvents")).initEvent("dataavailable",o,!0):(r=document.createEventObject()).eventType=o?"ondataavailable":"onlosecapture",r.eventName=n,r.memo=i||{},document.createEvent?e.dispatchEvent(r):e.fireEvent(r.eventType,r),t.extend(r)}function y(e,n,i,o){return e=$(e),Object.isFunction(i)&&Object.isUndefined(o)&&(o=i,i=null),new t.Handler(e,n,i,o).start()}i||(p=function(e){return f[e]||e}),t.Handler=Class.create({initialize:function(e,t,n,i){this.element=$(e),this.eventName=t,this.selector=n,this.callback=i,this.handler=this.handleEvent.bind(this)},start:function(){return t.observe(this.element,this.eventName,this.handler),this},stop:function(){return t.stopObserving(this.element,this.eventName,this.handler),this},handleEvent:function(e){var n=t.findElement(e,this.selector);n&&this.callback.call(this.element,e,n)}}),Object.extend(t,t.Methods),Object.extend(t,{fire:v,observe:m,stopObserving:g,on:y}),Element.addMethods({fire:v,observe:m,stopObserving:g,on:y}),Object.extend(document,{fire:v.methodize(),observe:m.methodize(),stopObserving:g.methodize(),on:y.methodize(),loaded:!1}),window.Event?Object.extend(window.Event,t):window.Event=t}(),function(){var e;function t(){document.loaded||(e&&window.clearTimeout(e),document.loaded=!0,document.fire("dom:loaded"))}document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):(document.observe("readystatechange",function e(){"complete"===document.readyState&&(document.stopObserving("readystatechange",e),t())}),window==top&&(e=function n(){try{document.documentElement.doScroll("left")}catch(t){return void(e=n.defer())}t()}.defer())),Event.observe(window,"load",t)}(),Element.addMethods(),Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(e,t){return Element.insert(e,{before:t})},Top:function(e,t){return Element.insert(e,{top:t})},Bottom:function(e,t){return Element.insert(e,{bottom:t})},After:function(e,t){return Element.insert(e,{after:t})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(e,t,n){return this.includeScrollOffsets?this.withinIncludingScrolloffsets(e,t,n):(this.xcomp=t,this.ycomp=n,this.offset=Element.cumulativeOffset(e),n>=this.offset[1]&&n<this.offset[1]+e.offsetHeight&&t>=this.offset[0]&&t<this.offset[0]+e.offsetWidth)},withinIncludingScrolloffsets:function(e,t,n){var i=Element.cumulativeScrollOffset(e);return this.xcomp=t+i[0]-this.deltaX,this.ycomp=n+i[1]-this.deltaY,this.offset=Element.cumulativeOffset(e),this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+e.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+e.offsetWidth},overlap:function(e,t){return e?"vertical"==e?(this.offset[1]+t.offsetHeight-this.ycomp)/t.offsetHeight:"horizontal"==e?(this.offset[0]+t.offsetWidth-this.xcomp)/t.offsetWidth:void 0:0},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(e){return Position.prepare(),Element.absolutize(e)},relativize:function(e){return Position.prepare(),Element.relativize(e)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(e,t,n){return n=n||{},Element.clonePosition(t,e,n)}};document.getElementsByClassName||(document.getElementsByClassName=function(e){function t(e){return e.blank()?null:"[contains(concat(' ', @class, ' '), ' "+e+" ')]"}return Element.Methods.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(e,n){n=n.toString().strip();var i=/\s/.test(n)?$w(n).map(t).join(""):t(n);return i?document._getElementsByXPath(".//*"+i,e):[]}:function(e,t){t=t.toString().strip();var n=[],i=/\s/.test(t)?$w(t):null;if(!i&&!t)return n;var o=$(e).getElementsByTagName("*");t=" "+t+" ";for(var r,s,a=0;r=o[a];a++)r.className&&(s=" "+r.className+" ")&&(s.include(t)||i&&i.all(function(e){return!e.toString().blank()&&s.include(" "+e+" ")}))&&n.push(Element.extend(r));return n},function(e,t){return $(t||document.body).getElementsByClassName(e)}}()),Element.ClassNames=Class.create(),Element.ClassNames.prototype={initialize:function(e){this.element=$(e)},_each:function(e){this.element.className.split(/\s+/).select(function(e){return e.length>0})._each(e)},set:function(e){this.element.className=e},add:function(e){this.include(e)||this.set($A(this).concat(e).join(" "))},remove:function(e){this.include(e)&&this.set($A(this).without(e).join(" "))},toString:function(){return $A(this).join(" ")}},Object.extend(Element.ClassNames.prototype,Enumerable),window.Selector=Class.create({initialize:function(e){this.expression=e.strip()},findElements:function(e){return Prototype.Selector.select(this.expression,e)},match:function(e){return Prototype.Selector.match(e,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}}),Object.extend(Selector,{matchElements:function(e,t){for(var n=Prototype.Selector.match,i=[],o=0,r=e.length;o<r;o++){var s=e[o];n(s,t)&&i.push(Element.extend(s))}return i},findElement:function(e,t,n){n=n||0;for(var i,o=0,r=0,s=e.length;r<s;r++)if(i=e[r],Prototype.Selector.match(i,t)&&n===o++)return Element.extend(i)},findChildElements:function(e,t){var n=t.toArray().join(", ");return Prototype.Selector.select(n,e||document)}});var Scriptaculous={Version:"1.8.1",require:function(e){document.write('<script type="text/javascript" src="'+e+'"><\/script>')},REQUIRED_PROTOTYPE:"1.6.0",load:function(){function e(e){var t=e.split(".");return 1e5*parseInt(t[0])+1e3*parseInt(t[1])+parseInt(t[2])}if(void 0===Prototype||"undefined"==typeof Element||void 0===Element.Methods||e(Prototype.Version)<e(Scriptaculous.REQUIRED_PROTOTYPE))throw"script.aculo.us requires the Prototype JavaScript framework >= "+Scriptaculous.REQUIRED_PROTOTYPE;$A(document.getElementsByTagName("script")).findAll(function(e){return e.src&&e.src.match(/scriptaculous\.js(\?.*)?$/)}).each(function(e){var t=e.src.replace(/scriptaculous\.js(\?.*)?$/,""),n=e.src.match(/\?.*load=([a-z,]*)/);(n?n[1]:"builder,effects,dragdrop,controls,slider,sound").split(",").each(function(e){Scriptaculous.require(t+e+".js?sversion=2")})})}};Scriptaculous.load(),String.prototype.parseColor=function(){var e="#";if("rgb("==this.slice(0,4))for(var t=this.slice(4,this.length-1).split(","),n=0;e+=parseInt(t[n]).toColorPart(),++n<3;);else if("#"==this.slice(0,1)){if(4==this.length)for(n=1;n<4;n++)e+=(this.charAt(n)+this.charAt(n)).toLowerCase();7==this.length&&(e=this.toLowerCase())}return 7==e.length?e:arguments[0]||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""}).flatten().join("")},Element.setContentZoom=function(e,t){return(e=$(e)).setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(e){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){return(e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4)>1?1:e},wobble:function(e){return-Math.cos(e*Math.PI*(9*e))/2+.5},pulse:function(e,t){return 0==(e%(1/(t=t||5))*t).round()?e*t*2-(e*t*2).floor():1-(e*t*2-(e*t*2).floor())},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)},none:function(e){return 0},full:function(e){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(e){var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),$A((e=$(e)).childNodes).each(function(n){3==n.nodeType&&(n.nodeValue.toArray().each(function(i){e.insertBefore(new Element("span",{style:t}).update(" "==i?String.fromCharCode(160):i),n)}),Element.remove(n))})},multiple:function(e,t){var n;n=("object"==typeof e||Object.isFunction(e))&&e.length?e:$(e).childNodes;var i=Object.extend({speed:.1,delay:0},arguments[2]||{}),o=i.delay;$A(n).each(function(e,n){new t(e,Object.extend(i,{delay:n*i.speed+o}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t){e=$(e),t=(t||"appear").toLowerCase();var n=Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},arguments[2]||{});Effect[e.visible()?Effect.PAIRS[t][1]:Effect.PAIRS[t][0]](e,n)}};if(Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime();switch(Object.isString(e.options.queue)?e.options.queue:e.options.queue.position){case"front":this.effects.findAll(function(e){return"idle"==e.state}).each(function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn});break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject(function(t){return t==e}),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var e=(new Date).getTime(),t=0,n=this.effects.length;t<n;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return Object.isString(e)?this.instances.get(e)||this.instances.set(e,new Effect.ScopedQueue):e}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(options){function codeForEvent(e,t){return(e[t+"Internal"]?"this.options."+t+"Internal(this);":"")+(e[t]?"this.options."+t+"(this);":"")}options&&!1===options.transition&&(options.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,eval('this.render = function(pos){ if (this.state=="idle"){this.state="running";'+codeForEvent(this.options,"beforeSetup")+(this.setup?"this.setup();":"")+codeForEvent(this.options,"afterSetup")+'};if (this.state=="running"){pos=this.options.transition(pos)*'+this.fromToDelta+"+"+this.options.from+";this.position=pos;"+codeForEvent(this.options,"beforeUpdate")+(this.update?"this.update(pos);":"")+codeForEvent(this.options,"afterUpdate")+"}}"),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn){if(e>=this.finishOn)return this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),void this.event("afterFinish");var t=(e-this.startOn)/this.totalTime,n=(t*this.totalFrames).round();n>this.currentFrame&&(this.render(t),this.currentFrame=n)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)Object.isFunction(this[property])||e.set(property,this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(e){this.effects=e||[],this.start(arguments[1])},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each(function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")})}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(e,t,n){e=Object.isString(e)?$(e):e;var i=$A(arguments),o=i.last(),r=5==i.length?i[3]:null;this.method=Object.isFunction(o)?o.bind(e):Object.isFunction(e[o])?e[o].bind(e):function(t){e[o]=t},this.start(Object.extend({from:t,to:n},r||{}))},update:function(e){this.method(e)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var t=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(t)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(e){this.element.setStyle({left:(this.options.x*e+this.originalLeft).round()+"px",top:(this.options.y*e+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(e,t,n){return new Effect.Move(e,Object.extend({x:n,y:t},arguments[3]||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var n=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},arguments[2]||{});this.start(n)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){e.indexOf(t)>0&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){var t=this.options.scaleFrom/100+this.factor*e;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*t+this.fontSizeType}),this.setDimensions(this.dims[0]*t,this.dims[1]*t)},finish:function(e){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var n={};if(this.options.scaleX&&(n.width=t.round()+"px"),this.options.scaleY&&(n.height=e.round()+"px"),this.options.scaleFromCenter){var i=(e-this.dims[0])/2,o=(t-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(n.top=this.originalTop-i+"px"),this.options.scaleX&&(n.left=this.originalLeft-o+"px")):(this.options.scaleY&&(n.top=-i+"px"),this.options.scaleX&&(n.left=-o+"px"))}this.element.setStyle(n)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(t)},setup:function(){"none"!=this.element.getStyle("display")?(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(2*e+1,2*e+3),16)}.bind(this)),this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(2*e+1,2*e+3),16)-this._base[e]}.bind(this))):this.cancel()},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,n,i){return t+(this._base[i]+this._delta[i]*e).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(e){var t=arguments[1]||{},n=document.viewport.getScrollOffsets(),i=$(e).cumulativeOffset(),o=(window.height||document.body.scrollHeight)-document.viewport.getHeight();return t.offset&&(i[1]+=t.offset),new Effect.Tween(null,n.top,i[1]>o?o:i[1],t,function(e){scrollTo(n.left,e.round())})},Effect.Fade=function(e){var t=(e=$(e)).getInlineOpacity(),n=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){0==e.options.to&&e.element.hide().setStyle({opacity:t})}},arguments[1]||{});return new Effect.Opacity(e,n)},Effect.Appear=function(e){e=$(e);var t=Object.extend({from:"none"==e.getStyle("display")?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},arguments[1]||{});return new Effect.Opacity(e,t)},Effect.Puff=function(e){var t={opacity:(e=$(e)).getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(t)}},arguments[1]||{}))},Effect.BlindUp=function(e){return(e=$(e)).makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(e){var t=(e=$(e)).getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:t.height,originalWidth:t.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(e){var t=(e=$(e)).getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:t})}})}},arguments[1]||{}))},Effect.DropOut=function(e){var t={top:(e=$(e)).getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(t)}},arguments[1]||{}))},Effect.Shake=function(e){e=$(e);var t=Object.extend({distance:20,duration:.5},arguments[1]||{}),n=parseFloat(t.distance),i=parseFloat(t.duration)/10,o={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:n,y:0,duration:i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-n,y:0,duration:i,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(o)}})}})}})}})}})}})},Effect.SlideDown=function(e){var t=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),n=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.SlideUp=function(e){var t=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),n=e.getDimensions();return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e){e=$(e);var t,n,i,o,r=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),s={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},a=e.getDimensions();switch(r.direction){case"top-left":t=n=i=o=0;break;case"top-right":t=a.width,n=o=0,i=-a.width;break;case"bottom-left":t=i=0,n=a.height,o=-a.height;break;case"bottom-right":t=a.width,n=a.height,i=-a.width,o=-a.height;break;case"center":t=a.width/2,n=a.height/2,i=-a.width/2,o=-a.height/2}return new Effect.Move(e,{x:t,y:n,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:r.opacityTransition}),new Effect.Move(e.element,{x:i,y:o,sync:!0,transition:r.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:a.height,originalWidth:a.width},sync:!0,scaleFrom:window.opera?1:0,transition:r.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(s)}},r))}})},Effect.Shrink=function(e){e=$(e);var t,n,i=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),o={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},r=e.getDimensions();switch(i.direction){case"top-left":t=n=0;break;case"top-right":t=r.width,n=0;break;case"bottom-left":t=0,n=r.height;break;case"bottom-right":t=r.width,n=r.height;break;case"center":t=r.width/2,n=r.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:i.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:i.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:t,y:n,sync:!0,transition:i.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(o)}},i))},Effect.Pulsate=function(e){e=$(e);var t=arguments[1]||{},n=e.getInlineOpacity(),i=t.transition||Effect.Transitions.sinoidal,o=function(e){return i(1-Effect.Transitions.pulse(e,t.pulses))};return o.bind(i),new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:n})}},t),{transition:o}))},Effect.Fold=function(e){var t={top:(e=$(e)).style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(n){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(t)}})}},arguments[1]||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({style:{}},arguments[1]||{});if(Object.isString(t.style))if(t.style.include(":"))this.style=t.style.parseStyle();else{this.element.addClassName(t.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(t.style);var n=this.element.getStyles();this.style=this.style.reject(function(e){return e.value==n[e.key]}),t.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each(function(t){e.element.style[t.style]=""})}}else this.style=$H(t.style);this.start(t)},setup:function(){function e(e){return e&&!["rgba(0, 0, 0, 0)","transparent"].include(e)||(e="#ffffff"),e=e.parseColor(),$R(0,2).map(function(t){return parseInt(e.slice(2*t+1,2*t+3),16)})}this.transforms=this.style.map(function(t){var n=t[0],i=t[1],o=null;if("#zzzzzz"!=i.parseColor("#zzzzzz"))i=i.parseColor(),o="color";else if("opacity"==n)i=parseFloat(i),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(i)){var r=i.match(/^([\+\-]?[0-9\.]+)(.*)$/);i=parseFloat(r[1]),o=3==r.length?r[2]:null}var s=this.element.getStyle(n);return{style:n.camelize(),originalValue:"color"==o?e(s):parseFloat(s||0),targetValue:"color"==o?e(i):i,unit:o}}.bind(this)).reject(function(e){return e.originalValue==e.targetValue||"color"!=e.unit&&(isNaN(e.originalValue)||isNaN(e.targetValue))})},update:function(e){for(var t,n={},i=this.transforms.length;i--;)n[(t=this.transforms[i]).style]="color"==t.unit?"#"+Math.round(t.originalValue[0]+(t.targetValue[0]-t.originalValue[0])*e).toColorPart()+Math.round(t.originalValue[1]+(t.targetValue[1]-t.originalValue[1])*e).toColorPart()+Math.round(t.originalValue[2]+(t.targetValue[2]-t.originalValue[2])*e).toColorPart():(t.originalValue+(t.targetValue-t.originalValue)*e).toFixed(3)+(null===t.unit?"":t.unit);this.element.setStyle(n,!0)}}),Effect.Transform=Class.create({initialize:function(e){this.tracks=[],this.options=arguments[1]||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){var t=(e=$H(e)).values().first();this.tracks.push($H({ids:e.keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(e){var t=e.get("ids"),n=e.get("effect"),i=e.get("options");return[$(t)||$$(t)].flatten().map(function(e){return new n(e,Object.extend({sync:!0},i))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var e,t=$H();return Prototype.Browser.WebKit?e=new Element("div",{style:this}).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',e=String.__parseStyleElement.childNodes[0].style),Element.CSS_PROPERTIES.each(function(n){e[n]&&t.set(n,e[n])}),Prototype.Browser.IE&&this.include("opacity")&&t.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),t},document.defaultView&&document.defaultView.getComputedStyle?Element.getStyles=function(e){var t=document.defaultView.getComputedStyle($(e),null);return Element.CSS_PROPERTIES.inject({},function(e,n){return e[n]=t[n],e})}:Element.getStyles=function(e){var t,n=(e=$(e)).currentStyle;return(t=Element.CSS_PROPERTIES.inject({},function(e,t){return e[t]=n[t],e})).opacity||(t.opacity=e.getOpacity()),t},Effect.Methods={morph:function(e,t){return e=$(e),new Effect.Morph(e,Object.extend({style:t},arguments[2]||{})),e},visualEffect:function(e,t,n){e=$(e);var i=t.dasherize().camelize(),o=i.charAt(0).toUpperCase()+i.substring(1);return new Effect[o](e,n),e},highlight:function(e,t){return e=$(e),new Effect.Highlight(e,t),e}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(e){Effect.Methods[e]=function(t,n){return t=$(t),Effect[e.charAt(0).toUpperCase()+e.substring(1)](t,n),t}}),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(e){Effect.Methods[e]=Element[e]}),Element.addMethods(Effect.Methods),void 0===Effect)throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};if(Autocompleter.Base=Class.create({baseInitialize:function(e,t,n){e=$(e),this.element=e,this.update=$(t),this.hasFocus=!1,this.changed=!1,this.active=!1,this.index=0,this.entryCount=0,this.oldElementValue=this.element.value,this.setOptions?this.setOptions(n):this.options=n||{};var i=!0;void 0!==this.options.setWidth&&(i=this.options.setWidth),this.options.paramName=this.options.paramName||this.element.name,this.options.tokens=this.options.tokens||[],this.options.frequency=this.options.frequency||.4,this.options.minChars=this.options.minChars||1,this.options.onShow=this.options.onShow||function(e,t){t.style.position&&"absolute"!=t.style.position||(t.style.position="absolute",Position.clone(e,t,{setHeight:!1,setWidth:i,offsetTop:e.offsetHeight})),Effect.Appear(t,{duration:.15})},this.options.onHide=this.options.onHide||function(e,t){new Effect.Fade(t,{duration:.15})},"string"==typeof this.options.tokens&&(this.options.tokens=new Array(this.options.tokens)),this.options.tokens.include("\n")||this.options.tokens.push("\n"),this.observer=null,this.element.setAttribute("autocomplete","off"),Element.hide(this.update),Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this)),Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){"none"==Element.getStyle(this.update,"display")&&this.options.onShow(this.element,this.update),!this.iefix&&Prototype.Browser.IE&&"absolute"==Element.getStyle(this.update,"position")&&(new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>'),this.iefix=$(this.update.id+"_iefix")),this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height}),this.iefix.style.zIndex=1,this.update.style.zIndex=2,Element.show(this.iefix)},hide:function(){this.stopIndicator(),"none"!=Element.getStyle(this.update,"display")&&this.options.onHide(this.element,this.update),this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&Element.show(this.options.indicator)},stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(e){if(this.active)switch(e.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry(),Event.stop(e);case Event.KEY_ESC:return this.hide(),this.active=!1,void Event.stop(e);case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:return this.markPrevious(),this.render(),void Event.stop(e);case Event.KEY_DOWN:return this.markNext(),this.render(),void Event.stop(e)}else if(e.keyCode==Event.KEY_TAB||e.keyCode==Event.KEY_RETURN||Prototype.Browser.WebKit>0&&0==e.keyCode)return;this.changed=!0,this.hasFocus=!0,this.observer&&clearTimeout(this.observer),this.observer=setTimeout(this.onObserverEvent.bind(this),1e3*this.options.frequency)},activate:function(){this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices()},onHover:function(e){var t=Event.findElement(e,"LI");this.index!=t.autocompleteIndex&&(this.index=t.autocompleteIndex,this.render()),Event.stop(e)},onClick:function(e){var t=Event.findElement(e,"LI");this.index=t.autocompleteIndex,this.selectEntry(),this.hide()},onBlur:function(e){setTimeout(this.hide.bind(this),250),this.hasFocus=!1,this.active=!1},render:function(){if(this.entryCount>0){for(var e=0;e<this.entryCount;e++)this.index==e?Element.addClassName(this.getEntry(e),"selected"):Element.removeClassName(this.getEntry(e),"selected");this.hasFocus&&(this.show(),this.active=!0)}else this.active=!1,this.hide()},markPrevious:function(){this.index>0?this.index--:this.index=this.entryCount-1},markNext:function(){this.index<this.entryCount-1?this.index++:this.index=0},getEntry:function(e){return e>=0&&e<=this.entryCount?this.update.firstChild.childNodes[e]:null},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=!1,this.updateElement(this.getCurrentEntry())},updateElement:function(e){if(this.options.updateElement)this.options.updateElement(e);else{if(e){var t="";if(this.options.select){var n=$(e).select("."+this.options.select)||[];n.length>0&&(t=Element.collectTextNodes(n[0],this.options.select))}else t=Element.collectTextNodesIgnoreClass(e,"informal");var i=this.getTokenBounds();if(-1!=i[0]){var o=this.element.value.substr(0,i[0]),r=this.element.value.substr(i[0]).match(/^\s+/);r&&(o+=r[0]),this.element.value=o+t+this.element.value.substr(i[1])}else this.element.value=t;this.oldElementValue=this.element.value,this.element.focus()}this.options.afterUpdateElement&&this.options.afterUpdateElement(this.element,e)}},updateChoices:function(e){if(!this.changed&&this.hasFocus){if(this.update.innerHTML=e,Element.cleanWhitespace(this.update),Element.cleanWhitespace(this.update.down()),this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(var t=0;t<this.entryCount;t++){var n=this.getEntry(t);n.autocompleteIndex=t,this.addObservers(n)}}else this.entryCount=0;this.stopIndicator(),this.index=this.options.allowFreeEntry?-1:0,1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}},addObservers:function(e){Event.observe(e,"mouseover",this.onHover.bindAsEventListener(this)),Event.observe(e,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=!1,this.tokenBounds=null,this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide()),this.oldElementValue=this.element.value},getToken:function(){var e=this.getTokenBounds();return this.element.value.substring(e[0],e[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var e=this.element.value;if(e.strip().empty())return[-1,0];for(var t,n=arguments.callee.getFirstDifferencePos(e,this.oldElementValue),i=n==this.oldElementValue.length?1:0,o=-1,r=e.length,s=0,a=this.options.tokens.length;s<a;++s)(t=e.lastIndexOf(this.options.tokens[s],n+i-1))>o&&(o=t),-1!=(t=e.indexOf(this.options.tokens[s],n+i))&&t<r&&(r=t);return this.tokenBounds=[o+1,r]}}),Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;++i)if(e[i]!=t[i])return i;return n},Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(e,t,n,i){this.baseInitialize(e,t,i),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=n},getUpdatedChoices:function(){this.startIndicator();var e=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,e):e,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options)},onComplete:function(e){this.updateChoices(e.responseText)}}),Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(e,t,n,i){this.baseInitialize(e,t,i),this.options.array=n},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(e){this.options=Object.extend({choices:10,partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(e){for(var t=[],n=[],i=e.getToken(),o=0;o<e.options.array.length&&t.length<e.options.choices;o++)for(var r=e.options.array[o],s=e.options.ignoreCase?r.toLowerCase().indexOf(i.toLowerCase()):r.indexOf(i);-1!=s;){if(0==s&&r.length!=i.length){t.push("<li><strong>"+r.substr(0,i.length)+"</strong>"+r.substr(i.length)+"</li>");break}if(i.length>=e.options.partialChars&&e.options.partialSearch&&-1!=s&&(e.options.fullSearch||/\s/.test(r.substr(s-1,1)))){n.push("<li>"+r.substr(0,s)+"<strong>"+r.substr(s,i.length)+"</strong>"+r.substr(s+i.length)+"</li>");break}s=e.options.ignoreCase?r.toLowerCase().indexOf(i.toLowerCase(),s+1):r.indexOf(i,s+1)}return n.length&&(t=t.concat(n.slice(0,e.options.choices-t.length))),"<ul>"+t.join("")+"</ul>"}},e||{})}}),Field.scrollFreeActivate=function(e){setTimeout(function(){Field.activate(e)},1)},Ajax.InPlaceEditor=Class.create({initialize:function(e,t,n){this.url=t,this.element=e=$(e),this.prepareOptions(),this._controls={},arguments.callee.dealWithDeprecatedOptions(n),Object.extend(this.options,n||{}),!this.options.formId&&this.element.id&&(this.options.formId=this.element.id+"-inplaceeditor",$(this.options.formId)&&(this.options.formId="")),this.options.externalControl&&(this.options.externalControl=$(this.options.externalControl)),this.options.externalControl||(this.options.externalControlOnly=!1),this._originalBackground=this.element.getStyle("background-color")||"transparent",this.element.title=this.options.clickToEditText,this._boundCancelHandler=this.handleFormCancellation.bind(this),this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this),this._boundFailureHandler=this.handleAJAXFailure.bind(this),this._boundSubmitHandler=this.handleFormSubmission.bind(this),this._boundWrapperHandler=this.wrapUp.bind(this),this.registerListeners()},checkForEscapeOrReturn:function(e){!this._editing||e.ctrlKey||e.altKey||e.shiftKey||(Event.KEY_ESC==e.keyCode?this.handleFormCancellation(e):Event.KEY_RETURN==e.keyCode&&this.handleFormSubmission(e))},createControl:function(e,t,n){var i=this.options[e+"Control"],o=this.options[e+"Text"];if("button"==i){var r=document.createElement("input");r.type="submit",r.value=o,r.className="editor_"+e+"_button","cancel"==e&&(r.onclick=this._boundCancelHandler),this._form.appendChild(r),this._controls[e]=r}else if("link"==i){var s=document.createElement("a");s.href="#",s.appendChild(document.createTextNode(o)),s.onclick="cancel"==e?this._boundCancelHandler:this._boundSubmitHandler,s.className="editor_"+e+"_link",n&&(s.className+=" "+n),this._form.appendChild(s),this._controls[e]=s}},createEditField:function(){var e,t=this.options.loadTextURL?this.options.loadingText:this.getText();if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){(e=document.createElement("input")).type="text";var n=this.options.size||this.options.cols||0;0<n&&(e.size=n)}else(e=document.createElement("textarea")).rows=1>=this.options.rows?this.options.autoRows:this.options.rows,e.cols=this.options.cols||40;e.name=this.options.paramName,e.value=t,e.className="editor_field",this.options.submitOnBlur&&(e.onblur=this._boundSubmitHandler),this._controls.editor=e,this.options.loadTextURL&&this.loadExternalText(),this._form.appendChild(this._controls.editor)},createForm:function(){var e=this;function t(t,n){var i=e.options["text"+t+"Controls"];i&&!1!==n&&e._form.appendChild(document.createTextNode(i))}this._form=$(document.createElement("form")),this._form.id=this.options.formId,this._form.addClassName(this.options.formClassName),this._form.onsubmit=this._boundSubmitHandler,this.createEditField(),"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br")),this.options.onFormCustomization&&this.options.onFormCustomization(this,this._form),t("Before",this.options.okControl||this.options.cancelControl),this.createControl("ok",this._boundSubmitHandler),t("Between",this.options.okControl&&this.options.cancelControl),this.createControl("cancel",this._boundCancelHandler,"editor_cancel"),t("After",this.options.okControl||this.options.cancelControl)},destroy:function(){this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML),this.leaveEditMode(),this.unregisterListeners()},enterEditMode:function(e){this._saving||this._editing||(this._editing=!0,this.triggerCallback("onEnterEditMode"),this.options.externalControl&&this.options.externalControl.hide(),this.element.hide(),this.createForm(),this.element.parentNode.insertBefore(this._form,this.element),this.options.loadTextURL||this.postProcessEditField(),e&&Event.stop(e))},enterHover:function(e){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML},handleAJAXFailure:function(e){this.triggerCallback("onFailure",e),this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML,this._oldInnerHTML=null)},handleFormCancellation:function(e){this.wrapUp(),e&&Event.stop(e)},handleFormSubmission:function(e){var t=this._form,n=$F(this._controls.editor);this.prepareSubmission();var i=this.options.callback(t,n)||"";if(Object.isString(i)&&(i=i.toQueryParams()),i.editorId=this.element.id,this.options.htmlResponse){var o=Object.extend({evalScripts:!0},this.options.ajaxOptions);Object.extend(o,{parameters:i,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Updater({success:this.element},this.url,o)}else{o=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(o,{parameters:i,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Request(this.url,o)}e&&Event.stop(e)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName),this.removeForm(),this.leaveHover(),this.element.style.backgroundColor=this._originalBackground,this.element.show(),this.options.externalControl&&this.options.externalControl.show(),this._saving=!1,this._editing=!1,this._oldInnerHTML=null,this.triggerCallback("onLeaveEditMode")},leaveHover:function(e){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName),this._controls.editor.disabled=!0;var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._form.removeClassName(this.options.loadingClassName);var t=e.responseText;this.options.stripLoadedTextTags&&(t=t.stripTags()),this._controls.editor.value=t,this._controls.editor.disabled=!1,this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler}),new Ajax.Request(this.options.loadTextURL,e)},postProcessEditField:function(){var e=this.options.fieldPostCreation;e&&$(this._controls.editor)["focus"==e?"focus":"activate"]()},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions),Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks),[this._extraDefaultOptions].flatten().compact().each(function(e){Object.extend(this.options,e)}.bind(this))},prepareSubmission:function(){this._saving=!0,this.removeForm(),this.leaveHover(),this.showSaving()},registerListeners:function(){var e;this._listeners={},$H(Ajax.InPlaceEditor.Listeners).each(function(t){e=this[t.value].bind(this),this._listeners[t.key]=e,this.options.externalControlOnly||this.element.observe(t.key,e),this.options.externalControl&&this.options.externalControl.observe(t.key,e)}.bind(this))},removeForm:function(){this._form&&(this._form.remove(),this._form=null,this._controls={})},showSaving:function(){this._oldInnerHTML=this.element.innerHTML,this.element.innerHTML=this.options.savingText,this.element.addClassName(this.options.savingClassName),this.element.style.backgroundColor=this._originalBackground,this.element.show()},triggerCallback:function(e,t){"function"==typeof this.options[e]&&this.options[e](this,t)},unregisterListeners:function(){$H(this._listeners).each(function(e){this.options.externalControlOnly||this.element.stopObserving(e.key,e.value),this.options.externalControl&&this.options.externalControl.stopObserving(e.key,e.value)}.bind(this))},wrapUp:function(e){this.leaveEditMode(),this._boundComplete(e,this.element)}}),Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy}),Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function(e,t,n,i){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions,e(t,n,i)},createEditField:function(){var e=document.createElement("select");e.name=this.options.paramName,e.size=1,this._controls.editor=e,this._collection=this.options.collection||[],this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText(),this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName),this.showLoadingText(this.options.loadingCollectionText);var options=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(options,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(transport){var js=transport.responseText.strip();if(!/^\[.*\]$/.test(js))throw"Server returned an invalid collection representation.";this._collection=eval(js),this.checkForExternalText()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadCollectionURL,options)},showLoadingText:function(e){this._controls.editor.disabled=!0;var t=this._controls.editor.firstChild;t||((t=document.createElement("option")).value="",this._controls.editor.appendChild(t),t.selected=!0),t.update((e||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText(),this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._text=e.responseText.strip(),this.buildOptionList()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadTextURL,e)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName),this._collection=this._collection.map(function(e){return 2===e.length?e:[e,e].flatten()});var e,t="value"in this.options?this.options.value:this._text,n=this._collection.any(function(e){return e[0]==t}.bind(this));this._controls.editor.update(""),this._collection.each(function(i,o){(e=document.createElement("option")).value=i[0],e.selected=n?i[0]==t:0==o,e.appendChild(document.createTextNode(i[1])),this._controls.editor.appendChild(e)}.bind(this)),this._controls.editor.disabled=!1,Field.scrollFreeActivate(this._controls.editor)}}),Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(e){function t(t,n){t in e||void 0===n||(e[t]=n)}e&&(t("cancelControl",e.cancelLink?"link":e.cancelButton?"button":e.cancelLink==e.cancelButton!=0&&void 0),t("okControl",e.okLink?"link":e.okButton?"button":e.okLink==e.okButton!=0&&void 0),t("highlightColor",e.highlightcolor),t("highlightEndColor",e.highlightendcolor))},Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:!1,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:!0,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",savingText:"Saving...",size:0,stripLoadedTextTags:!1,submitOnBlur:!1,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(e){return Form.serialize(e)},onComplete:function(e,t){new Effect.Highlight(t,{startcolor:this.options.highlightColor,keepBackgroundImage:!0})},onEnterEditMode:null,onEnterHover:function(e){e.element.style.backgroundColor=e.options.highlightColor,e._effect&&e._effect.cancel()},onFailure:function(e,t){alert("Error communication with the server: "+e.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(e){e._effect=new Effect.Highlight(e.element,{startcolor:e.options.highlightColor,endcolor:e.options.highlightEndColor,restorecolor:e._originalBackground,keepBackgroundImage:!0})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}}),Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."},Form.Element.DelayedObserver=Class.create({initialize:function(e,t,n){this.delay=t||.5,this.element=$(e),this.callback=n,this.timer=null,this.lastValue=$F(this.element),Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(e){this.lastValue!=$F(this.element)&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onTimerEvent.bind(this),1e3*this.delay),this.lastValue=$F(this.element))},onTimerEvent:function(){this.timer=null,this.callback(this.element,$F(this.element))}}),!Control)var Control={};if(Control.Slider=Class.create({initialize:function(e,t,n){var i=this;Object.isArray(e)?this.handles=e.collect(function(e){return $(e)}):this.handles=[$(e)],this.track=$(t),this.options=n||{},this.axis=this.options.axis||"horizontal",this.increment=this.options.increment||1,this.step=parseInt(this.options.step||"1"),this.range=this.options.range||$R(0,1),this.value=0,this.values=this.handles.map(function(){return 0}),this.spans=!!this.options.spans&&this.options.spans.map(function(e){return $(e)}),this.options.startSpan=$(this.options.startSpan||null),this.options.endSpan=$(this.options.endSpan||null),this.restricted=this.options.restricted||!1,this.maximum=this.options.maximum||this.range.end,this.minimum=this.options.minimum||this.range.start,this.alignX=parseInt(this.options.alignX||"0"),this.alignY=parseInt(this.options.alignY||"0"),this.trackLength=this.maximumOffset()-this.minimumOffset(),this.handleLength=this.isVertical()?0!=this.handles[0].offsetHeight?this.handles[0].offsetHeight:this.handles[0].style.height.replace(/px$/,""):0!=this.handles[0].offsetWidth?this.handles[0].offsetWidth:this.handles[0].style.width.replace(/px$/,""),this.active=!1,this.dragging=!1,this.disabled=!1,this.options.disabled&&this.setDisabled(),this.allowedValues=!!this.options.values&&this.options.values.sortBy(Prototype.K),this.allowedValues&&(this.minimum=this.allowedValues.min(),this.maximum=this.allowedValues.max()),this.eventMouseDown=this.startDrag.bindAsEventListener(this),this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.update.bindAsEventListener(this),this.handles.each(function(e,t){t=i.handles.length-1-t,i.setValue(parseFloat((Object.isArray(i.options.sliderValue)?i.options.sliderValue[t]:i.options.sliderValue)||i.range.start),t),e.makePositioned().observe("mousedown",i.eventMouseDown)}),this.track.observe("mousedown",this.eventMouseDown),document.observe("mouseup",this.eventMouseUp),document.observe("mousemove",this.eventMouseMove),this.initialized=!0},dispose:function(){var e=this;Event.stopObserving(this.track,"mousedown",this.eventMouseDown),Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),this.handles.each(function(t){Event.stopObserving(t,"mousedown",e.eventMouseDown)})},setDisabled:function(){this.disabled=!0},setEnabled:function(){this.disabled=!1},getNearestValue:function(e){if(this.allowedValues){if(e>=this.allowedValues.max())return this.allowedValues.max();if(e<=this.allowedValues.min())return this.allowedValues.min();var t=Math.abs(this.allowedValues[0]-e),n=this.allowedValues[0];return this.allowedValues.each(function(i){var o=Math.abs(i-e);o<=t&&(n=i,t=o)}),n}return e>this.range.end?this.range.end:e<this.range.start?this.range.start:e},setValue:function(e,t){this.active||(this.activeHandleIdx=t||0,this.activeHandle=this.handles[this.activeHandleIdx],this.updateStyles()),t=t||this.activeHandleIdx||0,this.initialized&&this.restricted&&(t>0&&e<this.values[t-1]&&(e=this.values[t-1]),t<this.handles.length-1&&e>this.values[t+1]&&(e=this.values[t+1])),e=this.getNearestValue(e),this.values[t]=e,this.value=this.values[0],this.handles[t].style[this.isVertical()?"top":"left"]=this.translateToPx(e),this.drawSpans(),this.dragging&&this.event||this.updateFinished()},setValueBy:function(e,t){this.setValue(this.values[t||this.activeHandleIdx||0]+e,t||this.activeHandleIdx||0)},translateToPx:function(e){return Math.round((this.trackLength-this.handleLength)/(this.range.end-this.range.start)*(e-this.range.start))+"px"},translateToValue:function(e){return e/(this.trackLength-this.handleLength)*(this.range.end-this.range.start)+this.range.start},getRange:function(e){var t=this.values.sortBy(Prototype.K);return $R(t[e=e||0],t[e+1])},minimumOffset:function(){return this.isVertical()?this.alignY:this.alignX},maximumOffset:function(){return this.isVertical()?(0!=this.track.offsetHeight?this.track.offsetHeight:this.track.style.height.replace(/px$/,""))-this.alignY:(0!=this.track.offsetWidth?this.track.offsetWidth:this.track.style.width.replace(/px$/,""))-this.alignX},isVertical:function(){return"vertical"==this.axis},drawSpans:function(){var e=this;this.spans&&$R(0,this.spans.length-1).each(function(t){e.setSpan(e.spans[t],e.getRange(t))}),this.options.startSpan&&this.setSpan(this.options.startSpan,$R(0,this.values.length>1?this.getRange(0).min():this.value)),this.options.endSpan&&this.setSpan(this.options.endSpan,$R(this.values.length>1?this.getRange(this.spans.length-1).max():this.value,this.maximum))},setSpan:function(e,t){this.isVertical()?(e.style.top=this.translateToPx(t.start),e.style.height=this.translateToPx(t.end-t.start+this.range.start)):(e.style.left=this.translateToPx(t.start),e.style.width=this.translateToPx(t.end-t.start+this.range.start))},updateStyles:function(){this.handles.each(function(e){Element.removeClassName(e,"selected")}),Element.addClassName(this.activeHandle,"selected")},startDrag:function(e){if(Event.isLeftClick(e)){if(!this.disabled){this.active=!0;var t=Event.element(e),n=1/(document.body.style.zoom||1),i=[Event.pointerX(e)*n,Event.pointerY(e)*n];if(t==this.track){var o=Position.cumulativeOffset(this.track);this.event=e,this.setValue(this.translateToValue((this.isVertical()?i[1]-o[1]:i[0]-o[0])-this.handleLength/2));o=Position.cumulativeOffset(this.activeHandle);this.offsetX=i[0]-o[0],this.offsetY=i[1]-o[1]}else{for(;-1==this.handles.indexOf(t)&&t.parentNode;)t=t.parentNode;if(-1!=this.handles.indexOf(t)){this.activeHandle=t,this.activeHandleIdx=this.handles.indexOf(this.activeHandle),this.updateStyles();o=Position.cumulativeOffset(this.activeHandle);this.offsetX=i[0]-o[0],this.offsetY=i[1]-o[1]}}}Event.stop(e)}},update:function(e){this.active&&(this.dragging||(this.dragging=!0),this.draw(e),Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(e))},draw:function(e){var t=1/(document.body.style.zoom||1),n=[Event.pointerX(e)*t,Event.pointerY(e)*t],i=Position.cumulativeOffset(this.track);n[0]-=this.offsetX+i[0],n[1]-=this.offsetY+i[1],this.event=e,this.setValue(this.translateToValue(this.isVertical()?n[1]:n[0])),this.initialized&&this.options.onSlide&&this.options.onSlide(this.values.length>1?this.values:this.value,this)},endDrag:function(e){this.active&&this.dragging&&(this.finishDrag(e,!0),Event.stop(e)),this.active=!1,this.dragging=!1},finishDrag:function(e,t){this.active=!1,this.dragging=!1,this.updateFinished()},updateFinished:function(){this.initialized&&this.options.onChange&&this.options.onChange(this.values.length>1?this.values:this.value,this),this.event=null}}),Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";var Droppables={drops:[],remove:function(e){this.drops=this.drops.reject(function(t){return t.element==$(e)})},add:function(e){e=$(e);var t=Object.extend({greedy:!0,hoverclass:null,tree:!1},arguments[1]||{});if(t.containment){t._containers=[];var n=t.containment;Object.isArray(n)?n.each(function(e){t._containers.push($(e))}):t._containers.push($(n))}t.accept&&(t.accept=[t.accept].flatten()),Element.makePositioned(e),t.element=e,this.drops.push(t)},findDeepestChild:function(e){for(deepest=e[0],i=1;i<e.length;++i)Element.isParent(e[i].element,deepest.element)&&(deepest=e[i]);return deepest},isContained:function(e,t){var n;return n=t.tree?e.treeNode:e.parentNode,t._containers.detect(function(e){return n==e})},isAffected:function(e,t,n){return n.element!=t&&(!n._containers||this.isContained(t,n))&&(!n.accept||Element.classNames(t).detect(function(e){return n.accept.include(e)}))&&Position.within(n.element,e[0],e[1])},deactivate:function(e){e.hoverclass&&Element.removeClassName(e.element,e.hoverclass),this.last_active=null},activate:function(e){e.hoverclass&&Element.addClassName(e.element,e.hoverclass),this.last_active=e},show:function(e,t){if(this.drops.length){var n,i=[];this.drops.each(function(n){Droppables.isAffected(e,t,n)&&i.push(n)}),i.length>0&&(n=Droppables.findDeepestChild(i)),this.last_active&&this.last_active!=n&&this.deactivate(this.last_active),n&&(Position.within(n.element,e[0],e[1]),n.onHover&&n.onHover(t,n.element,Position.overlap(n.overlap,n.element)),n!=this.last_active&&Droppables.activate(n))}},fire:function(e,t){if(this.last_active){Position.prepare();var n=1/(document.body.style.zoom||1);return this.isAffected([Event.pointerX(e)*n,Event.pointerY(e)*n],t,this.last_active)&&this.last_active.onDrop?(this.last_active.onDrop(t,this.last_active.element,e),!0):void 0}},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(e){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"keypress",this.eventKeypress)),this.drags.push(e)},unregister:function(e){this.drags=this.drags.reject(function(t){return t==e}),0==this.drags.length&&(Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(e){e.options.delay?this._timeout=setTimeout(function(){Draggables._timeout=null,window.focus(),Draggables.activeDraggable=e}.bind(this),e.options.delay):(window.focus(),this.activeDraggable=e)},deactivate:function(){this.activeDraggable=null},updateDrag:function(e){if(this.activeDraggable){var t=1/(document.body.style.zoom||1),n=[Event.pointerX(e)*t,Event.pointerY(e)*t];this._lastPointer&&this._lastPointer.inspect()==n.inspect()||(this._lastPointer=n,this.activeDraggable.updateDrag(e,n))}},endDrag:function(e){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.activeDraggable&&(this._lastPointer=null,this.activeDraggable.endDrag(e),this.activeDraggable=null)},keyPress:function(e){this.activeDraggable&&this.activeDraggable.keyPress(e)},addObserver:function(e){this.observers.push(e),this._cacheObserverCallbacks()},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t.element==e}),this._cacheObserverCallbacks()},notify:function(e,t,n){this[e+"Count"]>0&&this.observers.each(function(i){i[e]&&i[e](e,t,n)}),t.options[e]&&t.options[e](t,n)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(e){Draggables[e+"Count"]=Draggables.observers.select(function(t){return t[e]}).length})}},Draggable=Class.create({initialize:function(e){var t={handle:!1,reverteffect:function(e,t,n){var i=.02*Math.sqrt(Math.abs(2^t)+Math.abs(2^n));new Effect.Move(e,{x:-n,y:-t,duration:i,queue:{scope:"_draggable",position:"end"}})},endeffect:function(e){var t=Object.isNumber(e._opacity)?e._opacity:1;new Effect.Opacity(e,{duration:.2,from:.7,to:t,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[e]=!1}})},zindex:1e3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};arguments[1]&&!Object.isUndefined(arguments[1].endeffect)||Object.extend(t,{starteffect:function(e){e._opacity=Element.getOpacity(e),Draggable._dragging[e]=!0,new Effect.Opacity(e,{duration:.2,from:e._opacity,to:.7})}});var n=Object.extend(t,arguments[1]||{});this.element=$(e),n.handle&&Object.isString(n.handle)&&(this.handle=this.element.down("."+n.handle,0)),this.handle||(this.handle=$(n.handle)),this.handle||(this.handle=this.element),!n.scroll||n.scroll.scrollTo||n.scroll.outerHTML||(n.scroll=$(n.scroll),this._isScrollChild=Element.childOf(this.element,n.scroll)),Element.makePositioned(this.element),this.options=n,this.dragging=!1,this.eventMouseDown=this.initDrag.bindAsEventListener(this),Event.observe(this.handle,"mousedown",this.eventMouseDown),Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&Event.isLeftClick(e)){var t=Event.element(e);if((tag_name=t.tagName.toUpperCase())&&("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))return;var n=1/(document.body.style.zoom||1),i=[Event.pointerX(e)*n,Event.pointerY(e)*n],o=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(e){return i[e]-o[e]}),Draggables.activate(this),Event.stop(e)}},startDrag:function(e){if(this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||""),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this.element._originallyAbsolute="absolute"==this.element.getStyle("position"),this.element._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element)),this.options.scroll)if(this.options.scroll==window){var t=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=t.left,this.originalScrollTop=t.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(event,pointer){if(this.dragging||this.startDrag(event),this.options.quiet||(Position.prepare(),Droppables.show(pointer,this.element)),Draggables.notify("onDrag",this,event),this.draw(pointer),this.options.change&&this.options.change(this),this.options.scroll){var p;if(this.stopScrolling(),this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))p=[left,top,left+width,top+height];else p=Position.page(this.options.scroll),p[0]+=this.options.scroll.scrollLeft+Position.deltaX,p[1]+=this.options.scroll.scrollTop+Position.deltaY,p.push(p[0]+this.options.scroll.offsetWidth),p.push(p[1]+this.options.scroll.offsetHeight);var speed=[0,0];pointer[0]<p[0]+this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)),pointer[1]<p[1]+this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)),pointer[0]>p[2]-this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)),pointer[1]>p[3]-this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)),this.startScrolling(speed)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(event)},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare();var n=1/(document.body.style.zoom||1),i=[Event.pointerX(e)*n,Event.pointerY(e)*n];Droppables.show(i,this.element)}this.options.ghosting&&(this.element._originallyAbsolute||Position.relativize(this.element),delete this.element._originallyAbsolute,Element.remove(this._clone),this._clone=null);var o=!1;t&&((o=Droppables.fire(e,this.element))||(o=!1)),o&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var r=this.options.revert;r&&Object.isFunction(r)&&(r=r(this.element));var s=this.currentDelta();r&&this.options.reverteffect?0!=o&&"failure"==r||this.options.reverteffect(this.element,s[1]-this.delta[1],s[0]-this.delta[0]):this.delta=s,this.options.zindex&&(this.element.style.zIndex=this.originalZ),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},keyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.finishDrag(e,!1),Event.stop(e))},endDrag:function(e){this.dragging&&(this.stopScrolling(),this.finishDrag(e,!0),Event.stop(e))},draw:function(e){var t=Position.cumulativeOffset(this.element);if(this.options.ghosting){var n=Position.realOffset(this.element);t[0]+=n[0]-Position.deltaX,t[1]+=n[1]-Position.deltaY}var i=this.currentDelta();t[0]-=i[0],t[1]-=i[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop);var o=[0,1].map(function(n){return e[n]-t[n]-this.offset[n]}.bind(this));this.options.snap&&(o=Object.isFunction(this.options.snap)?this.options.snap(o[0],o[1],this):Object.isArray(this.options.snap)?o.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):o.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var r=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(r.left=o[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(r.top=o[1]+"px"),"hidden"==r.visibility&&(r.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(e){(e[0]||e[1])&&(this.scrollSpeed=[e[0]*this.options.scrollSpeed,e[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10))},scroll:function(){var current=new Date,delta=current-this.lastScrolled;if(this.lastScrolled=current,this.options.scroll==window){with(this._getWindowScroll(this.options.scroll))if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1e3;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1e3;Position.prepare(),Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1e3,Draggables._lastScrollPointer[0]<0&&(Draggables._lastScrollPointer[0]=0),Draggables._lastScrollPointer[1]<0&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},_getWindowScroll:function(w){var T,L,W,H;with(w.document)w.document.documentElement&&documentElement.scrollTop?(T=documentElement.scrollTop,L=documentElement.scrollLeft):w.document.body&&(T=body.scrollTop,L=body.scrollLeft),w.innerWidth?(W=w.innerWidth,H=w.innerHeight):w.document.documentElement&&documentElement.clientWidth?(W=documentElement.clientWidth,H=documentElement.clientHeight):(W=body.offsetWidth,H=body.offsetHeight);return{top:T,left:L,width:W,height:H}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(e,t){this.element=$(e),this.observer=t,this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark(),this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(e){for(;"BODY"!=e.tagName.toUpperCase();){if(e.id&&Sortable.sortables[e.id])return e;e=e.parentNode}},options:function(e){if(e=Sortable._findRootElement($(e)))return Sortable.sortables[e.id]},destroy:function(e){var t=Sortable.options(e);t&&(Draggables.removeObserver(t.element),t.droppables.each(function(e){Droppables.remove(e)}),t.draggables.invoke("destroy"),delete Sortable.sortables[t.element.id])},create:function(e){e=$(e);var t=Object.extend({element:e,tag:"li",dropOnEmpty:!1,tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:e,handle:!1,only:!1,delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},arguments[1]||{});this.destroy(e);var n={revert:!0,quiet:t.quiet,scroll:t.scroll,scrollSpeed:t.scrollSpeed,scrollSensitivity:t.scrollSensitivity,delay:t.delay,ghosting:t.ghosting,constraint:t.constraint,handle:t.handle};t.starteffect&&(n.starteffect=t.starteffect),t.reverteffect?n.reverteffect=t.reverteffect:t.ghosting&&(n.reverteffect=function(e){e.style.top=0,e.style.left=0}),t.endeffect&&(n.endeffect=t.endeffect),t.zindex&&(n.zindex=t.zindex);var i={overlap:t.overlap,containment:t.containment,tree:t.tree,hoverclass:t.hoverclass,onHover:Sortable.onHover},o={onHover:Sortable.onEmptyHover,overlap:t.overlap,containment:t.containment,hoverclass:t.hoverclass};Element.cleanWhitespace(e),t.draggables=[],t.droppables=[],(t.dropOnEmpty||t.tree)&&(Droppables.add(e,o),t.droppables.push(e)),(t.elements||this.findElements(e,t)||[]).each(function(o,r){var s=t.handles?$(t.handles[r]):t.handle?$(o).select("."+t.handle)[0]:o;t.draggables.push(new Draggable(o,Object.extend(n,{handle:s}))),Droppables.add(o,i),t.tree&&(o.treeNode=e),t.droppables.push(o)}),t.tree&&(Sortable.findTreeElements(e,t)||[]).each(function(n){Droppables.add(n,o),n.treeNode=e,t.droppables.push(n)}),this.sortables[e.id]=t,Draggables.addObserver(new SortableObserver(e,t.onUpdate))},findElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.tag)},findTreeElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.treeTag)},onHover:function(e,t,n){if(!(Element.isParent(t,e)||n>.33&&n<.66&&Sortable.options(t).tree))if(n>.5){if(Sortable.mark(t,"before"),t.previousSibling!=e){var i=e.parentNode;e.style.visibility="hidden",t.parentNode.insertBefore(e,t),t.parentNode!=i&&Sortable.options(i).onChange(e),Sortable.options(t.parentNode).onChange(e)}}else{Sortable.mark(t,"after");var o=t.nextSibling||null;if(o!=e){i=e.parentNode;e.style.visibility="hidden",t.parentNode.insertBefore(e,o),t.parentNode!=i&&Sortable.options(i).onChange(e),Sortable.options(t.parentNode).onChange(e)}}},onEmptyHover:function(e,t,n){var i=e.parentNode,o=Sortable.options(t);if(!Element.isParent(t,e)){var r,s=Sortable.findElements(t,{tag:o.tag,only:o.only}),a=null;if(s){var l=Element.offsetSize(t,o.overlap)*(1-n);for(r=0;r<s.length;r+=1){if(!(l-Element.offsetSize(s[r],o.overlap)>=0)){if(l-Element.offsetSize(s[r],o.overlap)/2>=0){a=r+1<s.length?s[r+1]:null;break}a=s[r];break}l-=Element.offsetSize(s[r],o.overlap)}}t.insertBefore(e,a),Sortable.options(i).onChange(e),o.onChange(e)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(e,t){var n=Sortable.options(e.parentNode);if(!n||n.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var i=Position.cumulativeOffset(e);Sortable._marker.setStyle({left:i[0]+"px",top:i[1]+"px"}),"after"==t&&("horizontal"==n.overlap?Sortable._marker.setStyle({left:i[0]+e.clientWidth+"px"}):Sortable._marker.setStyle({top:i[1]+e.clientHeight+"px"})),Sortable._marker.show()}},_tree:function(e,t,n){for(var i=Sortable.findElements(e,t)||[],o=0;o<i.length;++o){var r=i[o].id.match(t.format);if(r){var s={id:encodeURIComponent(r?r[1]:null),element:e,parent:n,children:[],position:n.children.length,container:$(i[o]).down(t.treeTag)};s.container&&this._tree(s.container,t,s),n.children.push(s)}}return n},tree:function(e){e=$(e);var t=this.options(e),n=Object.extend({tag:t.tag,treeTag:t.treeTag,only:t.only,name:e.id,format:t.format},arguments[1]||{}),i={id:null,parent:null,children:[],container:e,position:0};return Sortable._tree(e,n,i)},_constructIndex:function(e){for(var t="";e.id&&(t="["+e.position+"]"+t),null!=(e=e.parent););return t},sequence:function(e){e=$(e);var t=Object.extend(this.options(e),arguments[1]||{});return $(this.findElements(e,t)||[]).map(function(e){return e.id.match(t.format)?e.id.match(t.format)[1]:""})},setSequence:function(e,t){e=$(e);var n=Object.extend(this.options(e),arguments[2]||{}),i={};this.findElements(e,n).each(function(e){e.id.match(n.format)&&(i[e.id.match(n.format)[1]]=[e,e.parentNode]),e.parentNode.removeChild(e)}),t.each(function(e){var t=i[e];t&&(t[1].appendChild(t[0]),delete i[e])})},serialize:function(e){e=$(e);var t=Object.extend(Sortable.options(e),arguments[1]||{}),n=encodeURIComponent(arguments[1]&&arguments[1].name?arguments[1].name:e.id);return t.tree?Sortable.tree(e,arguments[1]).children.map(function(e){return[n+Sortable._constructIndex(e)+"[id]="+encodeURIComponent(e.id)].concat(e.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(e,arguments[1]).map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}};Element.isParent=function(e,t){return!(!e.parentNode||e==t)&&(e.parentNode==t||Element.isParent(e.parentNode,t))},Element.findChildren=function(e,t,n,i){if(!e.hasChildNodes())return null;i=i.toUpperCase(),t&&(t=[t].flatten());var o=[];return $A(e.childNodes).each(function(e){if(!e.tagName||e.tagName.toUpperCase()!=i||t&&!Element.classNames(e).detect(function(e){return t.include(e)})||o.push(e),n){var r=Element.findChildren(e,t,n,i);r&&o.push(r)}}),o.length>0?o.flatten():[]},Element.offsetSize=function(e,t){return e["offset"+("vertical"==t||"height"==t?"Height":"Width")]};var g_OnWebPanelShownHandlers=Array();function SteamOnWebPanelShown(){for(var e=0;e<g_OnWebPanelShownHandlers.length;e++)g_OnWebPanelShownHandlers[e]()}function RegisterSteamOnWebPanelShownHandler(e){g_OnWebPanelShownHandlers.push(e)}var g_OnWebPanelHiddenHandlers=Array();function SteamOnWebPanelHidden(){for(var e=0;e<g_OnWebPanelHiddenHandlers.length;e++)g_OnWebPanelHiddenHandlers[e]()}function RegisterSteamOnWebPanelHiddenHandler(e){g_OnWebPanelHiddenHandlers.push(e)}function RefreshNotificationArea(){UpdateNotificationCounts()}function vIE(){return"Microsoft Internet Explorer"==navigator.appName?parseFloat(new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)[1]):-1}function checkAbuseSub(e){if(!$J(e).find("input[name=abuseType]:checked").length)return alert("Please select a reason for reporting abuse"),!1;CModal.DismissActiveModal();var t=$J(e).serializeArray();return t.push({name:"json",value:1}),$J.post("http://steamcommunity.com/actions/ReportAbuse/",t).done(function(){ShowAlertDialog("Thank You!","Thank you for reporting offensive content and helping to keep Steam clean and friendly.")}).fail(function(){ShowAlertDialog("Report Violation","There was a problem saving your report.  Please try again later.")}),!1}var g_whiteListedDomains=["steampowered.com","steamgames.com","steamcommunity.com","valvesoftware.com","youtube.com","youtu.be","live.com","msn.com","myspace.com","facebook.com","hi5.com","wikipedia.org","orkut.com","blogger.com","friendster.com","fotolog.net","google.fr","baidu.com","microsoft.com","shacknews.com","bbc.co.uk","cnn.com","foxsports.com","pcmag.com","nytimes.com","flickr.com","amazon.com","veoh.com","pcgamer.com","metacritic.com","fileplanet.com","gamespot.com","gametap.com","ign.com","kotaku.com","xfire.com","pcgames.gwn.com","gamezone.com","gamesradar.com","digg.com","engadget.com","gizmodo.com","gamesforwindows.com","xbox.com","cnet.com","l4d.com","teamfortress.com","tf2.com","half-life2.com","aperturescience.com","dayofdefeat.com","dota2.com","playdota.com","kickstarter.com","gamingheads.com","reddit.com","counter-strike.net","imgur.com"];function getHostname(e){var t=new RegExp("^(steam://openurl(_external)?/)?(f|ht)tps?://([^@/?#]*@)?([^/#?]+)","im");return e.trim().match(t)[5].toString()}function AlertNonSteamSite(e){var t=e.href,n=getHostname(t);if(n){n=n.toLowerCase();for(var i=0;i<g_whiteListedDomains.length;++i){var o=n.lastIndexOf(g_whiteListedDomains[i]);if(-1!=o&&o==n.length-g_whiteListedDomains[i].length&&(0==o||"."==n.charAt(o-1)))return!0}return confirm("Note: the URL you have clicked on is not an official Steam web site.\n\n"+t.replace(new RegExp("^steam://openurl(_external)?/"),"")+"\n\nIf this web site asks for your user name or password, do not enter that information. You could lose your Steam account and all your games!\nAre you sure you want to visit this page? Click OK to continue at your own risk.\n")}return ShowAlertDialog("","The URL is badly formed."),!1}var lastFilters=new Object;function FilterListFast(e,t){var n=lastFilters[e];if(n||(n=""),(t=t.toLowerCase())==n)return!1;var i=!1,o=!1;t.length>n.length&&t.startsWith(n)&&(i=!0),(!t||t.length<n.length&&n.startsWith(t))&&(o=!0);var r=t.split(/\W/),s=$(e),a=s.parentNode;a.removeChild(s);for(var l=s.childNodes,c=0;c<l.length;c++){var u=l[c];if(u.nodeType==u.ELEMENT_NODE&&!(i&&"none"==u.style.display||o&&"none"!=u.style.display)){u.lcText||(u.lcText=(u.innerText||u.textContent).toLowerCase());for(var d=u.lcText,h=!0,p=0;h&&p<r.length;p++)d.include(r[p])||(h=!1);u.style.display=h?"":"none"}}return lastFilters[e]=t,a.appendChild(s),!0}function requestFullScreen(e){var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;return!!t&&(t.call(e),!0)}function exitFullScreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function RecordAJAXPageView(e){if("undefined"!=typeof ga&&ga)for(var t=["http://steamcommunity.com","http://steamcommunity.com"],n=0;n<t.length;++n){var i=t[n],o=e.indexOf(i);return-1!=o&&(e=e.substring(o+i.length)),void ga("send","pageview",e)}}function GetCookie(e){var t=document.cookie.match("(^|; )"+e+"=([^;]*)");return t&&t[2]?t[2]:null}function SetCookie(e,t,n,i){n||(n=0),i||(i="/");var o=new Date;o.setTime(o.getTime()+864e5*n),document.cookie=e+"="+t+"; expires="+o.toGMTString()+";path="+i}function v_currencyformat(e,t,n){var i=(e/100).toFixed(2);if(g_rgCurrencyData[t]){var o=g_rgCurrencyData[t];IsCurrencyWholeUnits(t)&&(i=i.replace(".00","")),"."!=o.strDecimalSymbol&&(i=i.replace(".",o.strDecimalSymbol));var r=IsCurrencySymbolBeforeValue(t)?GetCurrencySymbol(t)+o.strSymbolAndNumberSeparator+i:i+o.strSymbolAndNumberSeparator+GetCurrencySymbol(t);return"USD"==t&&void 0!==n&&"US"!=n?r+" USD":"EUR"==t?r.replace(",00",",--"):r}return i+" "+t}function IsCurrencySymbolBeforeValue(e){return g_rgCurrencyData[e]&&g_rgCurrencyData[e].bSymbolIsPrefix}function IsCurrencyWholeUnits(e){return g_rgCurrencyData[e]&&g_rgCurrencyData[e].bWholeUnitsOnly&&"RUB"!=e}function GetCurrencySymbol(e){return g_rgCurrencyData[e]?g_rgCurrencyData[e].strSymbol:e+" "}function GetCurrencyCode(e){for(var t in g_rgCurrencyData)if(g_rgCurrencyData[t].eCurrencyCode==e)return t;return"Unknown"}function GetAvatarURLFromHash(e,t){var n="http://cdn.edgecast.steamstatic.com/steamcommunity/public/images/avatars/"+e.substring(0,2)+"/"+e;return n+="full"==t?"_full.jpg":"medium"==t?"_medium.jpg":".jpg"}g_rgCurrencyData={USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"pуб.",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},ARS:{strCode:"ARS",eCurrencyCode:34,strSymbol:"ARS$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ILS:{strCode:"ILS",eCurrencyCode:35,strSymbol:"₪",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},BYN:{strCode:"BYN",eCurrencyCode:36,strSymbol:"Br",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},KZT:{strCode:"KZT",eCurrencyCode:37,strSymbol:"₸",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},KWD:{strCode:"KWD",eCurrencyCode:38,strSymbol:"KD",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},QAR:{strCode:"QAR",eCurrencyCode:39,strSymbol:"QR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CRC:{strCode:"CRC",eCurrencyCode:40,strSymbol:"₡",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},UYU:{strCode:"UYU",eCurrencyCode:41,strSymbol:"$U",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},RMB:{strCode:"RMB",eCurrencyCode:9e3,strSymbol:"刀币",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},NXP:{strCode:"NXP",eCurrencyCode:9001,strSymbol:"원",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""}};var g_AbuseModalContents=null;function ShowAbuseDialog(){if(g_AbuseModalContents||(g_AbuseModalContents=$J("#reportAbuseModalContents")),g_AbuseModalContents)ShowDialog("Report Violation",g_AbuseModalContents)}function StandardCommunityBan(e,t){$J.get("http://steamcommunity.com/actions/communitybandialog",{sessionID:g_sessionID,steamID:e}).done(function(e){var n=$J(e);ShowConfirmDialog("Community Ban",n,"Submit").done(function(){var e=n.find("form#community_ban_form");$J.post("http://steamcommunity.com/actions/StandardCommunityBan",e.serialize()).done(function(e){$J.isEmptyObject(t)?location.reload():$J(t).replaceWith('<span style="color: red;">Banned</span>')}).fail(function(e){ShowAlertDialog("Community Ban & Delete Comments","Failed with error message: "+V_ParseJSON(e.responseText).success)})})}).fail(function(e){ShowAlertDialog("Community Ban & Delete Comments","You do not have permissions to view this or you are not logged in.")})}function CEmoticonPopup(e,t){this.m_$EmoticonButton=e,this.m_$TextArea=t,null==CEmoticonPopup.sm_deferEmoticonsLoaded&&(CEmoticonPopup.sm_deferEmoticonsLoaded=new jQuery.Deferred),this.m_bVisible=!1,this.m_$Popup=null;var n=this;this.m_$EmoticonButton.one("mouseenter",function(){n.LoadEmoticons()}),this.m_$EmoticonButton.click(function(){n.LoadEmoticons(),CEmoticonPopup.sm_deferEmoticonsLoaded.done(function(){n.OnButtonClick()})}),this.m_fnOnDocumentClick=function(){n.DismissPopup()}}function PositionEmoticonHover(e,t){if(window.UseSmallScreenMode&&window.UseSmallScreenMode())e.css("left","").css("top","");else{e.css("visibility","hidden"),e.show();var n=t.offset();e.css("left",n.left+"px"),e.css("top",n.top+"px");var i=e.children(".emoticon_popup"),o=e.children(".miniprofile_arrow_left"),r=e.children(".miniprofile_arrow_right"),s=$J(window).scrollTop(),a=$J(window).scrollLeft(),l=$J(window).width(),c=$J(window).height(),u=r,d=l-(n.left-a+t.outerWidth()+i.width()),h=n.left-e.width();h>0||h>d?(e.css("left",n.left-e.width()-12+"px"),o.hide(),r.show()):(e.css("left",n.left+t.outerWidth()+"px"),u=o,o.show(),r.hide());var p=0;t.height()<48&&(p=Math.floor(t.height()/2)-12);var f=n.top-0+p;e.css("top",f+"px");var m=n.top-s+p;if(m+i.height()+35>c){var g=i.height()+35-(c-m),v=n.top-g;e.css("top",v+"px"),u.css("top",30+f-v+"px")}else u.css("top","");e.hide(),e.css("visibility","")}}function InitEconomyHovers(e,t,n){var i=$J("<div/>",{class:"economyitem_hover"}),o=$J("<div/>",{class:"economyitem_hover_content"});i.append(o),i.hide();var r=function(){if($J(document.body).append(i),"undefined"==typeof UserYou){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e);var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t);var s=document.createElement("script");s.setAttribute("type","text/javascript"),s.setAttribute("src",n);var a=$J("head")[0];a.appendChild(o),a.appendChild(r),a.appendChild(s)}};BindAJAXHovers(i,o,{fnDataFactory:function(e){var t=e.split("/");if(t.length>=3&&t.length<=5){var n;r&&(r(),r=null);var i=t[t.length-1];i&&i.length>2&&"a:"==i.substr(0,2)&&(n=i.substr(2),t.pop());var o=null,s=t[0];if("classinfo"==s)o="economy/itemclasshover/"+(s=t[1])+"/"+t[2]+"/"+(t.length>3?t[3]:0),o+="?content_only=1&l=english";else if(o="economy/itemhover/"+s+"/"+t[1]+"/"+t[2],o+="?content_only=1&omit_owner=1&l=english",4==t.length&&t[3]){var a=t[3];0==a.indexOf("id:")?o+="&o_url="+a.substr(3):o+="&o="+a}return n&&n>1&&(o+="&amount="+n),new CDelayedAJAXData(o,100)}return null},strDataName:"economy-item",strURLMatch:"itemhover"})}function ShowTradeOffer(e,t){var n="";t&&(n="?"+$J.param(t));var i="new"==e?"NewTradeOffer"+t.partner:"TradeOffer"+e,o=1120;if(Steam.BIsUserInSteamClient()&&Steam.GetClientPackageVersion()<1407800248){window.screen.availHeight&&window.screen.availHeight-92<o&&(o=window.screen.availHeight-92)}window.open("https://steamcommunity.com/tradeoffer/"+e+"/"+n,i,"height="+o+",width=1028,resize=yes,scrollbars=yes").focus()}function Logout(){PostToURLWithSession("https://steamcommunity.com/login/logout/")}function ChangeLanguage(e,t){var n=ShowBlockingWaitDialog("Change language","");$J.post("http://steamcommunity.com/actions/SetLanguage/",{language:e,sessionid:g_sessionID}).done(function(){t?n.Dismiss():g_steamID?window.location="http://store.steampowered.com/account/languagepreferences/":window.location.href.match(/[?&]l=/)?window.location=window.location.href.replace(/([?&])l=[^&]*&?/,"$1"):window.location.reload()}).fail(function(){n.Dismiss(),ShowAlertDialog("Change language","There was a problem communicating with the Steam servers.  Please try again later.")})}function abuseSSDescripCheck(){var e=$("abuseType1").checked,t=$("abuseType5").checked;e?($("abuseDescriptionLabel").setStyle({color:"#777777",fontStyle:"italic"}),$("abuseDescriptionArea").disable(),$("abuseDescriptionArea").clear()):t&&($("abuseDescriptionLabel").setStyle({color:"#898989",fontStyle:"normal"}),$("abuseDescriptionArea").enable(),$("abuseDescriptionArea").focus())}function BindOnHashChange(e){"onhashchange"in window?Event.observe(window,"hashchange",function(t){e(this.location.hash)}):new LocationHashObserver(null,.1,function(t,n){e(n)})}CEmoticonPopup.sm_rgEmoticons=[],CEmoticonPopup.sm_bEmoticonsLoaded=!1,CEmoticonPopup.sm_deferEmoticonsLoaded=null,CEmoticonPopup.prototype.LoadEmoticons=function(){CEmoticonPopup.sm_bEmoticonsLoaded||(CEmoticonPopup.sm_bEmoticonsLoaded=!0,CEmoticonPopup.sm_rgEmoticons=[],$J.get("http://steamcommunity.com/actions/EmoticonList").done(function(e){e&&(CEmoticonPopup.sm_rgEmoticons=e)}).always(function(){CEmoticonPopup.sm_deferEmoticonsLoaded.resolve()}))},CEmoticonPopup.prototype.OnButtonClick=function(){if(this.m_bVisible)this.DismissPopup();else{this.m_$Popup?PositionEmoticonHover(this.m_$Popup,this.m_$EmoticonButton):this.BuildPopup(),this.m_$EmoticonButton.addClass("focus"),this.m_$Popup.stop(),this.m_$Popup.fadeIn("fast"),this.m_bVisible=!0,window.UseSmallScreenMode&&window.UseSmallScreenMode()&&$J(window).scrollTop(this.m_$EmoticonButton.offset().top-$J(window).height()+this.m_$Popup.height()+this.m_$EmoticonButton.height()+10);var e=this;window.setTimeout(function(){$J(document).one("click.EmoticonPopup",e.m_fnOnDocumentClick)},0)}},CEmoticonPopup.prototype.DismissPopup=function(){this.m_$Popup.fadeOut("fast"),this.m_$EmoticonButton.removeClass("focus"),this.m_bVisible=!1,$J(document).off("click.EmoticonPopup")},CEmoticonPopup.prototype.BuildPopup=function(){this.m_$Popup=$J("<div/>",{class:"emoticon_popup_ctn"});var e=$J("<div/>",{class:"emoticon_popup"});this.m_$Popup.append(e);var t=$J("<div/>",{class:"emoticon_popup_content"});e.append(t);for(var n=0;n<CEmoticonPopup.sm_rgEmoticons.length;n++){var i=CEmoticonPopup.sm_rgEmoticons[n].replace(/:/g,""),o="http://community.edgecast.steamstatic.com/economy/emoticon/"+i,r=$J("<div/>",{class:"emoticon_option","data-emoticon":i}),s=$J("<img/>",{src:o,class:"emoticon"});r.append(s),r.click(this.GetEmoticonClickClosure(i)),t.append(r)}$J(document.body).append(this.m_$Popup),PositionEmoticonHover(this.m_$Popup,this.m_$EmoticonButton)},CEmoticonPopup.prototype.GetEmoticonClickClosure=function(e){var t=this,n=":"+e+":";return function(){var e=t.m_$TextArea[0];if(e){var i=e.selectionStart;e.value=e.value.substr(0,i)+n+e.value.substr(i),e.selectionStart=i+n.length}t.m_$TextArea.focus(),t.DismissPopup(),window.DismissEmoticonHover&&window.setTimeout(DismissEmoticonHover,1)}},LocationHashObserver=Class.create(Abstract.TimedObserver,{getValue:function(){return window.location.hash}});var CAutoSizingTextArea=Class.create({m_elTextArea:null,m_nMinHeight:20,m_nMaxHeight:500,m_cCurrentSize:Number.MAX_VALUE,m_fnChangeCallback:null,m_nTextAreaPadding:null,initialize:function(e,t,n){this.m_elTextArea=e;var i=this;$J(this.m_elTextArea).on("keyup blur click paste cut",function(e){"paste"==e.type||"blur"==e.type?i.OnPasteText():i.OnTextInput()}),this.m_elTextArea.style.overflow="hidden",this.m_cEntryLength=Number.MAX_VALUE,this.m_nMinHeight=t||20,this.m_fnChangeCallback=n||null,this.m_elTextArea.style.height=this.m_nMinHeight+"px",this.OnTextInput()},CalculatePadding:function(){var e=this.m_elTextArea.value;this.m_elTextArea.value="",this.m_elTextArea.style.height=this.m_nMinHeight+"px",this.m_nTextAreaPadding=this.m_elTextArea.scrollHeight-this.m_nMinHeight,this.m_elTextArea.value=e},OnPasteText:function(){this.OnTextInput.bind(this).defer()},OnTextInput:function(){var e=void 0,t=this.m_elTextArea.value.length;if(null===this.m_nTextAreaPadding&&$J(this.m_elTextArea).is(":visible")&&this.CalculatePadding(),t<this.m_cEntryLength&&(e=window.scrollY,this.m_elTextArea.style.height=this.m_nMinHeight+"px"),this.m_elTextArea.scrollHeight>this.m_nMaxHeight)this.m_elTextArea.style.height=this.m_nMaxHeight+"px",this.m_elTextArea.style.overflow="auto";else if(this.m_elTextArea.scrollHeight!=this.m_elTextArea.getHeight()){var n=Math.max(this.m_elTextArea.scrollHeight,this.m_nMinHeight);this.m_elTextArea.style.height=n-this.m_nTextAreaPadding+"px","auto"==this.m_elTextArea.style.overflow&&(this.m_elTextArea.style.overflow="hidden")}this.m_fnChangeCallback&&this.m_fnChangeCallback(this.m_elTextArea),e&&window.scrollTo(window.scrollX,e),this.m_cEntryLength=t}});function UpdateParameterInCurrentURL(e,t,n){var i=window.location.pathname,o=window.location.search,r={};if(o&&o.length>2&&(r=$J.deparam(o.substr(1))),null===t?delete r[e]:r[e]=t,n)for(var s=0;s<n.length;s++)delete r[n[s]];return i+((o=$J.param(r))?"?"+o:"")}var g_rgCommentThreads={};function InitializeCommentThread(e,t,n,i,o){var r=CCommentThread;window["CCommentThread"+e]&&(r=window["CCommentThread"+e]),g_rgCommentThreads[t]=new r(e,t,n,i,o)}function BindCommentThreadSubscribeButtons(e,t,n,i,o,r){var s=FindCommentThread(e,t,n,i);s&&s.BindSubscribeButtons(o,r)}function FindCommentThread(e,t,n,i){for(var o in g_rgCommentThreads)if(g_rgCommentThreads[o].BMatches(e,t,n,i))return g_rgCommentThreads[o];return null}var CCommentThread=Class.create({m_strName:null,m_strCommentThreadType:null,m_rgCommentData:null,m_strActionURL:null,m_elTextArea:null,m_cPageSize:null,m_nQuoteBoxHeight:40,m_cTotalCount:0,m_iCurrentPage:0,m_cMaxPages:0,m_cDropdownPages:0,m_bLoading:!1,m_bLoadingUserHasUpVoted:!1,m_cUpVotes:0,m_bIncludeRaw:!1,m_rgRawCommentCache:null,m_bHasPaging:!0,m_bTrackNavigation:!1,m_votecountID:null,m_voteupID:null,m_commentcountID:null,m_oTextAreaSizer:null,m_bSubscribed:null,m_$SubscribeCheckbox:null,initialize:function(e,t,n,i,o){this.m_strName=t,this.m_strCommentThreadType=e,this.m_rgCommentData=n,this.m_strActionURL=i,this.m_nQuoteBoxHeight=o;var r=n.start?n.start:0;this.m_cTotalCount=n.total_count,this.m_cPageSize=n.pagesize,this.m_iCurrentPage=Math.floor(r/this.m_cPageSize),this.m_cMaxPages=Math.ceil(this.m_cTotalCount/this.m_cPageSize),this.m_bLoadingUserHasUpVoted=n.has_upvoted,this.m_cUpVotes=n.upvotes,this.m_votecountID=n.votecountid,this.m_voteupID=n.voteupid,this.m_commentcountID=n.commentcountid,this.m_bSubscribed=n.subscribed,this.m_bHasPaging=!n.no_paging,this.m_bTrackNavigation=!!n.track_navigation;var s="commentthread_"+this.m_strName;if(this.m_elTextArea=$(s+"_textarea"),n.comments_raw&&(this.m_bIncludeRaw=!0,this.m_rgRawCommentCache=n.comments_raw,n.comments_raw=void 0),this.m_elTextArea){var a=$("commentthread_"+this.m_strName+"_submit_container"),l=this.m_nQuoteBoxHeight;this.m_strName.startsWith("Profile_")&&(l=20),this.m_oTextAreaSizer=new CAutoSizingTextArea(this.m_elTextArea,l,this.OnTextInput.bind(this,a))}var c=this;this.m_bHasPaging&&($(s+"_pagebtn_prev").observe("click",this.OnPagingButtonClick.bindAsEventListener(this,this.PrevPage)),$(s+"_fpagebtn_prev").observe("click",this.OnPagingButtonClick.bindAsEventListener(this,this.PrevPage)),$(s+"_pagebtn_next").observe("click",this.OnPagingButtonClick.bindAsEventListener(this,this.NextPage)),$(s+"_fpagebtn_next").observe("click",this.OnPagingButtonClick.bindAsEventListener(this,this.NextPage)),this.m_bTrackNavigation&&window.history&&window.history.pushState&&(window.history.replaceState({comment_thread_page:this.m_iCurrentPage},""),$J(window).on("popstate",function(e){var t=e.originalEvent.state;t&&void 0!==t.comment_thread_page&&c.GoToPage(t.comment_thread_page)})));var u=$(s+"_form");u&&u.observe("submit",this.OnSubmit.bind(this));var d=$(s+"_submit");d&&d.observe("click",this.OnSubmit.bind(this));var h=$(s+"_autosubscribe");h&&(h.checked=this.m_bSubscribed||GetValueLocalStorage("forum_autosubscribe",!1),h.observe("change",this.OnAutosubscribeToggle.bind(this)));var p=$(s+"_subscribe"),f=$(s+"_unsubscribe");p&&f&&this.BindSubscribeButtons(p,f),this.m_$SubscribeCheckbox=$J("#"+s+"_subscribe_checkbox"),this.m_$SubscribeCheckbox.click(function(){c.m_$SubscribeCheckbox.hasClass("waiting")||(c.m_bSubscribed?c.Unsubscribe(function(){},function(){ShowAlertDialog("Subscribe to thread","There was a problem updating your subscription.  Please try again later.")}):c.Subscribe(function(){},function(){ShowAlertDialog("Subscribe to thread","There was a problem updating your subscription.  Please try again later.")}))}),this.UpdatePagingDisplay()},BMatches:function(e,t,n,i){return this.m_strCommentThreadType==e&&this.m_rgCommentData.owner==t&&this.m_rgCommentData.feature==n&&this.m_rgCommentData.feature2==i},CheckTextAreaSize:function(){this.m_oTextAreaSizer.OnTextInput()},OnTextInput:function(e,t){if(e){var n=$J(this.m_elTextArea).data("prepopulated-text"),i=t.value.length>0;if(i&&n&&!$J(this.m_elTextArea).data("replaced-prepopulated-text"))(i=(n=v_trim(n).replace(/[\n\r]/g,""))!=v_trim(t.value).replace(/[\n\r]/g,""))&&$J(this.m_elTextArea).data("replaced-prepopulated-text",!0);i?e.show():e.hide()}},GetActionURL:function(e){var t=this.m_strActionURL+e+"/";return t+=this.m_rgCommentData.owner+"/",t+=this.m_rgCommentData.feature+"/"},ParametersWithDefaults:function(e){return e||(e={}),e.count=this.m_cPageSize,e.sessionid=g_sessionID,this.m_rgCommentData.extended_data&&(e.extended_data=this.m_rgCommentData.extended_data),this.m_rgCommentData.feature2&&(e.feature2=this.m_rgCommentData.feature2),this.m_rgCommentData.oldestfirst&&(e.oldestfirst=!0),this.m_rgCommentData.newestfirstpagination&&(e.newestfirstpagination=!0),this.m_rgCommentData.lastvisit&&(e.lastvisit=this.m_rgCommentData.lastvisit),this.m_bIncludeRaw&&(e.include_raw=!0),e},OnSubmit:function(){if(!this.m_bLoading){var e=$J(this.m_elTextArea).data("prepopulated-text");if(!e||v_trim(e).replace(/[\n\r]/g,"")!=v_trim(this.m_elTextArea.value).replace(/[\n\r]/g,"")){var t=this.ParametersWithDefaults({comment:this.m_elTextArea.value});this.m_bLoading=!0,new Ajax.Request(this.GetActionURL("post"),{method:"post",parameters:t,onSuccess:this.OnResponseAddComment.bind(this,++this.m_nRenderAjaxSequenceNumber),onFailure:this.OnFailureDisplayError.bind(this),onComplete:this.OnAJAXComplete.bind(this)});var n=$("commentthread_"+this.m_strName+"_autosubscribe");return n&&n.checked&&!this.m_bSubscribed&&this.Subscribe(),!1}ShowAlertDialog("","Please enter a comment to post.")}},DeleteComment:function(e,t,n){if(!this.m_bLoading){var i=this.ParametersWithDefaults({gidcomment:e,start:this.m_cPageSize*this.m_iCurrentPage});t&&(i.undelete=1),this.m_bLoading=!0,new Ajax.Request(this.GetActionURL("delete"),{method:"post",parameters:i,onSuccess:n||this.OnResponseDeleteComment.bind(this,++this.m_nRenderAjaxSequenceNumber),onFailure:this.OnFailureDisplayError.bind(this),onComplete:this.OnAJAXComplete.bind(this)})}},DisplayEditComment:function(e){var t=$("editcommentform_"+e),n=$("comment_edit_text_"+e),i=$("comment_content_"+e);i.hide(),i.next(".forum_audit")&&i.next(".forum_audit").hide(),$("comment_edit_"+e).show(),$("comment_edit_"+e+"_error").update(""),n.value&&0!=n.value.length||(n.value=this.m_rgRawCommentCache[e].text),t.m_bEventsBound||(new CAutoSizingTextArea(n,40),t.observe("submit",this.SubmitEditComment.bind(this,t)),t.observe("reset",this.HideEditComment.bind(this,e)),t.m_bEventsBound=!0)},VoteUp:function(){if(!this.m_bLoading){var e=this.ParametersWithDefaults({vote:this.m_bLoadingUserHasUpVoted?0:1});this.m_bLoading=!0,new Ajax.Request(this.GetActionURL("voteup"),{method:"post",parameters:e,onSuccess:this.OnResponseVoteUp.bind(this,++this.m_nRenderAjaxSequenceNumber),onFailure:this.OnFailureDisplayError.bind(this),onComplete:this.OnAJAXComplete.bind(this)})}},UpdateAnswer:function(e,t){if(!this.m_bLoading){if(e){var n="You are about to mark this post as the answer to this thread. This will indicate that the original post has been answered and link to this specific post. You can remove this or indicate a different post as the answer at any time if you change your mind.";t&&(n="A different post is already selected as the answer to this thread. Would you like to choose this post as the new answer?"),$modal=ShowConfirmDialog("Mark As Answer",n,"Choose Answer"),$modal.SetMaxWidth(500)}else $modal=ShowConfirmDialog("Remove As Answer","Are you sure you want to unmark this post as the answer to this thread? You can update this at any time.","Remove As Answer");var i=this;$modal.done(function(){var t=i.ParametersWithDefaults({gidcommentanswer:e});i.m_bLoading=!0,new Ajax.Request(i.GetActionURL("updateanswer"),{method:"post",parameters:t,onSuccess:function(){window.location.hash="c"+e,window.location.reload()},onFailure:function(e){if(e.responseJSON&&e.responseJSON.success){var t="There was an issue updating this topic answer. Error: "+e.responseJSON.success;15==e.responseJSON.success&&(t="You do not have permission to update this topic's answer."),ShowAlertDialog("Error",t)}},onComplete:i.OnAJAXComplete.bind(i)})})}},GetRawComment:function(e){return this.m_rgRawCommentCache[e]},GetCommentTextEntryElement:function(){return this.m_elTextArea},HideEditComment:function(e){$("comment_content_"+e).show(),$("comment_edit_"+e).hide()},OnResponseEditComment:function(e,t,n){n.responseJSON&&n.responseJSON.success?this.OnResponseRenderComments(CCommentThread.RENDER_DELETEDPOST,t,n):this.OnEditFailureDisplayError(e,n)},OnEditFailureDisplayError:function(e,t){this.DisplayError($("comment_edit_"+e+"_error"),t)},SubmitEditComment:function(e){if(this.m_bLoading)return!1;var t=e.elements.gidcomment.value,n=e.elements.comment.value,i=this.ParametersWithDefaults({gidcomment:t,comment:n,start:this.m_cPageSize*this.m_iCurrentPage});return this.m_bLoading=!0,new Ajax.Request(this.GetActionURL("edit"),{method:"post",parameters:i,onSuccess:this.OnResponseEditComment.bind(this,t,++this.m_nRenderAjaxSequenceNumber),onFailure:this.OnEditFailureDisplayError.bind(this,t),onComplete:this.OnAJAXComplete.bind(this)}),!1},OnAJAXComplete:function(){this.m_bLoading=!1},OnPagingButtonClick:function(e,t){e.stop(),t.call(this)},NextPage:function(){this.m_iCurrentPage<this.m_cMaxPages-1&&this.GoToPage(this.m_iCurrentPage+1)},PrevPage:function(){this.m_iCurrentPage>0&&this.GoToPage(this.m_iCurrentPage-1)},m_nRenderAjaxSequenceNumber:0,GoToPage:function(e,t){if(!(e>=this.m_cMaxPages||e<0||e==this.m_iCurrentPage&&!this.m_bLoading)){var n=this.ParametersWithDefaults({start:this.m_cPageSize*e,totalcount:this.m_cTotalCount});this.m_bLoading=!0,new Ajax.Request(this.GetActionURL("render"),{method:"post",parameters:n,onSuccess:this.OnResponseRenderComments.bind(this,t||CCommentThread.RENDER_GOTOPAGE,++this.m_nRenderAjaxSequenceNumber),onComplete:this.OnAJAXComplete.bind(this)})}},GoToPageWithComment:function(e,t){if(!this.m_bLoading&&!$("comment_"+e)){var n=this.ParametersWithDefaults({gidComment:e});new Ajax.Request(this.GetActionURL("render"),{method:"post",parameters:n,onSuccess:this.OnResponseRenderComments.bind(this,t||CCommentThread.RENDER_GOTOCOMMENT,++this.m_nRenderAjaxSequenceNumber),onComplete:this.OnAJAXComplete.bind(this)})}},OnResponseAddComment:function(e,t){t.responseJSON&&t.responseJSON.success?($("commentthread_"+this.m_strName+"_entry_error").hide(),this.m_elTextArea.value="",this.CheckTextAreaSize(),this.OnResponseRenderComments(CCommentThread.RENDER_NEWPOST,e,t),$("commentthread_"+this.m_strName+"_subscribeoptions")&&$("commentthread_"+this.m_strName+"_subscribeoptions").show()):this.OnFailureDisplayError(t)},OnResponseDeleteComment:function(e,t){t.responseJSON&&t.responseJSON.success?this.OnResponseRenderComments(CCommentThread.RENDER_DELETEDPOST,e,t):this.OnFailureDisplayError(t)},OnResponseVoteUp:function(e,t){t.responseJSON&&t.responseJSON.success?(this.OnResponseRenderComments(CCommentThread.RENDER_GOTOCOMMENT,e,t),this.m_bLoadingUserHasUpVoted=!this.m_bLoadingUserHasUpVoted,this.m_cUpVotes=t.responseJSON.upvotes,this.m_votecountID&&$(this.m_votecountID)&&t.responseJSON.votetext&&($(this.m_votecountID).innerHTML=t.responseJSON.votetext),this.m_voteupID&&$(this.m_voteupID)&&(this.m_bLoadingUserHasUpVoted?$(this.m_voteupID).addClassName("active"):$(this.m_voteupID).removeClassName("active"))):this.OnFailureDisplayError(t)},OnFailureDisplayError:function(e){this.DisplayError($("commentthread_"+this.m_strName+"_entry_error"),e)},DisplayError:function(e,t){var n="Sorry, some kind of error has occurred: ";t.responseJSON&&t.responseJSON.error?n+=t.responseJSON.error:n+="There was an error communicating with the network. Please try again later.",e.update(n),e.show()},OnResponseRenderComments:function(e,t,n){if(this.m_nRenderAjaxSequenceNumber==t&&n.responseJSON){var i=n.responseJSON;if(this.m_cTotalCount=i.total_count,this.m_cMaxPages=Math.ceil(i.total_count/i.pagesize),this.m_iCurrentPage=Math.floor(i.start/i.pagesize),i.comments_raw&&(this.m_rgRawCommentCache=i.comments_raw),this.m_commentcountID&&$(this.m_commentcountID)&&($(this.m_commentcountID).innerHTML=this.m_cTotalCount),this.m_cTotalCount<=i.start&&this.m_iCurrentPage>0)return void this.GoToPage.bind(this,this.m_iCurrentPage-1).defer();if(this.m_bTrackNavigation&&window.history&&window.history.pushState){var o=window.location.search.length?$J.deparam(window.location.search.substr(1)):{};if(!o.ctp&&0!=this.m_iCurrentPage||o.ctp&&o.ctp!=this.m_iCurrentPage+1){var r=window.history.pushState.bind(window.history),s=UpdateParameterInCurrentURL("ctp",0==this.m_iCurrentPage?null:this.m_iCurrentPage+1,["tscn"]);e!=CCommentThread.RENDER_GOTOPAGE_HASHCHANGE&&e!=CCommentThread.RENDER_GOTOCOMMENT_HASHCHANGE||(r=window.history.replaceState.bind(window.history),e==CCommentThread.RENDER_GOTOCOMMENT_HASHCHANGE&&(s+=window.location.hash)),r({comment_thread_page:this.m_iCurrentPage},"",s)}}this.DoTransitionToNewPosts(i,e),"undefined"!=typeof BindCommunityTooltip&&BindCommunityTooltip($J($("commentthread_"+this.m_strName+"_posts")).find("[data-community-tooltip]")),(!this.m_rgCommentData.oldestfirst&&0==this.m_iCurrentPage||this.m_rgCommentData.oldestfirst&&(this.m_iCurrentPage+1)*this.m_cPageSize>this.m_cTotalCount)&&RefreshNotificationArea(),this.UpdatePagingDisplay()}},DoTransitionToNewPosts:function(e,t){var n=e.comments_html,i=$("commentthread_"+this.m_strName+"_posts"),o=$("commentthread_"+this.m_strName+"_postcontainer");o.style.height=o.getHeight()+"px",o.style.overflow="hidden",t==CCommentThread.RENDER_NEWPOST&&this.m_cTotalCount<=this.m_cPageSize&&!this.m_rgCommentData.oldestfirst&&!this.m_rgCommentData.newestfirstpagination?(o.style.position="relative",i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.bottom="0px"):i.style.position="static",i.update(n),ScrollToIfNotInView($("commentthread_"+this.m_strName+"_area"),40,20),o.effect&&o.effect.cancel(),function(){o.effect=new Effect.Morph(o,{style:"height: "+i.getHeight()+"px",duration:.25,afterFinish:function(){i.style.position="static",o.style.height="auto",o.style.overflow=""}})}.defer()},UpdatePagingDisplay:function(){if(this.m_bHasPaging){var e="commentthread_"+this.m_strName;$(e+"_totalcount")&&$(e+"_totalcount").update(v_numberformat(this.m_cTotalCount));for(var t=[e+"_page",e+"_fpage"],n=0;n<t.length;n++){var i=t[n];if($(i+"total")&&$(i+"total").update(v_numberformat(this.m_cTotalCount)),$(i+"start")&&$(i+"start").update(v_numberformat(this.m_iCurrentPage*this.m_cPageSize+1)),$(i+"end")&&$(i+"end").update(Math.min((this.m_iCurrentPage+1)*this.m_cPageSize,this.m_cTotalCount)),$(i+"ctn")&&(this.m_cTotalCount>0?$(i+"ctn").show():$(i+"ctn").hide()),this.m_cMaxPages<=1)$(i+"controls").hide();else{$(i+"controls").show(),this.m_iCurrentPage>0?($(i+"btn_prev").removeClassName("disabled"),this.m_bTrackNavigation&&($(i+"btn_prev").href=UpdateParameterInCurrentURL("ctp",1==this.m_iCurrentPage?null:this.m_iCurrentPage,["tscn"]))):($(i+"btn_prev").addClassName("disabled"),this.m_bTrackNavigation&&($(i+"btn_prev").href="javascript:void(0);")),this.m_iCurrentPage<this.m_cMaxPages-1?($(i+"btn_next").removeClassName("disabled"),this.m_bTrackNavigation&&($(i+"btn_next").href=UpdateParameterInCurrentURL("ctp",this.m_iCurrentPage+2,["tscn"]))):($(i+"btn_next").addClassName("disabled"),this.m_bTrackNavigation&&($(i+"btn_next").href="javascript:void(0);"));var o=$(i+"links");o.update("");var r=2,s=Math.max(this.m_iCurrentPage-r,1);(d=Math.min(this.m_iCurrentPage+2*r+(s-this.m_iCurrentPage),this.m_cMaxPages-2))-this.m_iCurrentPage<r&&(s=Math.max(this.m_iCurrentPage-2*r+(d-this.m_iCurrentPage),1)),this.AddPageLink(o,0),1!=s&&o.insert(" ... ");for(var a=s;a<=d;a++)this.AddPageLink(o,a);d!=this.m_cMaxPages-2&&o.insert(" ... "),this.AddPageLink(o,this.m_cMaxPages-1)}var l=$J("#"+i+"dropdown"),c=l.children("select");if(!c.length){c=$J("<select/>");var u=this;c.change(function(){var e=$J(this);u.GoToPage(e.val())}),l.append(c)}c.empty();var d,h=function(e){c.append($J("<option/>",{value:e}).text(e>=999?v_numberformat(e+1):e+1))};r=10,s=Math.max(this.m_iCurrentPage-r,1);(d=Math.min(this.m_iCurrentPage+2*r+(s-this.m_iCurrentPage),this.m_cMaxPages-2))-this.m_iCurrentPage<r&&(s=Math.max(this.m_iCurrentPage-2*r+(d-this.m_iCurrentPage),1)),h(0),1!=s&&c.append($J("<option/>",{value:"",disabled:1}).text("..."));for(a=s;a<=d;a++)h(a);d!=this.m_cMaxPages-2&&c.append($J("<option/>",{value:"",disabled:1}).text("...")),h(this.m_cMaxPages-1),c.val(this.m_iCurrentPage)}this.m_cDropdownPages=this.m_cMaxPages}},AddPageLink:function(e,t){var n;(n=this.m_bTrackNavigation?new Element("a",{class:"commentthread_pagelink",href:UpdateParameterInCurrentURL("ctp",t+1,["tscn"])}):new Element("span",{class:"commentthread_pagelink"})).update(t+1);var i=this.GoToPage.bind(this,t);t==this.m_iCurrentPage?n.addClassName("active"):n.observe("click",function(e){e.stop(),i()}),e.insert(n),e.insert(" ")},Subscribe:function(e,t){var n=this.ParametersWithDefaults();this.m_$SubscribeCheckbox.addClass("waiting");var i=this;$J.post(this.GetActionURL("subscribe"),n).done(function(){i.OnSubscriptionChange(!0,e)}).fail(t).always(function(){i.m_$SubscribeCheckbox.removeClass("waiting")})},Unsubscribe:function(e,t){var n=this.ParametersWithDefaults();this.m_$SubscribeCheckbox.addClass("waiting");var i=this;$J.post(this.GetActionURL("unsubscribe"),n).done(function(){i.OnSubscriptionChange(!1,e)}).fail(t).always(function(){i.m_$SubscribeCheckbox.removeClass("waiting")})},m_rgSubscriptionUpdateHandlers:null,BindSubscribeButtons:function(e,t){var n=this;this.m_rgSubscriptionUpdateHandlers||(this.m_rgSubscriptionUpdateHandlers=[]),this.m_rgSubscriptionUpdateHandlers.push(function(){n.m_bSubscribed?($J(e).hide(),$J(t).show()):($J(e).show(),$J(t).hide())}),$J(e).click(function(){n.Subscribe(function(){ShowAlertDialog("Subscribe to thread","You'll receive a comment notification whenever someone replies to this thread.")},function(){ShowAlertDialog("Subscribe to thread","There was a problem updating your subscription.  Please try again later.")})}),$J(t).click(function(){n.Unsubscribe(function(){ShowAlertDialog("Unsubscribe from thread","You'll no longer receive comment notifications from this thread.")},function(){ShowAlertDialog("Unsubscribe from thread","There was a problem updating your subscription.  Please try again later.")})}),this.UpdateSubscriptionDisplay()},OnSubscriptionChange:function(e,t,n){this.m_bSubscribed=e,t&&t(n),this.UpdateSubscriptionDisplay()},UpdateSubscriptionDisplay:function(){if(this.m_rgSubscriptionUpdateHandlers&&this.m_rgSubscriptionUpdateHandlers.length)for(var e=0;e<this.m_rgSubscriptionUpdateHandlers.length;e++)this.m_rgSubscriptionUpdateHandlers[e]();this.m_bSubscribed?this.m_$SubscribeCheckbox.addClass("checked"):this.m_$SubscribeCheckbox.removeClass("checked");var t=$("forum_subscribe_"+this.m_rgCommentData.feature2),n=$("forum_unsubscribe_"+this.m_rgCommentData.feature2);t&&n&&(this.m_bSubscribed?(t.hide(),n.show()):(t.show(),n.hide()))},OnAutosubscribeToggle:function(){var e=$("commentthread_"+this.m_strName+"_autosubscribe");e&&(e.checked?SetValueLocalStorage("forum_autosubscribe",!0):UnsetValueLocalStorage("forum_autosubscribe"))}});function TargetIsChild(e,t){var n=e||window.event,i=n.relatedTarget||n.toElement;return!(!i||!$(i).up(t))}function addEvent(e,t,n,i){if(e.addEventListener)e.addEventListener(t,n,i);else{if(e.attachEvent)return e.attachEvent("on"+t,n);e["on"+t]=n}}function createQuery2(postUrl,returnFn,postData){var uid=Math.round(1e5*Math.random()),rUid="requester"+uid;eval(rUid+" = new xHttpQuery_Post();"),eval(rUid+".postUrl = postUrl;"),eval(rUid+".returnFn = returnFn;"),eval(rUid+".postData = postData;"),eval(rUid+'.selfRef = "'+rUid+'";'),eval(rUid+".doRequest();")}CCommentThread.RENDER_NEWPOST=1,CCommentThread.RENDER_GOTOPAGE=2,CCommentThread.RENDER_GOTOCOMMENT=3,CCommentThread.RENDER_DELETEDPOST=4,CCommentThread.RENDER_GOTOPAGE_HASHCHANGE=5,CCommentThread.RENDER_GOTOCOMMENT_HASHCHANGE=6,CCommentThread.DeleteComment=function(e,t){g_rgCommentThreads[e]&&g_rgCommentThreads[e].DeleteComment(t)},CCommentThread.UnDeleteComment=function(e,t){g_rgCommentThreads[e]&&g_rgCommentThreads[e].DeleteComment(t,!0)},CCommentThread.EditComment=function(e,t){g_rgCommentThreads[e]&&g_rgCommentThreads[e].DisplayEditComment(t)},CCommentThread.VoteUp=function(e){g_rgCommentThreads[e]&&g_rgCommentThreads[e].VoteUp()},CCommentThread.UpdateAnswer=function(e,t,n){g_rgCommentThreads[e]&&g_rgCommentThreads[e].UpdateAnswer(t,n)},CCommentThread.FormattingHelpPopup=function(e){$J.get("http://steamcommunity.com/comment/"+e+"/formattinghelp",{ajax:1}).done(function(e){ShowAlertDialog("Text Formatting",e)})},CCommentThread.ShowDeletedComment=function(e,t){var n=$("comment_"+t),i=$("deleted_comment_"+t);n.show(),i.hide()},CGameSelector=Class.create({bHaveSuggestions:!1,elInput:null,elSuggestionsCtn:null,elSuggestions:null,fnOnClick:null,elFocus:null,nAppIDFocus:0,initialize:function(e,t,n,i){this.elInput=e,this.elSuggestionsCtn=t,this.elSuggestions=n,this.elSuggestions||this.elSuggestionsCtn||(this.elSuggestions=new Element("div",{class:"shadow_content popup_body popup_menu"}),this.elSuggestionsCtn=new Element("div",{class:"popup_block",style:"display: none; z-index: 1200;"}),this.elSuggestionsCtn.update('<div class="shadow_ul"></div><div class="shadow_top"></div><div class="shadow_ur"></div><div class="shadow_left"></div><div class="shadow_right"></div><div class="shadow_bl"></div><div class="shadow_bottom"></div><div class="shadow_br"></div>'),this.elSuggestionsCtn.insert({bottom:this.elSuggestions}),$(document.body).appendChild(this.elSuggestionsCtn)),this.fnOnClick=function(e,t){e.HideSuggestions(),i(e,t)},new Form.Element.Observer(e,.2,this.OnGameSelectTextEntry.bind(this)),e.observe("blur",this.HideSuggestions.bind(this)),e.observe("focus",this.ShowSuggestions.bind(this)),e.observe("keydown",this.OnGameSelectKeyDown.bindAsEventListener(this,e))},ShowSuggestions:function(){!this.elSuggestionsCtn.visible()&&this.bHaveSuggestions&&(AlignMenu(this.elInput,this.elSuggestionsCtn,"left","bottom",!0),ShowWithFade(this.elSuggestionsCtn))},HideSuggestions:function(){HideWithFade(this.elSuggestionsCtn)},OnGameSelectTextEntry:function(e,t){t?new Ajax.Request("http://steamcommunity.com/actions/SearchApps/"+encodeURIComponent(t),{method:"get",onSuccess:this.ReceiveGameSelectResponse.bind(this,t)}):(this.elSuggestions.update(""),this.bHaveSuggestions=!1)},OnGameSelectKeyDown:function(e,t){if(e.keyCode==Event.KEY_ESC)this.HideSuggestions();else if(this.bHaveSuggestions){var n=null;e.keyCode==Event.KEY_RETURN?this.elFocus&&(this.elFocus.fnOnSelect(),e.stop()):e.keyCode==Event.KEY_UP?(this.elFocus&&(n=this.elFocus.previous()),n||(n=this.elSuggestions.select(":last-child")[0])):e.keyCode==Event.KEY_DOWN&&(this.elFocus&&(n=this.elFocus.next()),n||(n=this.elSuggestions.childElements()[0])),n&&this.SetFocus(n)}},ReceiveGameSelectResponse:function(e,t){if(this.elInput.value==e){var n=t.responseJSON;this.UpdateListWithOptions(n)}},UpdateListWithOptions:function(e){if(this.elSuggestions.update(""),this.elFocus=null,e&&e.length){for(var t=0;t<e.length;t++){var n=new Element("div",{class:"game_suggestion popup_menu_item"});$J(n).text(e[t].name),n.appid=e[t].appid,n.fnOnSelect=this.fnOnClick.bind(null,this,e[t]),n.observe("click",n.fnOnSelect),n.observe("mouseover",this.SetFocus.bind(this,n)),this.elSuggestions.insert({bottom:n}),this.nAppIDFocus==n.appid&&this.SetFocus(n)}this.bHaveSuggestions=!0,this.ShowSuggestions()}else this.bHaveSuggestions=!1,this.HideSuggestions()},SetFocus:function(e){this.elFocus&&this.elFocus.removeClassName("focus"),this.elFocus=e,this.nAppIDFocus=e.appid,e.addClassName("focus")}}),CGameSelectorWorkshopGames=Class.create(CGameSelector,{OnGameSelectTextEntry:function(e,t){t?new Ajax.Request("http://steamcommunity.com/workshop/ajaxfindworkshops/?searchText="+encodeURIComponent(t),{method:"get",onSuccess:this.ReceiveGameSelectResponse.bind(this,t)}):(this.elSuggestions.update(""),this.bHaveSuggestions=!1)}}),CGameSelectorOwnedGames=Class.create(CGameSelector,{m_bOwnedGamesReady:!1,initialize:function(e,t,n,i,o){e(t,n,i,o),CGameSelectorOwnedGames.LoadOwnedGames(this.OnOwnedGamesReady.bind(this))},OnOwnedGamesReady:function(){this.m_bOwnedGamesReady=!0,this.OnGameSelectTextEntry(this.elInput,this.elInput.value)},OnGameSelectTextEntry:function(e,t){if(t)if(this.m_bOwnedGamesReady){for(var n=t.toLowerCase().split(" "),i=[],o=0;o<n.length;o++){var r=V_EscapeRegExp(n[o]);i.push(new RegExp(r))}for(var s=[],a=0;a<CGameSelectorOwnedGames.s_rgOwnedGames.length;a++){for(var l=CGameSelectorOwnedGames.s_rgOwnedGames[a],c=!0,u=0;u<i.length;u++)if(!i[u].match(l.name_normalized)){c=!1;break}if(c&&(s.push(l),s.length>=10))break}s.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),this.UpdateListWithOptions(s)}else this.elSuggestions.update('<div style="text-align: center; width: 200px; padding: 5px 0;"><img src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif"></div>'),this.bHaveSuggestions=!0,this.ShowSuggestions();else this.elSuggestions.update(""),this.bHaveSuggestions=!1}}),CGameSelectorOwnedGames.s_rgOwnedGames=null,CGameSelectorOwnedGames.s_bLoadInFlight=!1,CGameSelectorOwnedGames.s_rgOwnedGamesReadyCallbacks=[],CGameSelectorOwnedGames.AreOwnedGamesLoaded=function(){return null!=CGameSelectorOwnedGames.s_rgOwnedGames},CGameSelectorOwnedGames.LoadOwnedGames=function(e){if(CGameSelectorOwnedGames.AreOwnedGamesLoaded())e();else{if(CGameSelectorOwnedGames.s_rgOwnedGamesReadyCallbacks.push(e),CGameSelectorOwnedGames.s_bLoadInFlight)return;CGameSelectorOwnedGames.s_bLoadInFlight=!0,new Ajax.Request("http://steamcommunity.com/actions/GetOwnedApps/",{method:"get",parameters:{sessionid:g_sessionID},onSuccess:function(e){CGameSelectorOwnedGames.s_rgOwnedGames=e.responseJSON||[];for(var t=new RegExp(/[^0-9a-zA-Z]/g),n=0;n<CGameSelectorOwnedGames.s_rgOwnedGames.length;n++){var i=CGameSelectorOwnedGames.s_rgOwnedGames[n];i.name_normalized=i.name.replace(t,"").toLowerCase()}},onFailure:function(){CGameSelectorOwnedGames.s_rgOwnedGames=[]},onComplete:function(){for(var e=0;e<CGameSelectorOwnedGames.s_rgOwnedGamesReadyCallbacks.length;e++)CGameSelectorOwnedGames.s_rgOwnedGamesReadyCallbacks[e]()}})}};var updateInProgress=!1;function xHttpQuery_Post(){this.postUrl="",this.selfRef="",this.postData="",this.dataEncoded=!1,this.returnFn=!1,this.doRequest=function(){if(1!=updateInProgress){if(0==this.dataEncoded){var e=[],t=/%20/g;for(var n in this.postData){var i=this.postData[n].toString(),o=encodeURIComponent(n).replace(t,"+")+"="+encodeURIComponent(i).replace(t,"+");e.push(o)}this.postData=e.join("&"),this.dataEncoded=!0}updateInProgress=!0,window.XMLHttpRequest?req=new XMLHttpRequest:window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP")),req&&(req.open("POST",this.postUrl,!0),req.onreadystatechange=this.returnFn,req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),req.setRequestHeader("Content-Length",this.postData.length),req.send(this.postData))}else setTimeout(this.selfRef+".doRequest()",200)}}function winDim(e,t){return window.innerWidth?"w"==e?"v"==t?window.innerWidth:window.pageXOffset:"v"==t?window.innerHeight:window.pageYOffset:document.documentElement&&document.documentElement.clientWidth?"w"==e?"v"==t?document.documentElement.clientWidth:document.documentElement.scrollLeft:"v"==t?document.documentElement.clientHeight:document.documentElement.scrollTop:"w"==e?"v"==t?document.body.clientWidth:document.body.scrollLeft:"v"==t?document.body.clientHeight:document.body.scrollTop}function getGoodElement(e,t,n,i){for(1==i&&(e=e.parentNode);e.nodeName&&e.nodeName.toLowerCase()!=t&&"body"!=e.nodeName.toLowerCase();)e=e.parentNode;var o=" "+e.className+" ";return e.nodeName&&"body"!=e.nodeName.toLowerCase()&&-1==o.indexOf(" "+n+" ")?getGoodElement(e,t,n,1):-1!=o.indexOf(" "+n+" ")&&e}function addGameActions(){if(document.getElementsByTagName)for(var e=document.getElementsByTagName("div"),t=0;t<e.length;t++){var n=" "+e[t].className+" ",i=" "+e[t].parentNode.className+" ";-1==n.indexOf(" gameContainer ")&&-1==i.indexOf(" gameContainer ")||(addEvent(e[t],"mouseover",listItem_hilite,!1),addEvent(e[t],"mouseout",listItem_lolite,!1),addEvent(e[t],"click",listItem_toggle,!1))}}function getPopPos(e,t,n,i){winDim("w","v"),winDim("h","v");var o=winDim("w","s"),r=winDim("h","s"),s=e.clientX,a=e.clientY,l=s+o,c=a+r;return new Array(n>a?c+i:c-n-i,t>s?l+i:l-t-i)}var keepTooltip=!1;function tooltipCreate(e,t){var n=document.getElementById("tooltip");n&&n.parentNode.removeChild(n),(n=document.createElement("div")).id="tooltip",n.style.position="absolute",n.appendChild(e),document.getElementsByTagName("body")[0].appendChild(n);var i=getPopPos(t,n.clientWidth,n.clientHeight,6);n.style.top=i[0]+"px",n.style.left=i[1]+"px"}function tooltipDestroy(e){if(1!=e)setTimeout("tooltipDestroy(1)",10);else{var t=document.getElementById("tooltip");t&&t.parentNode.removeChild(t)}}function getElement(e){return document.getElementById?document.getElementById(e):!!document.all&&document.all[e]}function setImage(e,t){var n=getElement(e);n&&(n.src=t)}function iSwapFullURL(e,t){setImage(e,t)}function iSwap(e,t){setImage(e,"http://community.edgecast.steamstatic.com/public/images/"+t)}function ListenToIFrameMessage(e){var t=window.addEventListener?"addEventListener":"attachEvent",n=window[t];n("attachEvent"===n?"onmessage":"message",e,!1)}var gSharePopup=null,gShareRequestURL=null;function ShowSharePublishedFilePopup(e,t){gShareRequestURL="http://steamcommunity.com/sharedfiles/shareonsteam/?id="+e+"&appid="+t,ShowSharePopup("http://steamcommunity.com/sharedfiles/filedetails/?id="+e,"http://steamcommunity.com/sharedfiles/share/?id="+e)}function ShowShareNewsPostPopup(e,t){gShareRequestURL="http://steamcommunity.com/news/shareonsteam/"+e+"?appid="+t,ShowSharePopup("http://steamcommunity.com/news/post/"+e,"http://steamcommunity.com/news/sharepost/"+e)}function ShowShareClanAnnouncementPopup(e,t){gShareRequestURL="http://steamcommunity.com/gid/"+e+"/announcements/shareonsteam/"+t,ShowSharePopup("http://steamcommunity.com/gid/"+e+"/announcements/detail/"+t,"http://steamcommunity.com/gid/"+e+"/announcements/share/"+t)}function ShowSharePopup(e,t){var n=-1!=t.indexOf("?")?"&":"?";$("SharePopupLink_Facebook").href=t+n+"site=facebook&t="+Math.random(),$("SharePopupLink_Twitter").href=t+n+"site=twitter",$("SharePopupLink_Reddit").href=t+n+"site=reddit",$("SharePopupLink_Digg").href=t+n+"site=digg",$("SharePopupInput").value=e,(gSharePopup=ShowDialog("Share",$("SharePopup"))).SetRemoveContentOnDismissal(!1),$("SharePopup").show()}var gShareOnSteamDialog=null;function ShareOnSteam(){gSharePopup.Dismiss(),gSharePopup=null,$("ShareOnSteamDialogContents").hide(),new Ajax.Updater("ShareOnSteamDialogContents",gShareRequestURL,{evalScripts:!0,onLoaded:function(){ShowWithFade($("ShareOnSteamDialogContents"))}}),$("ShareOnSteamDialog").show();var e=new jQuery.Deferred;gShareOnSteamDialog=_BuildDialog("Share",$("ShareOnSteamDialog"),[],function(){CloseShareOnSteamDialog(),e.resolve()},null),e.always(function(){gShareOnSteamDialog.Dismiss()}),gShareOnSteamDialog.Show(),e.promise(gShareOnSteamDialog),gShareOnSteamDialog.SetRemoveContentOnDismissal(!1)}function CloseShareOnSteamDialog(){gShareOnSteamDialog.Dismiss()}function ShareContentToUserStatus(e,t,n,i){e+="\n\n"+t,new Ajax.Request(i,{insertion:Insertion.Bottom,method:"post",parameters:{sessionid:g_sessionID,status_text:e,appid:n},onSuccess:function(e){CloseShareOnSteamDialog(),ShowAlertDialog("Share","The status update has been posted to your Friends Activity.")},onFailure:function(e){ShowAlertDialog("Share","There was a problem sharing the status update.  Please try again later.")}})}function $JFromIDOrElement(e){return e instanceof jQuery?e:"string"==typeof e?$J("#"+e.replace(/\./,"\\.")):$J(e)}function ShowConfirmDialog(e,t,n,i,o){n||(n="OK"),i||(i="Cancel");var r=new jQuery.Deferred,s=function(){r.resolve("OK")},a=function(e){r.reject(e)},l=[],c=_BuildDialogButton(n,!0);if(c.click(s),l.push(c),o){var u=_BuildDialogButton(o,!1,{strClassName:" btn_darkblue_white_innerfade btn_medium"});u.click(function(){r.resolve("SECONDARY")}),l.push(u)}var d=_BuildDialogButton(i);d.click(function(){a(!0)}),l.push(d);var h=_BuildDialog(e,t,l,a);return h.Show(),_BindOnEnterKeyPressForDialog(h,r,s),r.always(function(){h.Dismiss()}),r.promise(h),h}function ShowAlertDialog(e,t,n){n||(n="OK");var i=new jQuery.Deferred,o=function(e){i.resolve(e)},r=_BuildDialogButton(n);r.click(function(){o(!0)});var s=_BuildDialog(e,t,[r],o);return i.always(function(){s.Dismiss()}),s.Show(),_BindOnEnterKeyPressForDialog(s,i,o),i.promise(s),s}function ShowDialog(e,t,n){var i=new jQuery.Deferred,o=_BuildDialog(e,t,[],function(){i.resolve()},n);return i.always(function(){o.Dismiss()}),o.Show(),i.promise(o),o}function ShowPromptDialog(e,t,n,i,o){n||(n="OK"),i||(i="Cancel");var r=$J("<form/>"),s=$J("<input/>",{type:"text",class:""});r.append($J("<div/>",{class:"newmodal_prompt_description"}).append(t)),r.append($J("<div/>",{class:"newmodal_prompt_input gray_bevel for_text_input fullwidth"}).append(s));var a=new jQuery.Deferred,l=function(){a.resolve(s.val())},c=function(){a.reject()};r.submit(function(e){e.preventDefault(),l()});var u=$J("<span/>").text(n),d=$J("<button/>",{type:"submit",class:"btn_green_white_innerfade btn_medium"}).append(u);d.click(l);var h=_BuildDialogButton(i);h.click(c);var p=_BuildDialog(e,r,[d,h],c);return o&&o.bNoPromiseDismiss||a.always(function(){p.Dismiss()}),p.Show(),s.focus(),a.promise(p),p}function ShowPromptWithTextAreaDialog(e,t,n,i,o){n||(n="OK"),i||(i="Cancel");var r=$J("<form/>"),s=$J("<textarea/>",{class:"newmodal_prompt_textarea"});s.text(t),o&&(s.attr("maxlength",o),s.bind("keyup change",function(){var e=$J(this).val(),t=parseInt($J(this).attr("maxlength"));if(e.length>t)return $J(this).val(e.substr(0,t)),!1})),r.append($J("<div/>",{class:"newmodal_prompt_with_textarea gray_bevel fullwidth "}).append(s));var a=new jQuery.Deferred,l=function(){a.resolve(s.val())},c=function(){a.reject()};r.submit(function(e){e.preventDefault(),l()});var u=$J("<span/>").text(n),d=$J("<button/>",{type:"submit",class:"btn_green_white_innerfade btn_medium"}).append(u);d.click(l);var h=_BuildDialogButton(i);h.click(c);var p=_BuildDialog(e,r,[d,h],c);return a.always(function(){p.Dismiss()}),p.Show(),s.focus(),a.promise(p),p}function ShowBlockingWaitDialog(e,t){var n=new jQuery.Deferred,i=$J("<div/>",{class:"waiting_dialog_container"}),o=$J("<div/>",{class:"waiting_dialog_throbber"});i.append(o),i.append(t);var r=_BuildDialog(e,i,[],function(){n.resolve()},{bExplicitDismissalOnly:!0});return n.always(function(){r.Dismiss()}),r.Show(),n.promise(r),r}function _BindOnEnterKeyPressForDialog(e,t,n){$J(document).on("keyup.SharedConfirmDialog",function(t){!e.BIsActiveModal()||t.isDefaultPrevented()||13!=t.which||t.target&&"TEXTAREA"==t.target.nodeName||n()}),t.always(function(){$J(document).off("keyup.SharedConfirmDialog")})}function _BuildDialog(e,t,n,i,o){var r=$J("<div/>",{class:"newmodal"}),s=$J("<div/>",{class:"newmodal_close"}),a=$J("<div/>",{class:"newmodal_header"});a.append(s).append($J("<div/>",{class:"ellipsis"}).text(e)),a=$J("<div/>",{class:"newmodal_header_border"}).append(a),r.append(a);var l=$J("<div/>",{class:"newmodal_content"});if(l.append($J("<div/>").append(t)),n.length>0){var c=$J("<div/>",{class:"newmodal_buttons"});l.append(c);for(var u=0;u<n.length;u++)c.append(n[u])}r.append($J("<div/>",{class:"newmodal_content_border"}).append(l)),o&&o.bExplicitDismissalOnly&&s.hide();var d=new CModal(r,o);return i&&(d.OnDismiss(i),s.click(function(){d.Dismiss()})),d.m_fnBackgroundClick&&r.click(function(e){e.target==this&&d.m_fnBackgroundClick()}),d.SetRemoveContentOnDismissal(!0),d}function _BuildDialogButton(e,t,n){n||(n={});var i=t?"btn_green_white_innerfade btn_medium":"btn_grey_white_innerfade btn_medium";n.strClassName&&(i=n.strClassName);var o=$J("<span/>").html(e);return $J("<div/>",{class:i}).append(o)}function CModal(e,t){t=t||{},this.m_$Content=e,this.m_bVisible=!1,this.m_bIgnoreResizeEvents=t.bIgnoreResizeEvents,this.m_fnSizing=null,this.m_fnBackgroundClick=null,this.m_fnOnResize=null,this.m_bDismissOnBackgroundClick=!t.bExplicitDismissalOnly,this.m_nMaxWidth=0,this.m_nMaxHeight=0,this.m_fnOnDismiss=null,this.m_bRemoveContentOnDismissal=!1,this.m_nInitialOffsetTop=$J(document.body).scrollTop(),this.m_nInitialOffsetLeft=$J(document.body).scrollLeft(),this.m_$Content.css("position","fixed"),this.m_$Content.css("z-index",1e3),this.m_$StandardContent=null,this.m_$SizedContent=null,this.OnContentChanged();var n=this;this.m_fnBackgroundClick=function(){n.BIsActiveModal()&&n.m_bDismissOnBackgroundClick&&n.Dismiss()},this.m_fnOnEscapeKeyPress=function(e){n.BIsActiveModal()&&27==e.which&&n.m_fnBackgroundClick()},this.m_fnSizing=function(){n.AdjustSizing()},$J(document.body).append(this.m_$Content)}function GetDefaultCommunityAJAXParams(e,t){var n={url:"http://steamcommunity.com/"+e};return t&&(n.type=t),0!=window.location.href.indexOf("http://steamcommunity.com/")&&(n.crossDomain=!0,n.xhrFields={withCredentials:!0}),n}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],i=n.slice,o=n.concat,r=n.push,s=n.indexOf,a={},l=a.toString,c=a.hasOwnProperty,u={},d=function(e,t){return new d.fn.init(e,t)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,f=/-([\da-z])/gi,m=function(e,t){return t.toUpperCase()};function g(e){var t=e.length,n=d.type(e);return"function"!==n&&!d.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}d.fn=d.prototype={jquery:"1.11.1",constructor:d,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=d.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return d.each(this,e,t)},map:function(e){return this.pushStack(d.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:r,sort:n.sort,splice:n.splice},d.extend=d.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||d.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)e=s[i],s!==(n=o[i])&&(c&&n&&(d.isPlainObject(n)||(t=d.isArray(n)))?(t?(t=!1,r=e&&d.isArray(e)?e:[]):r=e&&d.isPlainObject(e)?e:{},s[i]=d.extend(c,r,n)):void 0!==n&&(s[i]=n));return s},d.extend({expando:"jQuery"+("1.11.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===d.type(e)},isArray:Array.isArray||function(e){return"array"===d.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!d.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==d.type(e)||e.nodeType||d.isWindow(e))return!1;try{if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(u.ownLast)for(t in e)return c.call(e,t);for(t in e);return void 0===t||c.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[l.call(e)]||"object":typeof e},globalEval:function(t){t&&d.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(p,"ms-").replace(f,m)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,o=e.length,r=g(e);if(n){if(r)for(;o>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(r)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(h,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(g(Object(e))?d.merge(n,"string"==typeof e?[e]:e):r.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(s)return s.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;)e[o++]=t[i++];if(n!=n)for(;void 0!==t[i];)e[o++]=t[i++];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;r>o;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,r=0,s=e.length,a=[];if(g(e))for(;s>r;r++)null!=(i=t(e[r],r,n))&&a.push(i);else for(r in e)null!=(i=t(e[r],r,n))&&a.push(i);return o.apply([],a)},guid:1,proxy:function(e,t){var n,o,r;return"string"==typeof t&&(r=e[t],t=e,e=r),d.isFunction(e)?(n=i.call(arguments,2),(o=function(){return e.apply(t||this,n.concat(i.call(arguments)))}).guid=e.guid=e.guid||d.guid++,o):void 0},now:function(){return+new Date},support:u}),d.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var v=function(e){var t,n,i,o,r,s,a,l,c,u,d,h,p,f,m,g,v,y,b,S="sizzle"+-new Date,_=e.document,C=0,w=0,x=re(),E=re(),T=re(),O=function(e,t){return e===t&&(d=!0),0},k="undefined",A=1<<31,P={}.hasOwnProperty,D=[],$=D.pop,N=D.push,M=D.push,I=D.slice,R=D.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=H.replace("w","w#"),J="\\["+F+"*("+H+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",B=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+J+")*)|.*)\\)|)",U=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),z=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),q=new RegExp(B),G=new RegExp("^"+j+"$"),X={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ie=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{M.apply(D=I.call(_.childNodes),_.childNodes),D[_.childNodes.length].nodeType}catch(e){M={apply:D.length?function(e,t){N.apply(e,I.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function oe(e,t,i,o){var r,a,c,u,d,f,v,y,C,w;if((t?t.ownerDocument||t:_)!==p&&h(t),i=i||[],!e||"string"!=typeof e)return i;if(1!==(u=(t=t||p).nodeType)&&9!==u)return[];if(m&&!o){if(r=Z.exec(e))if(c=r[1]){if(9===u){if(!(a=t.getElementById(c))||!a.parentNode)return i;if(a.id===c)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(c))&&b(t,a)&&a.id===c)return i.push(a),i}else{if(r[2])return M.apply(i,t.getElementsByTagName(e)),i;if((c=r[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(i,t.getElementsByClassName(c)),i}if(n.qsa&&(!g||!g.test(e))){if(y=v=S,C=t,w=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=s(e),(v=t.getAttribute("id"))?y=v.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",d=f.length;d--;)f[d]=y+me(f[d]);C=ee.test(e)&&pe(t.parentNode)||t,w=f.join(",")}if(w)try{return M.apply(i,C.querySelectorAll(w)),i}catch(e){}finally{v||t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,i,o)}function re(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function se(e){return e[S]=!0,e}function ae(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),o=e.length;o--;)i.attrHandle[n[o]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ue(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return se(function(t){return t=+t,se(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function pe(e){return e&&typeof e.getElementsByTagName!==k&&e}for(t in n=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,o=e?e.ownerDocument||e:_,s=o.defaultView;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,f=o.documentElement,m=!r(o),s&&s!==s.top&&(s.addEventListener?s.addEventListener("unload",function(){h()},!1):s.attachEvent&&s.attachEvent("onunload",function(){h()})),n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ae(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(o.getElementsByClassName)&&ae(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ae(function(e){return f.appendChild(e).id=S,!o.getElementsByName||!o.getElementsByName(S).length}),n.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==k&&m){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){var n=typeof e.getAttributeNode!==k&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==k?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==k&&m?t.getElementsByClassName(e):void 0},v=[],g=[],(n.qsa=Q.test(o.querySelectorAll))&&(ae(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+L+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ae(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ae(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(f.compareDocumentPosition),b=t||Q.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===_&&b(_,e)?-1:t===o||t.ownerDocument===_&&b(_,t)?1:u?R.call(u,e)-R.call(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===o?-1:t===o?1:r?-1:s?1:u?R.call(u,e)-R.call(u,t):0;if(r===s)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?ce(a[i],l[i]):a[i]===_?-1:l[i]===_?1:0},o):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!m||v&&v.test(t)||g&&g.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var o=i.attrHandle[t.toLowerCase()],r=o&&P.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==r?r:n.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],o=0,r=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(O),d){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return u=null,e},o=oe.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=oe.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&x(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==k&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=oe.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(p=(c=(u=g[S]||(g[S]={}))[e]||[])[0]===C&&c[1],h=c[0]===C&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[C,p,h];break}}else if(y&&(c=(t[S]||(t[S]={}))[e])&&c[0]===C)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[S]||(d[S]={}))[e]=[C,h]),d!==t)););return(h-=o)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return o[S]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var i,r=o(e,t),s=r.length;s--;)e[i=R.call(e,r[s])]=!(n[i]=r[s])}):function(e){return o(e,0,n)}):o}},pseudos:{not:se(function(e){var t=[],n=[],i=a(e.replace(U,"$1"));return i[S]?se(function(e,t,n,o){for(var r,s=i(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:se(function(e){return G.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(ne,ie).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[0>n?n+t:n]}),even:he(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ue(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=de(t);function fe(){}function me(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function ge(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=w++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var a,l,c=[C,r];if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((a=(l=t[S]||(t[S]={}))[i])&&a[0]===C&&a[1]===r)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,s))return!0}}}function ve(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!n||n(r,i,o))&&(s.push(r),c&&t.push(a));return s}function be(e,t,n,i,o,r){return i&&!i[S]&&(i=be(i)),o&&!o[S]&&(o=be(o,r)),se(function(r,s,a,l){var c,u,d,h=[],p=[],f=s.length,m=r||function(e,t,n){for(var i=0,o=t.length;o>i;i++)oe(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!r&&t?m:ye(m,h,e,a,l),v=n?o||(r?e:f||i)?[]:s:g;if(n&&n(g,v,a,l),i)for(c=ye(v,p),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(g[p[u]]=d));if(r){if(o||e){if(o){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);o(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=o?R.call(r,d):h[u])>-1&&(r[c]=!(s[c]=d))}}else v=ye(v===s?v.splice(f,v.length):v),o?o(null,s,v,l):M.apply(s,v)})}function Se(e){for(var t,n,o,r=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],l=s?1:0,u=ge(function(e){return e===t},a,!0),d=ge(function(e){return R.call(t,e)>-1},a,!0),h=[function(e,n,i){return!s&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i))}];r>l;l++)if(n=i.relative[e[l].type])h=[ge(ve(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[S]){for(o=++l;r>o&&!i.relative[e[o].type];o++);return be(l>1&&ve(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),n,o>l&&Se(e.slice(l,o)),r>o&&Se(e=e.slice(o)),r>o&&me(e))}h.push(n)}return ve(h)}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,s=oe.tokenize=function(e,t){var n,o,r,s,a,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(s in(!n||(o=z.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=W.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(U," ")}),a=a.slice(n.length)),i.filter)!(o=X[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?oe.error(e):E(e,l).slice(0)},a=oe.compile=function(e,t){var n,o,r,a,l,u,d=[],h=[],f=T[e+" "];if(!f){for(t||(t=s(e)),n=t.length;n--;)(f=Se(t[n]))[S]?d.push(f):h.push(f);(f=T(e,(o=h,a=(r=d).length>0,l=o.length>0,u=function(e,t,n,s,u){var d,h,f,m=0,g="0",v=e&&[],y=[],b=c,S=e||l&&i.find.TAG("*",u),_=C+=null==b?1:Math.random()||.1,w=S.length;for(u&&(c=t!==p&&t);g!==w&&null!=(d=S[g]);g++){if(l&&d){for(h=0;f=o[h++];)if(f(d,t,n)){s.push(d);break}u&&(C=_)}a&&((d=!f&&d)&&m--,e&&v.push(d))}if(m+=g,a&&g!==m){for(h=0;f=r[h++];)f(v,y,t,n);if(e){if(m>0)for(;g--;)v[g]||y[g]||(y[g]=$.call(s));y=ye(y)}M.apply(s,y),u&&!e&&y.length>0&&m+r.length>1&&oe.uniqueSort(s)}return u&&(C=_,c=b),v},a?se(u):u))).selector=e}return f},l=oe.select=function(e,t,o,r){var l,c,u,d,h,p="function"==typeof e&&e,f=!r&&s(e=p.selector||e);if(o=o||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===t.nodeType&&m&&i.relative[c[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(ne,ie),t)||[])[0]))return o;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=X.needsContext.test(e)?0:c.length;l--&&(u=c[l],!i.relative[d=u.type]);)if((h=i.find[d])&&(r=h(u.matches[0].replace(ne,ie),ee.test(c[0].type)&&pe(t.parentNode)||t))){if(c.splice(l,1),!(e=r.length&&me(c)))return M.apply(o,r),o;break}}return(p||a(e,f))(r,t,!m,o,ee.test(e)&&pe(t.parentNode)||t),o},n.sortStable=S.split("").sort(O).join("")===S,n.detectDuplicates=!!d,h(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||le(L,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),oe}(e);d.find=v,d.expr=v.selectors,d.expr[":"]=d.expr.pseudos,d.unique=v.uniqueSort,d.text=v.getText,d.isXMLDoc=v.isXML,d.contains=v.contains;var y=d.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function _(e,t,n){if(d.isFunction(t))return d.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return d.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(S.test(t))return d.filter(t,e,n);t=d.filter(t,e)}return d.grep(e,function(e){return d.inArray(e,t)>=0!==n})}d.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?d.find.matchesSelector(i,e)?[i]:[]:d.find.matches(e,d.grep(t,function(e){return 1===e.nodeType}))},d.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(d(e).filter(function(){for(t=0;o>t;t++)if(d.contains(i[t],this))return!0}));for(t=0;o>t;t++)d.find(e,i[t],n);return(n=this.pushStack(o>1?d.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&y.test(e)?d(e):e||[],!1).length}});var C,w=e.document,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(d.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e))||!n[1]&&t)return!t||t.jquery?(t||C).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof d?t[0]:t,d.merge(this,d.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),b.test(n[1])&&d.isPlainObject(t))for(n in t)d.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((i=w.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return C.find(e);this.length=1,this[0]=i}return this.context=w,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):d.isFunction(e)?void 0!==C.ready?C.ready(e):e(d):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),d.makeArray(e,this))}).prototype=d.fn,C=d(w);var E=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}d.extend({dir:function(e,t,n){for(var i=[],o=e[t];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!d(o).is(n));)1===o.nodeType&&i.push(o),o=o[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),d.fn.extend({has:function(e){var t,n=d(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(d.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=y.test(e)||"string"!=typeof e?d(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&d.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?d.unique(r):r)},index:function(e){return e?"string"==typeof e?d.inArray(this[0],d(e)):d.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(d.unique(d.merge(this.get(),d(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),d.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d.dir(e,"parentNode")},parentsUntil:function(e,t,n){return d.dir(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return d.dir(e,"nextSibling")},prevAll:function(e){return d.dir(e,"previousSibling")},nextUntil:function(e,t,n){return d.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return d.dir(e,"previousSibling",n)},siblings:function(e){return d.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return d.sibling(e.firstChild)},contents:function(e){return d.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:d.merge([],e.childNodes)}},function(e,t){d.fn[e]=function(n,i){var o=d.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=d.filter(i,o)),this.length>1&&(T[e]||(o=d.unique(o)),E.test(e)&&(o=o.reverse())),this.pushStack(o)}});var k,A=/\S+/g,P={};function D(){w.addEventListener?(w.removeEventListener("DOMContentLoaded",$,!1),e.removeEventListener("load",$,!1)):(w.detachEvent("onreadystatechange",$),e.detachEvent("onload",$))}function $(){(w.addEventListener||"load"===event.type||"complete"===w.readyState)&&(D(),d.ready())}d.Callbacks=function(e){var t,n;e="string"==typeof e?P[e]||(n=P[t=e]={},d.each(t.match(A)||[],function(e,t){n[t]=!0}),n):d.extend({},e);var i,o,r,s,a,l,c=[],u=!e.once&&[],h=function(t){for(o=e.memory&&t,r=!0,a=l||0,l=0,s=c.length,i=!0;c&&s>a;a++)if(!1===c[a].apply(t[0],t[1])&&e.stopOnFalse){o=!1;break}i=!1,c&&(u?u.length&&h(u.shift()):o?c=[]:p.disable())},p={add:function(){if(c){var t=c.length;!function t(n){d.each(n,function(n,i){var o=d.type(i);"function"===o?e.unique&&p.has(i)||c.push(i):i&&i.length&&"string"!==o&&t(i)})}(arguments),i?s=c.length:o&&(l=t,h(o))}return this},remove:function(){return c&&d.each(arguments,function(e,t){for(var n;(n=d.inArray(t,c,n))>-1;)c.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?d.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=o=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,o||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},d.extend({Deferred:function(e){var t=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return d.Deferred(function(n){d.each(t,function(t,r){var s=d.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&d.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?d.extend(e,i):i}},o={};return i.pipe=i.then,d.each(t,function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,r=0,s=i.call(arguments),a=s.length,l=1!==a||e&&d.isFunction(e.promise)?a:0,c=1===l?e:d.Deferred(),u=function(e,n,o){return function(r){n[e]=this,o[e]=arguments.length>1?i.call(arguments):r,o===t?c.notifyWith(n,o):--l||c.resolveWith(n,o)}};if(a>1)for(t=new Array(a),n=new Array(a),o=new Array(a);a>r;r++)s[r]&&d.isFunction(s[r].promise)?s[r].promise().done(u(r,o,s)).fail(c.reject).progress(u(r,n,t)):--l;return l||c.resolveWith(o,s),c.promise()}}),d.fn.ready=function(e){return d.ready.promise().done(e),this},d.extend({isReady:!1,readyWait:1,holdReady:function(e){e?d.readyWait++:d.ready(!0)},ready:function(e){if(!0===e?!--d.readyWait:!d.isReady){if(!w.body)return setTimeout(d.ready);d.isReady=!0,!0!==e&&--d.readyWait>0||(k.resolveWith(w,[d]),d.fn.triggerHandler&&(d(w).triggerHandler("ready"),d(w).off("ready")))}}}),d.ready.promise=function(t){if(!k)if(k=d.Deferred(),"complete"===w.readyState)setTimeout(d.ready);else if(w.addEventListener)w.addEventListener("DOMContentLoaded",$,!1),e.addEventListener("load",$,!1);else{w.attachEvent("onreadystatechange",$),e.attachEvent("onload",$);var n=!1;try{n=null==e.frameElement&&w.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!d.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}D(),d.ready()}}()}return k.promise(t)};var N,M="undefined";for(N in d(u))break;u.ownLast="0"!==N,u.inlineBlockNeedsLayout=!1,d(function(){var e,t,n,i;(n=w.getElementsByTagName("body")[0])&&n.style&&(t=w.createElement("div"),(i=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==M&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",u.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=w.createElement("div");if(null==u.deleteExpando){u.deleteExpando=!0;try{delete e.test}catch(e){u.deleteExpando=!1}}e=null}(),d.acceptData=function(e){var t=d.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,R=/([A-Z])/g;function L(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(R,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:I.test(n)?d.parseJSON(n):n)}catch(e){}d.data(e,t,n)}else n=void 0}return n}function F(e){var t;for(t in e)if(("data"!==t||!d.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function H(e,t,i,o){if(d.acceptData(e)){var r,s,a=d.expando,l=e.nodeType,c=l?d.cache:e,u=l?e[a]:e[a]&&a;if(u&&c[u]&&(o||c[u].data)||void 0!==i||"string"!=typeof t)return u||(u=l?e[a]=n.pop()||d.guid++:a),c[u]||(c[u]=l?{}:{toJSON:d.noop}),("object"==typeof t||"function"==typeof t)&&(o?c[u]=d.extend(c[u],t):c[u].data=d.extend(c[u].data,t)),s=c[u],o||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[d.camelCase(t)]=i),"string"==typeof t?null==(r=s[t])&&(r=s[d.camelCase(t)]):r=s,r}}function j(e,t,n){if(d.acceptData(e)){var i,o,r=e.nodeType,s=r?d.cache:e,a=r?e[d.expando]:d.expando;if(s[a]){if(t&&(i=n?s[a]:s[a].data)){d.isArray(t)?t=t.concat(d.map(t,d.camelCase)):t in i?t=[t]:t=(t=d.camelCase(t))in i?[t]:t.split(" "),o=t.length;for(;o--;)delete i[t[o]];if(n?!F(i):!d.isEmptyObject(i))return}(n||(delete s[a].data,F(s[a])))&&(r?d.cleanData([e],!0):u.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}d.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?d.cache[e[d.expando]]:e[d.expando])&&!F(e)},data:function(e,t,n){return H(e,t,n)},removeData:function(e,t){return j(e,t)},_data:function(e,t,n){return H(e,t,n,!0)},_removeData:function(e,t){return j(e,t,!0)}}),d.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=d.data(r),1===r.nodeType&&!d._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(0===(i=s[n].name).indexOf("data-")&&L(r,i=d.camelCase(i.slice(5)),o[i]));d._data(r,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){d.data(this,e)}):arguments.length>1?this.each(function(){d.data(this,e,t)}):r?L(r,e,d.data(r,e)):void 0},removeData:function(e){return this.each(function(){d.removeData(this,e)})}}),d.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=d._data(e,t),n&&(!i||d.isArray(n)?i=d._data(e,t,d.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=d.queue(e,t),i=n.length,o=n.shift(),r=d._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){d.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return d._data(e,n)||d._data(e,n,{empty:d.Callbacks("once memory").add(function(){d._removeData(e,t+"queue"),d._removeData(e,n)})})}}),d.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?d.queue(this[0],e):void 0===t?this:this.each(function(){var n=d.queue(this,e,t);d._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&d.dequeue(this,e)})},dequeue:function(e){return this.each(function(){d.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=d.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=d._data(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var J=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,B=["Top","Right","Bottom","Left"],U=function(e,t){return e=t||e,"none"===d.css(e,"display")||!d.contains(e.ownerDocument,e)},z=d.access=function(e,t,n,i,o,r,s){var a=0,l=e.length,c=null==n;if("object"===d.type(n))for(a in o=!0,n)d.access(e,t,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,d.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(d(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):r},W=/^(?:checkbox|radio)$/i;!function(){var e=w.createElement("input"),t=w.createElement("div"),n=w.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",u.leadingWhitespace=3===t.firstChild.nodeType,u.tbody=!t.getElementsByTagName("tbody").length,u.htmlSerialize=!!t.getElementsByTagName("link").length,u.html5Clone="<:nav></:nav>"!==w.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),u.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",u.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,u.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){u.noCloneEvent=!1}),t.cloneNode(!0).click()),null==u.deleteExpando){u.deleteExpando=!0;try{delete t.test}catch(e){u.deleteExpando=!1}}}(),function(){var t,n,i=w.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(u[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),u[t+"Bubbles"]=!1===i.attributes[n].expando);i=null}();var V=/^(?:input|select|textarea)$/i,q=/^key/,G=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function Q(){return!1}function Z(){try{return w.activeElement}catch(e){}}function ee(e){var t=te.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}d.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,c,u,h,p,f,m,g,v=d._data(e);if(v){for(n.handler&&(n=(l=n).handler,o=l.selector),n.guid||(n.guid=d.guid++),(s=v.events)||(s=v.events={}),(u=v.handle)||((u=v.handle=function(e){return typeof d===M||e&&d.event.triggered===e.type?void 0:d.event.dispatch.apply(u.elem,arguments)}).elem=e),a=(t=(t||"").match(A)||[""]).length;a--;)f=g=(r=Y.exec(t[a])||[])[1],m=(r[2]||"").split(".").sort(),f&&(c=d.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=d.event.special[f]||{},h=d.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&d.expr.match.needsContext.test(o),namespace:m.join(".")},l),(p=s[f])||((p=s[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,m,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),d.event.global[f]=!0);e=null}},remove:function(e,t,n,i,o){var r,s,a,l,c,u,h,p,f,m,g,v=d.hasData(e)&&d._data(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(A)||[""]).length;c--;)if(f=g=(a=Y.exec(t[c])||[])[1],m=(a[2]||"").split(".").sort(),f){for(h=d.event.special[f]||{},p=u[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=p.length;r--;)s=p[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(p.splice(r,1),s.selector&&p.delegateCount--,h.remove&&h.remove.call(e,s));l&&!p.length&&(h.teardown&&!1!==h.teardown.call(e,m,v.handle)||d.removeEvent(e,f,v.handle),delete u[f])}else for(f in u)d.event.remove(e,f+t[c],n,i,!0);d.isEmptyObject(u)&&(delete v.handle,d._removeData(e,"events"))}},trigger:function(t,n,i,o){var r,s,a,l,u,h,p,f=[i||w],m=c.call(t,"type")?t.type:t,g=c.call(t,"namespace")?t.namespace.split("."):[];if(a=h=i=i||w,3!==i.nodeType&&8!==i.nodeType&&!X.test(m+d.event.triggered)&&(m.indexOf(".")>=0&&(m=(g=m.split(".")).shift(),g.sort()),s=m.indexOf(":")<0&&"on"+m,(t=t[d.expando]?t:new d.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:d.makeArray(n,[t]),u=d.event.special[m]||{},o||!u.trigger||!1!==u.trigger.apply(i,n))){if(!o&&!u.noBubble&&!d.isWindow(i)){for(l=u.delegateType||m,X.test(l+m)||(a=a.parentNode);a;a=a.parentNode)f.push(a),h=a;h===(i.ownerDocument||w)&&f.push(h.defaultView||h.parentWindow||e)}for(p=0;(a=f[p++])&&!t.isPropagationStopped();)t.type=p>1?l:u.bindType||m,(r=(d._data(a,"events")||{})[t.type]&&d._data(a,"handle"))&&r.apply(a,n),(r=s&&a[s])&&r.apply&&d.acceptData(a)&&(t.result=r.apply(a,n),!1===t.result&&t.preventDefault());if(t.type=m,!o&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),n))&&d.acceptData(i)&&s&&i[m]&&!d.isWindow(i)){(h=i[s])&&(i[s]=null),d.event.triggered=m;try{i[m]()}catch(e){}d.event.triggered=void 0,h&&(i[s]=h)}return t.result}},dispatch:function(e){e=d.event.fix(e);var t,n,o,r,s,a=[],l=i.call(arguments),c=(d._data(this,"events")||{})[e.type]||[],u=d.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=d.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,void 0!==(n=((d.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(o=[],r=0;a>r;r++)void 0===o[n=(i=t[r]).selector+" "]&&(o[n]=i.needsContext?d(n,this).index(l)>=0:d.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[d.expando])return e;var t,n,i,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=G.test(o)?this.mouseHooks:q.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new d.Event(r),t=i.length;t--;)e[n=i[t]]=r[n];return e.target||(e.target=r.srcElement||w),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=(i=e.target.ownerDocument||w).documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Z()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===Z()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return d.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return d.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=d.extend(new d.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?d.event.trigger(o,null,t):d.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},d.removeEvent=w.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===M&&(e[i]=null),e.detachEvent(i,n))},d.Event=function(e,t){return this instanceof d.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?K:Q):this.type=e,t&&d.extend(this,t),this.timeStamp=e&&e.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(e,t)},d.Event.prototype={isDefaultPrevented:Q,isPropagationStopped:Q,isImmediatePropagationStopped:Q,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){d.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return(!i||i!==this&&!d.contains(this,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),u.submitBubbles||(d.event.special.submit={setup:function(){return!d.nodeName(this,"form")&&void d.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=d.nodeName(t,"input")||d.nodeName(t,"button")?t.form:void 0;n&&!d._data(n,"submitBubbles")&&(d.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),d._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&d.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!d.nodeName(this,"form")&&void d.event.remove(this,"._submit")}}),u.changeBubbles||(d.event.special.change={setup:function(){return V.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(d.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),d.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),d.event.simulate("change",this,e,!0)})),!1):void d.event.add(this,"beforeactivate._change",function(e){var t=e.target;V.test(t.nodeName)&&!d._data(t,"changeBubbles")&&(d.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||d.event.simulate("change",this.parentNode,e,!0)}),d._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return d.event.remove(this,"._change"),!V.test(this.nodeName)}}),u.focusinBubbles||d.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){d.event.simulate(t,e.target,d.event.fix(e),!0)};d.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=d._data(i,t);o||i.addEventListener(e,n,!0),d._data(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=d._data(i,t)-1;o?d._data(i,t,o):(i.removeEventListener(e,n,!0),d._removeData(i,t))}}}),d.fn.extend({on:function(e,t,n,i,o){var r,s;if("object"==typeof e){for(r in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(r,t,n,e[r],o);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=Q;else if(!i)return this;return 1===o&&(s=i,(i=function(e){return d().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=d.guid++)),this.each(function(){d.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,d(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=Q),this.each(function(){d.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){d.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?d.event.trigger(e,t,n,!0):void 0}});var te="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ne=/ jQuery\d+="(?:null|\d+)"/g,ie=new RegExp("<(?:"+te+")[\\s/>]","i"),oe=/^\s+/,re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,se=/<([\w:]+)/,ae=/<tbody/i,le=/<|&#?\w+;/,ce=/<(?:script|style|link)/i,ue=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^$|\/(?:java|ecma)script/i,he=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:u.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},me=ee(w).appendChild(w.createElement("div"));function ge(e,t){var n,i,o=0,r=typeof e.getElementsByTagName!==M?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==M?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],n=e.childNodes||e;null!=(i=n[o]);o++)!t||d.nodeName(i,t)?r.push(i):d.merge(r,ge(i,t));return void 0===t||t&&d.nodeName(e,t)?d.merge([e],r):r}function ve(e){W.test(e.type)&&(e.defaultChecked=e.checked)}function ye(e,t){return d.nodeName(e,"table")&&d.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function be(e){return e.type=(null!==d.find.attr(e,"type"))+"/"+e.type,e}function Se(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _e(e,t){for(var n,i=0;null!=(n=e[i]);i++)d._data(n,"globalEval",!t||d._data(t[i],"globalEval"))}function Ce(e,t){if(1===t.nodeType&&d.hasData(e)){var n,i,o,r=d._data(e),s=d._data(t,r),a=r.events;if(a)for(n in delete s.handle,s.events={},a)for(i=0,o=a[n].length;o>i;i++)d.event.add(t,n,a[n][i]);s.data&&(s.data=d.extend({},s.data))}}function we(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!u.noCloneEvent&&t[d.expando]){for(i in(o=d._data(t)).events)d.removeEvent(t,i,o.handle);t.removeAttribute(d.expando)}"script"===n&&t.text!==e.text?(be(t).text=e.text,Se(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),u.html5Clone&&e.innerHTML&&!d.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&W.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}fe.optgroup=fe.option,fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td,d.extend({clone:function(e,t,n){var i,o,r,s,a,l=d.contains(e.ownerDocument,e);if(u.html5Clone||d.isXMLDoc(e)||!ie.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(me.innerHTML=e.outerHTML,me.removeChild(r=me.firstChild)),!(u.noCloneEvent&&u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||d.isXMLDoc(e)))for(i=ge(r),a=ge(e),s=0;null!=(o=a[s]);++s)i[s]&&we(o,i[s]);if(t)if(n)for(a=a||ge(e),i=i||ge(r),s=0;null!=(o=a[s]);s++)Ce(o,i[s]);else Ce(e,r);return(i=ge(r,"script")).length>0&&_e(i,!l&&ge(e,"script")),i=a=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,s,a,l,c,h,p=e.length,f=ee(t),m=[],g=0;p>g;g++)if((r=e[g])||0===r)if("object"===d.type(r))d.merge(m,r.nodeType?[r]:r);else if(le.test(r)){for(a=a||f.appendChild(t.createElement("div")),l=(se.exec(r)||["",""])[1].toLowerCase(),h=fe[l]||fe._default,a.innerHTML=h[1]+r.replace(re,"<$1></$2>")+h[2],o=h[0];o--;)a=a.lastChild;if(!u.leadingWhitespace&&oe.test(r)&&m.push(t.createTextNode(oe.exec(r)[0])),!u.tbody)for(o=(r="table"!==l||ae.test(r)?"<table>"!==h[1]||ae.test(r)?0:a:a.firstChild)&&r.childNodes.length;o--;)d.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(d.merge(m,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=f.lastChild}else m.push(t.createTextNode(r));for(a&&f.removeChild(a),u.appendChecked||d.grep(ge(m,"input"),ve),g=0;r=m[g++];)if((!i||-1===d.inArray(r,i))&&(s=d.contains(r.ownerDocument,r),a=ge(f.appendChild(r),"script"),s&&_e(a),n))for(o=0;r=a[o++];)de.test(r.type||"")&&n.push(r);return a=null,f},cleanData:function(e,t){for(var i,o,r,s,a=0,l=d.expando,c=d.cache,h=u.deleteExpando,p=d.event.special;null!=(i=e[a]);a++)if((t||d.acceptData(i))&&(s=(r=i[l])&&c[r])){if(s.events)for(o in s.events)p[o]?d.event.remove(i,o):d.removeEvent(i,o,s.handle);c[r]&&(delete c[r],h?delete i[l]:typeof i.removeAttribute!==M?i.removeAttribute(l):i[l]=null,n.push(r))}}}),d.fn.extend({text:function(e){return z(this,function(e){return void 0===e?d.text(this):this.empty().append((this[0]&&this[0].ownerDocument||w).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ye(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ye(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?d.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||d.cleanData(ge(n)),n.parentNode&&(t&&d.contains(n.ownerDocument,n)&&_e(ge(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&d.cleanData(ge(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&d.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return d.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ne,""):void 0;if(!("string"!=typeof e||ce.test(e)||!u.htmlSerialize&&ie.test(e)||!u.leadingWhitespace&&oe.test(e)||fe[(se.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(re,"<$1></$2>");try{for(;i>n;n++)1===(t=this[n]||{}).nodeType&&(d.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,d.cleanData(ge(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=o.apply([],e);var n,i,r,s,a,l,c=0,h=this.length,p=this,f=h-1,m=e[0],g=d.isFunction(m);if(g||h>1&&"string"==typeof m&&!u.checkClone&&ue.test(m))return this.each(function(n){var i=p.eq(n);g&&(e[0]=m.call(this,n,i.html())),i.domManip(e,t)});if(h&&(n=(l=d.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(r=(s=d.map(ge(l,"script"),be)).length;h>c;c++)i=l,c!==f&&(i=d.clone(i,!0,!0),r&&d.merge(s,ge(i,"script"))),t.call(this[c],i,c);if(r)for(a=s[s.length-1].ownerDocument,d.map(s,Se),c=0;r>c;c++)i=s[c],de.test(i.type||"")&&!d._data(i,"globalEval")&&d.contains(a,i)&&(i.src?d._evalUrl&&d._evalUrl(i.src):d.globalEval((i.text||i.textContent||i.innerHTML||"").replace(pe,"")));l=n=null}return this}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){d.fn[e]=function(e){for(var n,i=0,o=[],s=d(e),a=s.length-1;a>=i;i++)n=i===a?this:this.clone(!0),d(s[i])[t](n),r.apply(o,n.get());return this.pushStack(o)}});var xe,Ee,Te={};function Oe(t,n){var i,o=d(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(o[0]))?i.display:d.css(o[0],"display");return o.detach(),r}function ke(e){var t=w,n=Te[e];return n||("none"!==(n=Oe(e,t))&&n||((t=((xe=(xe||d("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||xe[0].contentDocument).document).write(),t.close(),n=Oe(e,t),xe.detach()),Te[e]=n),n}u.shrinkWrapBlocks=function(){return null!=Ee?Ee:(Ee=!1,(t=w.getElementsByTagName("body")[0])&&t.style?(e=w.createElement("div"),(n=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),typeof e.style.zoom!==M&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(w.createElement("div")).style.width="5px",Ee=3!==e.offsetWidth),t.removeChild(n),Ee):void 0);var e,t,n};var Ae,Pe,De=/^margin/,$e=new RegExp("^("+J+")(?!px)[a-z%]+$","i"),Ne=/^(top|right|bottom|left)$/;function Me(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}e.getComputedStyle?(Ae=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Pe=function(e,t,n){var i,o,r,s,a=e.style;return s=(n=n||Ae(e))?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==s||d.contains(e.ownerDocument,e)||(s=d.style(e,t)),$e.test(s)&&De.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):w.documentElement.currentStyle&&(Ae=function(e){return e.currentStyle},Pe=function(e,t,n){var i,o,r,s,a=e.style;return null==(s=(n=n||Ae(e))?n[t]:void 0)&&a&&a[t]&&(s=a[t]),$e.test(s)&&!Ne.test(t)&&(i=a.left,(r=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){var t,n,i,o,r,s,a;if((t=w.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=(i=t.getElementsByTagName("a")[0])&&i.style){function l(){var t,n,i,l;(n=w.getElementsByTagName("body")[0])&&n.style&&(t=w.createElement("div"),(i=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,a=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,r="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,(l=t.appendChild(w.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",t.style.width="1px",a=!parseFloat((e.getComputedStyle(l,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",s=0===l[0].offsetHeight),n.removeChild(i))}n.cssText="float:left;opacity:.5",u.opacity="0.5"===n.opacity,u.cssFloat=!!n.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===t.style.backgroundClip,u.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,d.extend(u,{reliableHiddenOffsets:function(){return null==s&&l(),s},boxSizingReliable:function(){return null==r&&l(),r},pixelPosition:function(){return null==o&&l(),o},reliableMarginRight:function(){return null==a&&l(),a}})}}(),d.swap=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in o=n.apply(e,i||[]),t)e.style[r]=s[r];return o};var Ie=/alpha\([^)]*\)/i,Re=/opacity\s*=\s*([^)]*)/,Le=/^(none|table(?!-c[ea]).+)/,Fe=new RegExp("^("+J+")(.*)$","i"),He=new RegExp("^([+-])=("+J+")","i"),je={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"},Be=["Webkit","O","Moz","ms"];function Ue(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=Be.length;o--;)if((t=Be[o]+n)in e)return t;return i}function ze(e,t){for(var n,i,o,r=[],s=0,a=e.length;a>s;s++)(i=e[s]).style&&(r[s]=d._data(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&U(i)&&(r[s]=d._data(i,"olddisplay",ke(i.nodeName)))):(o=U(i),(n&&"none"!==n||!o)&&d._data(i,"olddisplay",o?n:d.css(i,"display"))));for(s=0;a>s;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none"));return e}function We(e,t,n){var i=Fe.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Ve(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=d.css(e,n+B[r],!0,o)),i?("content"===n&&(s-=d.css(e,"padding"+B[r],!0,o)),"margin"!==n&&(s-=d.css(e,"border"+B[r]+"Width",!0,o))):(s+=d.css(e,"padding"+B[r],!0,o),"padding"!==n&&(s+=d.css(e,"border"+B[r]+"Width",!0,o)));return s}function qe(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=Ae(e),s=u.boxSizing&&"border-box"===d.css(e,"boxSizing",!1,r);if(0>=o||null==o){if((0>(o=Pe(e,t,r))||null==o)&&(o=e.style[t]),$e.test(o))return o;i=s&&(u.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+Ve(e,t,n||(s?"border":"content"),i,r)+"px"}function Ge(e,t,n,i,o){return new Ge.prototype.init(e,t,n,i,o)}d.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pe(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:u.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=d.camelCase(t),l=e.style;if(t=d.cssProps[a]||(d.cssProps[a]=Ue(l,a)),s=d.cssHooks[t]||d.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];if("string"===(r=typeof n)&&(o=He.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(d.css(e,t)),r="number"),null!=n&&n==n&&("number"!==r||d.cssNumber[a]||(n+="px"),u.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,i)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,i){var o,r,s,a=d.camelCase(t);return t=d.cssProps[a]||(d.cssProps[a]=Ue(e.style,a)),(s=d.cssHooks[t]||d.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Pe(e,t,i)),"normal"===r&&t in Je&&(r=Je[t]),""===n||n?(o=parseFloat(r),!0===n||d.isNumeric(o)?o||0:r):r}}),d.each(["height","width"],function(e,t){d.cssHooks[t]={get:function(e,n,i){return n?Le.test(d.css(e,"display"))&&0===e.offsetWidth?d.swap(e,je,function(){return qe(e,t,i)}):qe(e,t,i):void 0},set:function(e,n,i){var o=i&&Ae(e);return We(0,n,i?Ve(e,t,i,u.boxSizing&&"border-box"===d.css(e,"boxSizing",!1,o),o):0)}}}),u.opacity||(d.cssHooks.opacity={get:function(e,t){return Re.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=d.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===d.trim(r.replace(Ie,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=Ie.test(r)?r.replace(Ie,o):r+" "+o)}}),d.cssHooks.marginRight=Me(u.reliableMarginRight,function(e,t){return t?d.swap(e,{display:"inline-block"},Pe,[e,"marginRight"]):void 0}),d.each({margin:"",padding:"",border:"Width"},function(e,t){d.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+B[i]+t]=r[i]||r[i-2]||r[0];return o}},De.test(e)||(d.cssHooks[e+t].set=We)}),d.fn.extend({css:function(e,t){return z(this,function(e,t,n){var i,o,r={},s=0;if(d.isArray(t)){for(i=Ae(e),o=t.length;o>s;s++)r[t[s]]=d.css(e,t[s],!1,i);return r}return void 0!==n?d.style(e,t,n):d.css(e,t)},e,t,arguments.length>1)},show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){U(this)?d(this).show():d(this).hide()})}}),d.Tween=Ge,Ge.prototype={constructor:Ge,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(d.cssNumber[n]?"":"px")},cur:function(){var e=Ge.propHooks[this.prop];return e&&e.get?e.get(this):Ge.propHooks._default.get(this)},run:function(e){var t,n=Ge.propHooks[this.prop];return this.pos=t=this.options.duration?d.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=d.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){d.fx.step[e.prop]?d.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[d.cssProps[e.prop]]||d.cssHooks[e.prop])?d.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},d.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},d.fx=Ge.prototype.init,d.fx.step={};var Xe,Ye,Ke,Qe,Ze,et,tt,nt=/^(?:toggle|show|hide)$/,it=new RegExp("^(?:([+-])=|)("+J+")([a-z%]*)$","i"),ot=/queueHooks$/,rt=[function(e,t,n){var i,o,r,s,a,l,c,h=this,p={},f=e.style,m=e.nodeType&&U(e),g=d._data(e,"fxshow");for(i in n.queue||(null==(a=d._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,d.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=d.css(e,"display"),"inline"===("none"===c?d._data(e,"olddisplay")||ke(e.nodeName):c)&&"none"===d.css(e,"float")&&(u.inlineBlockNeedsLayout&&"inline"!==ke(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.shrinkWrapBlocks()||h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),t)if(o=t[i],nt.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||d.style(e,i)}else c=void 0;if(d.isEmptyObject(p))"inline"===("none"===c?ke(e.nodeName):c)&&(f.display=c);else for(i in g?"hidden"in g&&(m=g.hidden):g=d._data(e,"fxshow",{}),r&&(g.hidden=!m),m?d(e).show():h.done(function(){d(e).hide()}),h.done(function(){var t;for(t in d._removeData(e,"fxshow"),p)d.style(e,t,p[t])}),p)s=ct(m?g[i]:0,i,h),i in g||(g[i]=s.start,m&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],st={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),o=it.exec(t),r=o&&o[3]||(d.cssNumber[e]?"":"px"),s=(d.cssNumber[e]||"px"!==r&&+i)&&it.exec(d.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==r)for(r=r||s[3],o=o||[],s=+i||1;s/=a=a||".5",d.style(n.elem,e,s+r),a!==(a=n.cur()/i)&&1!==a&&--l;);return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};function at(){return setTimeout(function(){Xe=void 0}),Xe=d.now()}function lt(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)i["margin"+(n=B[o])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var i,o=(st[t]||[]).concat(st["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,t,e))return i}function ut(e,t,n){var i,o,r=0,s=rt.length,a=d.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Xe||at(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),r=0,s=c.tweens.length;s>r;r++)c.tweens[r].run(i);return a.notifyWith(e,[c,i,n]),1>i&&s?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:d.extend({},t),opts:d.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xe||at(),duration:n.duration,tweens:[],createTween:function(t,n){var i=d.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,i,o,r,s;for(n in e)if(o=t[i=d.camelCase(n)],r=e[n],d.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=d.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,c.opts.specialEasing);s>r;r++)if(i=rt[r].call(c,e,u,c.opts))return i;return d.map(u,ct,c),d.isFunction(c.opts.start)&&c.opts.start.call(e,c),d.fx.timer(d.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}d.Animation=d.extend(ut,{tweener:function(e,t){d.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],st[n]=st[n]||[],st[n].unshift(t)},prefilter:function(e,t){t?rt.unshift(e):rt.push(e)}}),d.speed=function(e,t,n){var i=e&&"object"==typeof e?d.extend({},e):{complete:n||!n&&t||d.isFunction(e)&&e,duration:e,easing:n&&t||t&&!d.isFunction(t)&&t};return i.duration=d.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in d.fx.speeds?d.fx.speeds[i.duration]:d.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){d.isFunction(i.old)&&i.old.call(this),i.queue&&d.dequeue(this,i.queue)},i},d.fn.extend({fadeTo:function(e,t,n,i){return this.filter(U).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=d.isEmptyObject(e),r=d.speed(t,n,i),s=function(){var t=ut(this,d.extend({},e),r);(o||d._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=d.timers,s=d._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ot.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));(t||!n)&&d.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=d._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=d.timers,s=i?i.length:0;for(n.finish=!0,d.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),d.each(["toggle","show","hide"],function(e,t){var n=d.fn[t];d.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,i,o)}}),d.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){d.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),d.timers=[],d.fx.tick=function(){var e,t=d.timers,n=0;for(Xe=d.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||d.fx.stop(),Xe=void 0},d.fx.timer=function(e){d.timers.push(e),e()?d.fx.start():d.timers.pop()},d.fx.interval=13,d.fx.start=function(){Ye||(Ye=setInterval(d.fx.tick,d.fx.interval))},d.fx.stop=function(){clearInterval(Ye),Ye=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(e,t){return e=d.fx&&d.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},(Qe=w.createElement("div")).setAttribute("className","t"),Qe.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",et=Qe.getElementsByTagName("a")[0],tt=(Ze=w.createElement("select")).appendChild(w.createElement("option")),Ke=Qe.getElementsByTagName("input")[0],et.style.cssText="top:1px",u.getSetAttribute="t"!==Qe.className,u.style=/top/.test(et.getAttribute("style")),u.hrefNormalized="/a"===et.getAttribute("href"),u.checkOn=!!Ke.value,u.optSelected=tt.selected,u.enctype=!!w.createElement("form").enctype,Ze.disabled=!0,u.optDisabled=!tt.disabled,(Ke=w.createElement("input")).setAttribute("value",""),u.input=""===Ke.getAttribute("value"),Ke.value="t",Ke.setAttribute("type","radio"),u.radioValue="t"===Ke.value;var dt=/\r/g;d.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=d.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,d(this).val()):e)?o="":"number"==typeof o?o+="":d.isArray(o)&&(o=d.map(o,function(e){return null==e?"":e+""})),(t=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=d.valHooks[o.type]||d.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(dt,""):null==n?"":n:void 0}}),d.extend({valHooks:{option:{get:function(e){var t=d.find.attr(e,"value");return null!=t?t:d.trim(d.text(e))}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(!(!(n=i[l]).selected&&l!==o||(u.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&d.nodeName(n.parentNode,"optgroup"))){if(t=d(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=d.makeArray(t),s=o.length;s--;)if(i=o[s],d.inArray(d.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(e){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),o}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(e,t){return d.isArray(t)?e.checked=d.inArray(d(e).val(),t)>=0:void 0}},u.checkOn||(d.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ht,pt,ft=d.expr.attrHandle,mt=/^(?:checked|selected)$/i,gt=u.getSetAttribute,vt=u.input;d.fn.extend({attr:function(e,t){return z(this,d.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){d.removeAttr(this,e)})}}),d.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===M?d.prop(e,t,n):(1===r&&d.isXMLDoc(e)||(t=t.toLowerCase(),i=d.attrHooks[t]||(d.expr.match.bool.test(t)?pt:ht)),void 0===n?i&&"get"in i&&null!==(o=i.get(e,t))?o:null==(o=d.find.attr(e,t))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void d.removeAttr(e,t))},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(A);if(r&&1===e.nodeType)for(;n=r[o++];)i=d.propFix[n]||n,d.expr.match.bool.test(n)?vt&&gt||!mt.test(n)?e[i]=!1:e[d.camelCase("default-"+n)]=e[i]=!1:d.attr(e,n,""),e.removeAttribute(gt?n:i)},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&d.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),pt={set:function(e,t,n){return!1===t?d.removeAttr(e,n):vt&&gt||!mt.test(n)?e.setAttribute(!gt&&d.propFix[n]||n,n):e[d.camelCase("default-"+n)]=e[n]=!0,n}},d.each(d.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ft[t]||d.find.attr;ft[t]=vt&&gt||!mt.test(t)?function(e,t,i){var o,r;return i||(r=ft[t],ft[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,ft[t]=r),o}:function(e,t,n){return n?void 0:e[d.camelCase("default-"+t)]?t.toLowerCase():null}}),vt&&gt||(d.attrHooks.value={set:function(e,t,n){return d.nodeName(e,"input")?void(e.defaultValue=t):ht&&ht.set(e,t,n)}}),gt||(ht={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},ft.id=ft.name=ft.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},d.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:ht.set},d.attrHooks.contenteditable={set:function(e,t,n){ht.set(e,""!==t&&t,n)}},d.each(["width","height"],function(e,t){d.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),u.style||(d.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var yt=/^(?:input|select|textarea|button|object)$/i,bt=/^(?:a|area)$/i;d.fn.extend({prop:function(e,t){return z(this,d.prop,e,t,arguments.length>1)},removeProp:function(e){return e=d.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),d.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return(1!==r||!d.isXMLDoc(e))&&(t=d.propFix[t]||t,o=d.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=d.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}}}),u.hrefNormalized||d.each(["href","src"],function(e,t){d.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),u.optSelected||(d.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this}),u.enctype||(d.propFix.enctype="encoding");var St=/[\t\r\n\f]/g;d.fn.extend({addClass:function(e){var t,n,i,o,r,s,a=0,l=this.length,c="string"==typeof e&&e;if(d.isFunction(e))return this.each(function(t){d(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(A)||[];l>a;a++)if(i=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(St," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=d.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(d.isFunction(e))return this.each(function(t){d(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(A)||[];l>a;a++)if(i=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(St," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=e?d.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(d.isFunction(e)?function(n){d(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,o=d(this),r=e.match(A)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===M||"boolean"===n)&&(this.className&&d._data(this,"__className__",this.className),this.className=this.className||!1===e?"":d._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(St," ").indexOf(t)>=0)return!0;return!1}}),d.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){d.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),d.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var _t=d.now(),Ct=/\?/,wt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;d.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,o=d.trim(t+"");return o&&!d.trim(o.replace(wt,function(e,t,o,r){return n&&t&&(i=0),0===i?e:(n=o||t,i+=!r-!o,"")}))?Function("return "+o)():d.error("Invalid JSON: "+t)},d.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||d.error("Invalid XML: "+t),n};var xt,Et,Tt=/#.*$/,Ot=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,At=/^(?:GET|HEAD)$/,Pt=/^\/\//,Dt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$t={},Nt={},Mt="*/".concat("*");try{Et=location.href}catch(e){(Et=w.createElement("a")).href="",Et=Et.href}function It(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(A)||[];if(d.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Rt(e,t,n,i){var o={},r=e===Nt;function s(a){var l;return o[a]=!0,d.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Lt(e,t){var n,i,o=d.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&d.extend(!0,e,n),e}xt=Dt.exec(Et.toLowerCase())||[],d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":d.parseJSON,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,d.ajaxSettings),t):Lt(d.ajaxSettings,e)},ajaxPrefilter:It($t),ajaxTransport:It(Nt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,r,s,a,l,c,u=d.ajaxSetup({},t),h=u.context||u,p=u.context&&(h.nodeType||h.jquery)?d(h):d.event,f=d.Deferred(),m=d.Callbacks("once memory"),g=u.statusCode||{},v={},y={},b=0,S="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=kt.exec(r);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||S;return l&&l.abort(t),C(0,t),this}};if(f.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,u.url=((e||u.url||Et)+"").replace(Tt,"").replace(Pt,xt[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=d.trim(u.dataType||"*").toLowerCase().match(A)||[""],null==u.crossDomain&&(n=Dt.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===xt[1]&&n[2]===xt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(xt[3]||("http:"===xt[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=d.param(u.data,u.traditional)),Rt($t,u,t,_),2===b)return _;for(i in(a=u.global)&&0==d.active++&&d.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!At.test(u.type),o=u.url,u.hasContent||(u.data&&(o=u.url+=(Ct.test(o)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=Ot.test(o)?o.replace(Ot,"$1_="+_t++):o+(Ct.test(o)?"&":"?")+"_="+_t++)),u.ifModified&&(d.lastModified[o]&&_.setRequestHeader("If-Modified-Since",d.lastModified[o]),d.etag[o]&&_.setRequestHeader("If-None-Match",d.etag[o])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&_.setRequestHeader("Content-Type",u.contentType),_.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Mt+"; q=0.01":""):u.accepts["*"]),u.headers)_.setRequestHeader(i,u.headers[i]);if(u.beforeSend&&(!1===u.beforeSend.call(h,_,u)||2===b))return _.abort();for(i in S="abort",{success:1,error:1,complete:1})_[i](u[i]);if(l=Rt(Nt,u,t,_)){_.readyState=1,a&&p.trigger("ajaxSend",[_,u]),u.async&&u.timeout>0&&(s=setTimeout(function(){_.abort("timeout")},u.timeout));try{b=1,l.send(v,C)}catch(e){if(!(2>b))throw e;C(-1,e)}}else C(-1,"No Transport");function C(e,t,n,i){var c,v,y,S,C,w=t;2!==b&&(b=2,s&&clearTimeout(s),l=void 0,r=i||"",_.readyState=e>0?4:0,c=e>=200&&300>e||304===e,n&&(S=function(e,t,n){for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}(u,_,n)),S=function(e,t,n,i){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(u,S,_,c),c?(u.ifModified&&((C=_.getResponseHeader("Last-Modified"))&&(d.lastModified[o]=C),(C=_.getResponseHeader("etag"))&&(d.etag[o]=C)),204===e||"HEAD"===u.type?w="nocontent":304===e?w="notmodified":(w=S.state,v=S.data,c=!(y=S.error))):(y=w,(e||!w)&&(w="error",0>e&&(e=0))),_.status=e,_.statusText=(t||w)+"",c?f.resolveWith(h,[v,w,_]):f.rejectWith(h,[_,w,y]),_.statusCode(g),g=void 0,a&&p.trigger(c?"ajaxSuccess":"ajaxError",[_,u,c?v:y]),m.fireWith(h,[_,w]),a&&(p.trigger("ajaxComplete",[_,u]),--d.active||d.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return d.get(e,t,n,"json")},getScript:function(e,t){return d.get(e,void 0,t,"script")}}),d.each(["get","post"],function(e,t){d[t]=function(e,n,i,o){return d.isFunction(n)&&(o=o||i,i=n,n=void 0),d.ajax({url:e,type:t,dataType:o,data:n,success:i})}}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){d.fn[t]=function(e){return this.on(t,e)}}),d._evalUrl=function(e){return d.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},d.fn.extend({wrapAll:function(e){if(d.isFunction(e))return this.each(function(t){d(this).wrapAll(e.call(this,t))});if(this[0]){var t=d(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(d.isFunction(e)?function(t){d(this).wrapInner(e.call(this,t))}:function(){var t=d(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=d.isFunction(e);return this.each(function(n){d(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){d.nodeName(this,"body")||d(this).replaceWith(this.childNodes)}).end()}}),d.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!u.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||d.css(e,"display"))},d.expr.filters.visible=function(e){return!d.expr.filters.hidden(e)};var Ft=/%20/g,Ht=/\[\]$/,jt=/\r?\n/g,Jt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Ut(e,t,n,i){var o;if(d.isArray(t))d.each(t,function(t,o){n||Ht.test(e)?i(e,o):Ut(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==d.type(t))i(e,t);else for(o in t)Ut(e+"["+o+"]",t[o],n,i)}d.param=function(e,t){var n,i=[],o=function(e,t){t=d.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=d.ajaxSettings&&d.ajaxSettings.traditional),d.isArray(e)||e.jquery&&!d.isPlainObject(e))d.each(e,function(){o(this.name,this.value)});else for(n in e)Ut(n,e[n],t,o);return i.join("&").replace(Ft,"+")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=d.prop(this,"elements");return e?d.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!d(this).is(":disabled")&&Bt.test(this.nodeName)&&!Jt.test(e)&&(this.checked||!W.test(e))}).map(function(e,t){var n=d(this).val();return null==n?null:d.isArray(n)?d.map(n,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}}):{name:t.name,value:n.replace(jt,"\r\n")}}).get()}}),d.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&qt()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:qt;var zt=0,Wt={},Vt=d.ajaxSettings.xhr();function qt(){try{return new e.XMLHttpRequest}catch(e){}}e.ActiveXObject&&d(e).on("unload",function(){for(var e in Wt)Wt[e](void 0,!0)}),u.cors=!!Vt&&"withCredentials"in Vt,(Vt=u.ajax=!!Vt)&&d.ajaxTransport(function(e){var t;if(!e.crossDomain||u.cors)return{send:function(n,i){var o,r=e.xhr(),s=++zt;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)r[o]=e.xhrFields[o];for(o in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(e.hasContent&&e.data||null),t=function(n,o){var a,l,c;if(t&&(o||4===r.readyState))if(delete Wt[s],t=void 0,r.onreadystatechange=d.noop,o)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{l=r.statusText}catch(e){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&i(a,l,c,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Wt[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return d.globalEval(e),e}}}),d.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),d.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=w.head||d("head")[0]||w.documentElement;return{send:function(i,o){(t=w.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Gt=[],Xt=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||d.expando+"_"+_t++;return this[e]=!0,e}}),d.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,a=!1!==t.jsonp&&(Xt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=d.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Xt,"$1"+o):!1!==t.jsonp&&(t.url+=(Ct.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||d.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Gt.push(o)),s&&d.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),d.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||w;var i=b.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=d.buildFragment([e],t,o),o&&o.length&&d(o).remove(),d.merge([],i.childNodes))};var Yt=d.fn.load;d.fn.load=function(e,t,n){if("string"!=typeof e&&Yt)return Yt.apply(this,arguments);var i,o,r,s=this,a=e.indexOf(" ");return a>=0&&(i=d.trim(e.slice(a,e.length)),e=e.slice(0,a)),d.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&d.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?d("<div>").append(d.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},d.expr.filters.animated=function(e){return d.grep(d.timers,function(t){return e===t.elem}).length};var Kt=e.document.documentElement;function Qt(e){return d.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}d.offset={setOffset:function(e,t,n){var i,o,r,s,a,l,c=d.css(e,"position"),u=d(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),r=d.css(e,"top"),l=d.css(e,"left"),("absolute"===c||"fixed"===c)&&d.inArray("auto",[r,l])>-1?(s=(i=u.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),d.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+o),"using"in t?t.using.call(e,h):u.css(h)}},d.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){d.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;return r?(t=r.documentElement,d.contains(t,o)?(typeof o.getBoundingClientRect!==M&&(i=o.getBoundingClientRect()),n=Qt(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===d.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),d.nodeName(e[0],"html")||(n=e.offset()),n.top+=d.css(e[0],"borderTopWidth",!0),n.left+=d.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-d.css(i,"marginTop",!0),left:t.left-n.left-d.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Kt;e&&!d.nodeName(e,"html")&&"static"===d.css(e,"position");)e=e.offsetParent;return e||Kt})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);d.fn[e]=function(i){return z(this,function(e,i,o){var r=Qt(e);return void 0===o?r?t in r?r[t]:r.document.documentElement[i]:e[i]:void(r?r.scrollTo(n?d(r).scrollLeft():o,n?o:d(r).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),d.each(["top","left"],function(e,t){d.cssHooks[t]=Me(u.pixelPosition,function(e,n){return n?(n=Pe(e,t),$e.test(n)?d(e).position()[t]+"px":n):void 0})}),d.each({Height:"height",Width:"width"},function(e,t){d.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){d.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return d.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?d.css(t,n,s):d.style(t,n,i,s)},t,r?i:void 0,r,null)}})}),d.fn.size=function(){return this.length},d.fn.andSelf=d.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var Zt=e.jQuery,en=e.$;return d.noConflict=function(t){return e.$===d&&(e.$=en),t&&e.jQuery===d&&(e.jQuery=Zt),d},typeof t===M&&(e.jQuery=e.$=d),d}),function(e){var t={init:function(n){var i=e.extend({location:"top",offsetX:0,offsetY:-10,trackMouse:!1,trackMouseCentered:!0,suppressOnClick:!0,suppressWhileToggled:!0,tooltipClass:"jsTooltip",fadeSpeed:150,allowHover:!0,tooltipParent:"body",correctForScreenSize:!0,sizeCorrectionXPadding:15,sizeCorrectionYPadding:10,useClickEvent:!1,useContextMenuEvent:!1,preventDefault:!0,inheritParentMinWidth:!1,parentActiveCSSClass:!1,dataName:"tooltipContent",funcName:"tooltipFunc",func:!1,disableOnTouchDevice:!1,childActiveCSSClass:!1,destroyWhenDone:!0},n);return this.each(function(){var n=e(this);i.useClickEvent?n.bind("click.tooltip",t.show):i.useContextMenuEvent?n.bind("contextmenu.tooltip",t.show):n.bind("mouseenter.tooltip",t.show),n.bind("mouseleave.tooltip",t.hide),i.disableOnTouchDevice&&(n.bind("touchstart.tooltip",function(e){n.data("inTouchEvent",!0)}),n.bind("mouseup.tooltip",function(e){n.data("inTouchEvent",!1)})),n.data("tooltip.settings",i)})},destroy:function(){return this.each(function(){e(window).unbind(".tooltip")})},gettooltip:function(n,i){var o=e(n),r=o.data("tooltip.element");if(!r){r=e("<div />"),i.suppressOnClick&&r.bind("click.tooltip",jQuery.proxy(t.hide,n)),r.hide(),r.addClass(i.tooltipClass),r.css({position:"absolute","z-index":1500});var s=o.data("tooltip-type"),a="";if(i.dataAttr?a=o.attr(i.dataAttr):i.dataName&&(a=o.data(i.dataName)),"text"==s)r.text(a);else if("selector"==s){var l=e(a,o.parent());r.data("originalParent",l.parent()),r.append(l.show()),r.data("preserveContent",!0)}else r.html(a);e(i.tooltipParent||o.parent()).append(r),o.data("tooltip.element",r)}var c=i.funcName&&e(n).data(i.funcName);return c&&("text"==s?r.text(window[c](n)):r.html(window[c](n))),i.func&&i.func.bind(r)(n),r},updateposition:function(){var n={},i=e(this).data("tooltip.settings"),o=t.gettooltip(this,i),r=e(this).offset();switch("body"!=i.tooltipParent&&(r=e(this).position()),i.location){case"top":n={left:r.left+i.offsetX,top:r.top-o.outerHeight()+i.offsetY};break;case"bottom":n={left:r.left+i.offsetX,top:r.top+e(this).outerHeight()+i.offsetY};break;case"bottom left":n={left:r.left+i.offsetX-o.outerWidth(),top:r.top+e(this).outerHeight()+i.offsetY};break;default:console.log("Invalid location passed to v_tooltip: %s",i.location)}if(i.correctForScreenSize){var s=n.left+o.width(),a=e(window).width()-i.sizeCorrectionXPadding+e(window).scrollLeft(),l=e(window).scrollLeft()+i.sizeCorrectionXPadding;s>a&&(n.left=a-o.width()-i.sizeCorrectionXPadding),n.left<l&&(n.left=l),n.top<0&&(n.top=r.top+e(this).height()+i.sizeCorrectionYPadding-i.offsetY)}o.css(n)},reposition:function(n){var i={},o=e(this).data("tooltip.settings"),r=t.gettooltip(this,o),s=e(this).offset();if("body"!=o.tooltipParent&&(s=e(this).position()),o.trackMouse)o.trackMouseCentered?i.left=n.pageX-r.outerWidth()/2:i.left=n.pageX+o.offsetY,"top"==o.location?i.top=n.pageY-r.outerHeight()+o.offsetY:i.top=n.pageY+o.offsetY;else switch(o.location){case"top":i={left:s.left+o.offsetX,top:s.top-r.outerHeight()+o.offsetY};break;case"bottom":var a=s.left;i={left:a+=o.offsetX,top:s.top+e(this).outerHeight()+o.offsetY};break;case"bottom left":i={left:s.left+o.offsetX-r.outerWidth()+$J(this).outerWidth(),top:s.top+e(this).outerHeight()+o.offsetY};break;case"mouse":i={left:n.pageX+o.offsetX,top:n.pageY+o.offsetY};default:console.log("Invalid location passed to v_tooltip: %s",o.location)}if(o.correctForScreenSize){var l=i.left+r.width(),c=e(window).width()-o.sizeCorrectionXPadding+e(window).scrollLeft(),u=e(window).scrollLeft()+o.sizeCorrectionXPadding;l>c&&(i.left=c-r.width()-o.sizeCorrectionXPadding),i.left<u&&(i.left=u),i.top<0&&(i.top=s.top+e(this).height()+o.sizeCorrectionYPadding-o.offsetY)}r.css(i)},show:function(n){var i=e(this).data("tooltip.settings")||{};if(!i.disableOnTouchDevice||!e(this).data("inTouchEvent")){var o=t.gettooltip(this,i);if(!o.is(":empty")&&("click"!=n.type||n.currentTarget==this)){if(i.suppressWhileToggled&&e(this).hasClass("toggled"))return!1;var r=this;if(o.find("img").on("load",function(){jQuery.proxy(t.updateposition,r)()}),i.preventDefault&&n.preventDefault(),i.parentActiveCSSClass&&e(this).addClass(i.parentActiveCSSClass),i.inheritParentMinWidth){var s=e(this).outerWidth(),a=o.outerWidth()-o.width();o.css({"min-width":+(s-a)+"px"})}i.fadeSpeed>0?(o.stop(!0,!0),o.fadeTo(i.fadeSpeed,1)):o.show(),i.allowHover&&(i.useClickEvent?o.bind("click.tooltip",jQuery.proxy(t.show,this)):i.useContextMenuEvent?o.bind("contextmenu.tooltip",jQuery.proxy(t.show,this)):o.bind("mouseenter.tooltip",jQuery.proxy(t.show,this)),o.bind("mouseleave.tooltip",jQuery.proxy(t.hide,this))),i.trackMouse?e(this).bind("mousemove.tooltip",t.reposition):jQuery.proxy(t.reposition,this)(n),i.childActiveCSSClass&&(o.css("opacity"),o.addClass(i.childActiveCSSClass)),o.css("pointer-events","auto"),e(this).trigger("v_tooltip_shown",[o])}}},hide:function(n){var i=e(this).data("tooltip.element"),o=e(this).data("tooltip.settings")||{};if(i&&i.length){if(n&&"click"!=n.type){if(n.relatedTarget&&(this==n.relatedTarget||this.contains(n.relatedTarget)))return;if(n.relatedTarget&&(n.relatedTarget==i[0]||i[0].contains(n.relatedTarget)))return}o.trackMouse&&e(this).unbind("mousemove.tooltip"),i.unbind("mouseenter.tooltip"),i.unbind("mouseleave.tooltip"),o.parentActiveCSSClass&&e(this).removeClass(o.parentActiveCSSClass),o.fadeSpeed>0&&i.is(":visible")?(i.stop(),i.fadeTo(o.fadeSpeed,0,function(){o.destroyWhenDone&&t.destroytooltip(i)})):o.childActiveCSSClass?(i.css("opacity"),i.removeClass(o.childActiveCSSClass),o.destroyWhenDone&&i.on("transitionend",function(){t.destroytooltip(i)})):o.destroyWhenDone&&t.destroytooltip(i),o.destroyWhenDone?e(this).removeData("tooltip.element"):i.css("pointer-events","none"),e(this).trigger("v_tooltip_hidden")}},destroytooltip:function(t){t&&(e(t).data("preserveContent")&&e(t.data("originalParent")).append(e(t).children().hide()),e(t).remove())}};e.fn.v_tooltip=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.tooltip"):t.init.apply(this,arguments)}}(jQuery),Steam={sm_bInitialized:!1,sm_bUserInClient:!1,sm_bUserInGameOverlay:!1,sm_bUserInTenfootBrowser:!1,BIsUserInSteamClient:function(){return Steam.sm_bInitialized||Steam.Init(),Steam.sm_bUserInClient},BIsUserInGameOverlay:function(){return Steam.sm_bInitialized||Steam.Init(),Steam.sm_bUserInGameOverlay},BIsUserInSteamTenfootBrowser:function(){return Steam.sm_bInitialized||Steam.Init(),Steam.sm_bUserInTenfootBrowser},BIsUserInClientOrOverlay:function(){return Steam.sm_bInitialized||Steam.Init(),Steam.sm_bUserInClient||Steam.sm_bUserInGameOverlay},GetClientPackageVersion:function(){if(!Steam.BIsUserInClientOrOverlay())return 0;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Valve Steam [^\/]*\/([0-9]*)/);if(e&&2==e.length)return e[1]}return 0},Init:function(){var e=function(e,t){return!!window.location.href.match("[?&]"+t+"=")||!("undefined"==typeof navigator||!navigator.userAgent||-1==navigator.userAgent.indexOf(e))};Steam.sm_bUserInTenfootBrowser=e("Valve Steam Tenfoot","force_tenfoot_client_view"),Steam.sm_bUserInGameOverlay=e("Valve Steam GameOverlay","force_overlay_view"),Steam.sm_bUserInClient=Steam.sm_bUserInTenfootBrowser||e("Valve Steam Client","force_client_view"),Steam.sm_bInitialized=!0},LinkInNewWindow:function(e){Steam.BIsUserInSteamClient()&&!Steam.BIsUserInSteamTenfootBrowser()?e.attr("href","steam://openurl_external/"+e.attr("href")):e.attr("target","_blank")}},CModal.prototype.OnDismiss=function(e){this.m_fnOnDismiss=e},CModal.prototype.OnResize=function(e){this.m_fnOnResize=e},CModal.prototype.GetContent=function(){return this.m_$Content},CModal.prototype.GetBoundOnResizeEvent=function(){return this.m_fnSizing},CModal.prototype.OnContentChanged=function(){this.m_$StandardContent=this.m_$Content.find(".newmodal_content"),this.m_$StandardContent.length||(this.m_$StandardContent=this.m_$Content),this.m_$SizedContent=this.m_$Content.find(".newmodal_sized_content")},CModal.prototype.SetRemoveContentOnDismissal=function(e){this.m_bRemoveContentOnDismissal=e},CModal.prototype.SetDismissOnBackgroundClick=function(e){this.m_bDismissOnBackgroundClick=e},CModal.prototype.SetMaxWidth=function(e){this.m_nMaxWidth=e,this.m_bVisible&&this.AdjustSizing()},CModal.prototype.SetMaxHeight=function(e){this.m_nMaxHeight=e,this.m_bVisible&&this.AdjustSizing()},CModal.prototype.AdjustSizing=function(e){if(this.m_$Content){var t=window.UseTouchFriendlyMode&&UseTouchFriendlyMode(),n="BackCompat"===document.compatMode?document.body.clientWidth:$J(window).width(),i="BackCompat"===document.compatMode?document.body.clientHeight:$J(window).height(),o=Math.max(n-(t?24:80),t?200:500),r=Math.floor(i-120);this.m_nMaxWidth&&o>this.m_nMaxWidth&&(o=this.m_nMaxWidth),this.m_nMaxHeight&&r>this.m_nMaxHeight&&(r=this.m_nMaxHeight),this.m_$SizedContent.css("min-height",r-18+"px"),this.m_fnOnResize&&this.m_fnOnResize(o-40,r),e||(this.m_$Content.css("max-width",o+"px"),t?this.m_$StandardContent.css("max-height",""):this.m_$StandardContent.css("max-height",r+"px"));var s=this.m_$Content.width(),a=this.m_$Content.height(),l=Math.max(Math.floor((n-s)/2),12),c=Math.max(Math.floor((i-a)/2),12);t?(l+=this.m_nInitialOffsetLeft,c+=this.m_nInitialOffsetTop,this.m_$Content.css("position","absolute")):this.m_$Content.css("position","fixed"),e?(this.m_$Content.animate({"max-width":o,left:l,top:c},e),this.m_$StandardContent.animate({"max-height":r},e)):(this.m_$Content.css("left",l),this.m_$Content.css("top",c))}},CModal.prototype.Show=function(){this.m_bVisible||(CModal.ShowModalBackground(),this.m_bIgnoreResizeEvents||$J(window).on("resize",null,this.m_fnSizing),CModal.s_$Background.on("click.CModal",this.m_fnBackgroundClick),$J(document).on("keyup.CModal",this.m_fnOnEscapeKeyPress),this.AdjustSizing(),this.m_$Content.show(),this.m_$Content.find("img").load(this.m_fnSizing),this.m_bVisible=!0,CModal.PushActiveModal(this))},CModal.prototype.Dismiss=function(){this.m_bVisible&&(this.m_bVisible=!1,this.m_$Content.hide(),this.m_bIgnoreResizeEvents||$J(window).off("resize",null,this.m_fnSizing),this.m_fnOnDismiss&&this.m_fnOnDismiss(),this.m_bRemoveContentOnDismissal&&(this.m_$Content.remove(),this.m_$Content=null),CModal.PopActiveModal(this),CModal.s_rgModalStack.length||(CModal.s_$Background.off("click.CModal",this.m_fnBackgroundClick),$J(document).off("keyup.CModal",this.m_fnOnEscapeKeyPress),CModal.HideModalBackground()))},CModal.prototype.BIsActiveModal=function(){return CModal.s_rgModalStack.length&&CModal.s_rgModalStack[CModal.s_rgModalStack.length-1]==this},CModal.ShowModalBackground=function(){CModal.s_$Background||(CModal.s_$Background=$J("<div/>",{class:"newmodal_background"}),CModal.s_$Background.css("opacity",0),$J(document.body).append(CModal.s_$Background)),CModal.s_$Background.stop(),CModal.s_$Background.fadeTo(200,.8)},CModal.HideModalBackground=function(){CModal.s_$Background&&(CModal.s_$Background.stop(),CModal.s_$Background.fadeOut(200,0))},CModal.s_rgModalStack=[],CModal.GetActiveModal=function(){return CModal.s_rgModalStack.length?CModal.s_rgModalStack[CModal.s_rgModalStack.length-1]:null},CModal.DismissActiveModal=function(){CModal.s_rgModalStack.length&&CModal.s_rgModalStack[CModal.s_rgModalStack.length-1].Dismiss()},CModal.PushActiveModal=function(e){for(var t=0;t<CModal.s_rgModalStack.length;t++)CModal.s_rgModalStack[t].m_$Content.css("z-index",899);CModal.s_rgModalStack.push(e)},CModal.PopActiveModal=function(e){for(var t=0;t<CModal.s_rgModalStack.length;t++)if(CModal.s_rgModalStack[t]==e){CModal.s_rgModalStack.splice(t,1);break}CModal.s_rgModalStack.length&&CModal.s_rgModalStack[CModal.s_rgModalStack.length-1].m_$Content.css("z-index",1e3)};var MINIPROFILE_ANIM_SPEED=150,MINIPROFILE_DELAY_BEFORE_AJAX=100,MINIPROFILE_DELAY_BEFORE_SHOW=250;function CDelayedAJAXData(e,t){this.m_$Data=null,this.m_bAJAXFailed=!1,this.m_timerDelayedAJAX=null,this.m_bAJAXRequestMade=!1,this.m_msDelayBeforeAJAX=t,this.m_strURL=e,this.m_fnOnAJAXComplete=null}function InitMiniprofileHovers(){var e=$J("<div/>",{class:"miniprofile_hover"}),t=$J("<div/>",{class:"miniprofile_hover_inner shadow_content"}),n=$J("<div/>",{class:"hover_arrow left miniprofile_arrow"});n.append('<div class="miniprofile_arrow_inner"></div>');var i=$J("<div/>",{class:"hover_arrow right miniprofile_arrow"});i.append('<div class="miniprofile_arrow_inner"></div>'),e.append($J('<div class="shadow_ul"></div><div class="shadow_top"></div><div class="shadow_ur"></div><div class="shadow_left"></div><div class="shadow_right"></div><div class="shadow_bl"></div><div class="shadow_bottom"></div><div class="shadow_br"></div>'),t,n,i),e.hide(),$J(document.body).append(e);BindAJAXHovers(e,t,{fnDataFactory:function(e){return new CDelayedAJAXData("miniprofile/"+e,MINIPROFILE_DELAY_BEFORE_AJAX)},fnPositionHover:PositionMiniprofileHover,strDataName:"miniprofile",strURLMatch:"miniprofile"})}function _RegisterAJAXHoverHideFunction(e){"undefined"==typeof g_rgfnHideAJAXHover&&(g_rgfnHideAJAXHover=[],$J(window).blur(HideAJAXHovers)),g_rgfnHideAJAXHover.push(e)}function HideAJAXHovers(){if("undefined"!=typeof g_rgfnHideAJAXHover)for(var e=0;e<g_rgfnHideAJAXHover.length;e++)g_rgfnHideAJAXHover[e]()}function BindAJAXHovers(e,t,n){var i=n.fnDataFactory,o=n.fnPositionHover||PositionMiniprofileHover,r=n.strDataName,s=(n.strURLMatch,function(e){return e.data(r)});n.fnReadKey&&(s=n.fnReadKey);var a=n.strSelector||"[data-"+r+"]",l=n.nDelayBeforeShow||MINIPROFILE_DELAY_BEFORE_SHOW,c={},u=null,d=null,h=function(t){var n="none"!=e.css("display");if(t){var i=c[t];i&&i.CancelAJAX()}d&&(window.clearTimeout(d),d=null),n&&(e.stop(),e.fadeOut(MINIPROFILE_ANIM_SPEED))},p="AjaxHover"+r;return $J(document).on("mouseenter."+p,a,function(){var n,r,a,h,p=$J(this);n=p,r=s(p),a="none"!=e.css("display"),(h=c[r])||(h=c[r]=i(r)),u==h&&a?(e.stop(),o(e,n),e.show(),e.fadeTo(MINIPROFILE_ANIM_SPEED,1)):d&&h==u||(u&&u!=h&&u.CancelAJAX(),u=h,d&&(window.clearTimeout(d),d=null),h.QueueAjaxRequestIfNecessary(),d=window.setTimeout(function(){window.clearTimeout(d),d=null,h.RunWhenAJAXReady(function(){h.Show(t),e.stop(),e.css("opacity",""),o(e,n),e.fadeIn(MINIPROFILE_ANIM_SPEED)})},l))}),$J(document).on("click."+p+" mouseleave."+p,a,h),_RegisterAJAXHoverHideFunction(h),{fnCancelHover:h}}function PositionMiniprofileHover(e,t,n){n||(n={});var i=n.bPreferRightSide||!1,o=null!=n.nPxArrowOverlap?n.nPxArrowOverlap:2;e.css("visibility","hidden"),e.show();var r=t.offset();e.css("left",r.left+"px"),e.css("top",r.top+"px");var s=e.children(".shadow_content");s.length||(s=$J(e.children()[0]));var a=e.children(".hover_arrow.left"),l=e.children(".hover_arrow.right"),c=$J(window).scrollTop(),u=$J(window).scrollLeft(),d=$J(window).width(),h=$J(window).height(),p=l,f=d-(r.left-u+t.outerWidth()+s.width()+14),m=r.left-e.width();(m>0||m>f)&&!i||i&&f<14&&m>f?(e.css("left",r.left-e.width()+o+3+"px"),a.hide(),l.show()):(e.css("left",r.left+t.outerWidth()-o+"px"),p=a,a.show(),l.hide());var g=0;t.height()<48&&(g=Math.floor(t.height()/2)-24);var v=r.top-15+g;e.css("top",v+"px");var y=r.top-c+g;if(y+s.height()+35>h){var b=s.height()+35-(h-y),S=s.find(".miniprofile_ingame").length>0?78:24;b=Math.min(s.height()-S,b);var _=r.top-b;e.css("top",_+"px"),p.css("top",30+v-_+"px")}else p.css("top","");e.hide(),e.css("visibility","")}function CEmoticonDelayedAJAXData(e,t){CDelayedAJAXData.apply(this,["economy/emoticonhover/"+e+"/jsonp.js",t]),this.m_strEmoticonName=e}function InitEmoticonHovers(){var e=$J("<div/>",{class:"emoticon_hover"}),t=$J("<div/>",{class:"emoticon_hover_content"});e.append(t,$J("<div/>",{class:"hover_arrow left emoticon_hover_arrow"}),$J("<div/>",{class:"hover_arrow right emoticon_hover_arrow"})),e.hide();var n=function(){$J(document.body).append(e)},i=BindAJAXHovers(e,t,{fnDataFactory:function(e){return n&&(n(),n=null),new CEmoticonDelayedAJAXData(e,50)},fnPositionHover:function(e,t){PositionMiniprofileHover(e,t,{bPreferRightSide:!0,nPxArrowOverlap:0}),t.hasClass("emoticon_option")&&e.css("top",parseInt(e.css("top"))+5)},fnReadKey:function(e){if(e.data("emoticon"))return e.data("emoticon");if(e.attr("src")){var t=e.attr("src").match("emoticon/(.*)$");if(t&&t[1]){var n=t[1];return n.length>1&&(":"==n[0]&&(n=n.substr(1)),":"==n[n.length-1]&&(n=n.substr(0,n.length-1))),n}}return null},strSelector:"img.emoticon",strURLMatch:"emoticonhover",nDelayBeforeShow:50});window.DismissEmoticonHover=i.fnCancelHover}function V_EscapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V_EscapeHTML(e){return String(e).replace(/&/g,"&amp;").replace(/["]/g,"&quot;").replace(/[']/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function v_trim(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function V_ParseJSON(e){if("object"==typeof JSON&&JSON.parse)return JSON.parse(e);e.evalJSON()}function V_ToJSON(e){if("object"==typeof JSON&&JSON.stringify)return JSON.stringify(e);Object.toJSON(e)}function V_IsJSON(e){try{if("object"!=typeof JSON||!JSON.parse)return e.isJSON();if(null!==JSON.parse(e))return!0}catch(e){}return!1}function V_GetCookie(e){var t=document.cookie.match("(^|; )"+e+"=([^;]*)");return t&&t[2]?t[2]:null}function V_SetCookie(e,t,n,i){i||(i="/");var o="";if(void 0!==n&&n){var r=new Date;r.setTime(r.getTime()+864e5*n),o="; expires="+r.toGMTString()}document.cookie=e+"="+t+o+";path="+i}function _GetStorageFromCookie(){var e={},t=V_GetCookie("storage");if(t)try{e=V_ParseJSON(decodeURIComponent(t))}catch(t){e={}}return e}function BInsideIFrame(){try{return window.self!==window.top}catch(e){return!0}}function SetValueLocalStorage(e,t){if(!BInsideIFrame()&&window.localStorage)window.localStorage[e]=t;else{var n=_GetStorageFromCookie();n[e]=t,V_SetCookie("storage",encodeURIComponent(V_ToJSON(n)),365)}}function UnsetValueLocalStorage(e){if(!BInsideIFrame()&&window.localStorage)delete window.localStorage[e];else{var t=_GetStorageFromCookie();delete t[e],V_SetCookie("storage",encodeURIComponent(V_ToJSON(t)),365)}}function GetValueLocalStorage(e,t){return!BInsideIFrame()&&window.localStorage?window.localStorage[e]||t:_GetStorageFromCookie()[e]||t}function DynamicLink_PlayYouTubeVideoInline(e,t){var n=$J(e),i=location.protocol+"//www.youtube.com/embed/"+t+"?showinfo=0&autohide=1&fs=1&hd=1&modestbranding=1&rel=0&showsearch=0&wmode=direct&autoplay=1",o=$J("<div/>",{class:"dynamiclink_youtubeviewvideo"}),r=$J("<div/>",{class:"dynamiclink_youtubeviewvideoembedded",frameborder:"0"}),s=$J("<iframe/>",{frameborder:"0",src:i,allowfullscreen:""});n.length&&(r.append(s),o.append(r),n.after(o),n.remove())}function DynamicLink_PlayVimeoVideoInline(e,t){var n=$J(e),i="https://player.vimeo.com/video/"+t+"?badge=0&autopause=0&autoplay=1&player_id=0",o=$J("<div/>",{class:"dynamiclink_youtubeviewvideo"}),r=$J("<div/>",{class:"dynamiclink_youtubeviewvideoembedded",frameborder:"0"}),s=$J("<iframe/>",{frameborder:"0",src:i,webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""});n.length&&(r.append(s),o.append(r),n.after(o),n.remove())}function DynamicLink_ShowSketchfabModelInline(e,t){var n="https://sketchfab.com/models/"+t.modelid+"/embed?autostart=1",i=$J(e),o=$J("<div/>",{class:"dynamiclink_sketchfabmodelembedded",frameborder:"0"}),r=$J("<iframe/>",{frameborder:"0",mozallowfullscreen:!0,webkitallowfullscreen:!0,src:n});i.length&&(o.append(r),i.after(o),i.remove())}function ReplaceDynamicLink(e,t){var n=$J("#"+e);n.length&&t.length>0&&(n.after(t),n.remove())}function CScrollOffsetWatcher(e,t){this.m_$Element=$J(e),this.nOffsetTop=this.m_$Element.offset().top,this.nBufferHeight=500,this.nOffsetTopTrigger=this.nOffsetTop-this.nBufferHeight,this.fnOnHit=t,CScrollOffsetWatcher.RegisterWatcher(this)}function LoadImageGroupOnScroll(e,t){var n=$J("#"+e);n.length&&new CScrollOffsetWatcher(n,function(){LoadDelayedImages(t)})}function LoadDelayedImages(e){if("undefined"!=typeof g_rgDelayedLoadImages&&g_rgDelayedLoadImages[e]){for(var t=g_rgDelayedLoadImages[e],n=0;n<t.length;n++)$J("#delayedimage_"+e+"_"+n).attr("src",t[n]);g_rgDelayedLoadImages[e]=!1}}function v_numberformat(e,t,n,i){if(void 0===n&&void 0===i&&"undefined"!=typeof Number&&void 0!==Number.toLocaleString){var o={};void 0!==t&&0!==t&&(o.minimumFractionDigits=t,o.maximumFractionDigits=t);var r=new Number(e);try{return r.toLocaleString(!1,o)}catch(e){return r.toString()}}var s=""+(e||0),a=s.indexOf(".");-1==a&&(a=s.length);for(var l="",c=0;c<a;c++){var u=s.charAt(c);l+=u,c<a-1&&(a-c-1)%3==0&&"-"!=u&&(l+=void 0===i?",":i)}if((a<s.length||t)&&void 0!==t&&0!==t){a++,l+=void 0===n?",":n;for(c=0;c<(t||s.length-a);c++)a+c<s.length?l+=s.charAt(a+c):l+="0"}return l}function v_shuffle(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*(e.length-t)+t);if(n!=t){var i=e[n];e[n]=e[t],e[t]=i}}return e}function UpdateFormattedNumber(e,t){var n=$J(e);n.text(v_numberformat(parseInt(n.text().replace(/,/,""))+t))}function RateAnnouncement(e,t,n){if((!n||!$J("#VoteUpBtn_"+t).hasClass("btn_active"))&&(n||!$J("#VoteDownBtn_"+t).hasClass("btn_active")))return e+=t,$J.post(e,{voteup:n,sessionid:g_sessionID}).done(function(e){var i=$J("#VotesUpCount_"+t);if(i){var o=0;n?o=1:$J("#VoteUpBtn_"+t).hasClass("btn_active")&&(o=-1),UpdateFormattedNumber(i,o),0==parseInt(i.html().replace(/,/g,""))?$J("#VotesUpCountContainer_"+t).hide():$J("#VotesUpCountContainer_"+t).show()}n?($J("#VoteUpBtn_"+t).addClass("btn_active"),$J("#VoteDownBtn_"+t).removeClass("btn_active")):($J("#VoteDownBtn_"+t).addClass("btn_active"),$J("#VoteUpBtn_"+t).removeClass("btn_active"))}).fail(function(e){var t=e.responseText.evalJSON();switch(t.success){case 21:ShowAlertDialog("Error","You must be logged in to perform that action.");break;case 24:ShowAlertDialog("Error",'Your account does not meet the requirements to use this feature. <a class="whiteLink" href="https://help.steampowered.com/en/wizard/HelpWithLimitedAccount" target="_blank" rel="noreferrer">Visit Steam Support</a> for more information.');break;case 15:ShowAlertDialog("Error","You do not have permission to perform that action.");break;default:ShowAlertDialog("Error","There was an error encountered while processing your request: "+t.success)}}),!1}function GetResponsiveHeaderFixedOffsetAdjustment(){var e=$J(".responsive_header:visible");return e.length&&"fixed"==e.css("position")?e.outerHeight():0}function ScrollToIfNotInView(e,t,n,i){var o=$JFromIDOrElement(e);void 0===n&&(n=0),n+=GetResponsiveHeaderFixedOffsetAdjustment();var r=o.offset().top-$J(window).scrollTop(),s=!1;r<0?s=!0:(t||(t=o.outerHeight()),r+t>$J(window).height()&&(s=!0));s&&(n&&(r-=n),void 0!==i?$J("html, body").animate({scrollTop:r},i):window.scrollBy(0,r))}function CAjaxInfiniteScrollingControls(e,t){this.m_strActionURL=null,this.m_cPageSize=null,this.m_strElementPrefix="",this.m_strClassPrefix="",this.m_rgStaticParams=null,this.m_strQuery=null,this.m_cTotalCount=0,this.m_iCurrentPage=0,this.m_cMaxPages=0,this.m_bLoading=!1,this.m_fnPreRequestHandler=null,this.m_fnResponseHandler=null,this.m_fnPageChangingHandler=null,this.m_fnPageChangedHandler=null,this.m_LoadingDialog=null,this.m_bRestoringScrollTop=!1,this.m_strActionURL=t,this.m_strQuery=e.query,this.m_cTotalCount=e.total_count,this.m_iCurrentPage=0,this.m_cPageSize=e.pagesize,this.m_cMaxPages=Math.ceil(this.m_cTotalCount/this.m_cPageSize),e.prefix&&(this.m_strElementPrefix=e.prefix),e.class_prefix&&(this.m_strClassPrefix=e.class_prefix);var n=this;$J(document).scroll(function(){return function(e){this.OnScroll(e)}.apply(n)}),window.addEventListener("beforeunload",function(e){n.OnUnload(e)}),this.RestoreScrollTop(!0)}function CAjaxPagingControls(e,t){this.m_strActionURL=null,this.m_cPageSize=null,this.m_strElementPrefix="",this.m_strClassPrefix="",this.m_rgStaticParams=null,this.m_strQuery=null,this.m_cTotalCount=0,this.m_iCurrentPage=0,this.m_cMaxPages=0,this.m_bLoading=!1,this.m_fnPreRequestHandler=null,this.m_fnResponseHandler=null,this.m_fnPageChangingHandler=null,this.m_fnPageChangedHandler=null,this.m_strActionURL=t,this.m_strQuery=e.query,this.m_cTotalCount=e.total_count,this.m_iCurrentPage=0,this.m_cPageSize=e.pagesize,this.m_cMaxPages=Math.ceil(this.m_cTotalCount/this.m_cPageSize),this.m_strDefaultAction=void 0!==e.action?e.action:"render",e.prefix&&(this.m_strElementPrefix=e.prefix),e.class_prefix&&(this.m_strClassPrefix=e.class_prefix),$(this.m_strElementPrefix+"_btn_prev").observe("click",this.PrevPage.bind(this)),$(this.m_strElementPrefix+"_btn_next").observe("click",this.NextPage.bind(this)),this.UpdatePagingDisplay()}function CSlider(e,t,n){this.m_$Container=e,this.m_$Grabber=t||e.find(".handle"),this.m_nMinVal=n.min||0,this.m_nMaxVal=n.max||100,this.m_nIncrement=n.increment||1,this.m_nValue=n.value||0,this.m_fnOnChange=n.fnOnChange||function(e,t){},this.m_$Grabber.css("position","absolute"),this.CalcRatios(),this.SetValue(this.m_nValue);var i=function(e){if(0==e.type.indexOf("touch")){var t=e.originalEvent,n=t?t.touches:null;return!n||n.length<1?e.pageX||0:n[0].pageX||0}return e.pageX||0},o=this;this.m_$Container.on("mousedown touchstart",function(e){if(o.CalcRatios(),!o.m_$Grabber.is(e.target)){var t=i(e)-o.m_$Container.offset().left;t-=Math.floor(o.m_$Grabber.width()/2);var n=Math.min(Math.max(t,0),o.m_nWidth);o.m_$Grabber.css("left",n+"px"),o.m_nValue=n/o.m_flRatio,o.m_nIncrement>1&&o.m_nValue<o.m_nMaxVal&&(o.m_nValue=parseInt(o.m_nValue/o.m_nIncrement)*o.m_nIncrement),o.m_fnOnChange(o.m_nValue,!0)}var r=parseInt(o.m_$Grabber.css("left")),s=i(e);$J(document).on("mousemove.CSlider touchmove.CSlider",function(e){var t=i(e)-s,n=Math.min(Math.max(r+t,0),o.m_nWidth);o.m_$Grabber.css("left",n+"px"),o.m_nValue=n/o.m_flRatio,o.m_nIncrement>1&&o.m_nValue<o.m_nMaxVal&&(o.m_nValue=parseInt(o.m_nValue/o.m_nIncrement)*o.m_nIncrement),o.m_fnOnChange(o.m_nValue,!0)}),$J(document).on("mouseup.CSlider touchend.CSlider",function(e){$J(document).off(".CSlider"),o.m_fnOnChange(o.m_nValue,!1)}),e.preventDefault()})}function CScrollSlider(e,t,n,i){this.m_$Scroll=e,this.m_$SliderCtn=t;var o=t.children(".slider");this.m_Slider=new CSlider(o.length?o:t,n,{fnOnChange:$J.proxy(this.OnSliderChange,this)}),this.m_$Scroll.css("overflowX","scroll"),this.m_$Scroll.css("-webkit-overflow-scrolling","touch");var r=this,s=!1;this.m_$Scroll.on("scroll.ScrollSlider",function(){s||(r.UpdateRanges(),s=!0),r.m_Slider.SetValue(r.m_$Scroll.scrollLeft())}),$J(window).on("resize.ScrollSlider",function(){r.UpdateRanges()}),this.m_$Scroll.on("v_contentschanged",function(){r.UpdateRanges()}),this.UpdateRanges()}function IsValidEmailAddress(e){return""!=e&&/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i.test(e)}function SearchFieldWithText(e,t,n,i){var o=$(e);this.elem=o,this.defaultSearchText=t,this.defaultTextCSSClass=i,this.onEnterFunc=n,Event.observe(o,"click",this.handleClickOrFocus.bind(this)),Event.observe(o,"focus",this.handleClickOrFocus.bind(this)),Event.observe(o,"blur",this.handleBlur.bind(this)),Event.observe(o,"keypress",this.handleKeypress.bind(this)),Event.observe(o.form,"submit",this.ClearIfDefaultValue.bind(this)),this.handleBlur()}function CWebAPI(e,t,n){this.m_strHost=e,this.m_strSecureWebAPIHost=t,this.m_strOAuth2Token=n}function RegisterPopupDismissal(e,t){var n=$JFromIDOrElement(t);window.setTimeout(function(){$J(document).on("click.RegisterPopupDismissal keydown.RegisterPopupDismissal",function(t){if(!t.keyCode||27==t.keyCode){var i=$J(t.target);n.length&&$J.contains(n[0],i[0])||(e(),$J(document).off(".RegisterPopupDismissal"))}})},1)}function ShowMenu(e,t,n,i,o){var r=$JFromIDOrElement(e),s=$JFromIDOrElement(t);r.hasClass("focus")?HideMenu(e,t):(AlignMenu(r,s,n,i,o),ShowWithFade(s),r.addClass("focus"),RegisterPopupDismissal(function(){HideMenu(e,t)},s))}function HideMenu(e,t){var n=$JFromIDOrElement(e),i=$JFromIDOrElement(t);n.data("menu-active",!1),HideWithFade(i),n.removeClass("focus"),$J(document).off(".RegisterPopupDismissal")}function HideMenuFast(e,t){var n=$JFromIDOrElement(e);$JFromIDOrElement(t).hide(),n.removeClass("focus"),$J(document).off(".RegisterPopupDismissal")}function RegisterFlyout(e,t,n,i,o){var r=$JFromIDOrElement(e),s=$JFromIDOrElement(t);r.on("mouseenter",function(e){FlyoutMenu(r,s,n,i,o)}),r.add(s).on("mouseleave",function(e){HideFlyoutMenu(e,r,s)})}function FlyoutMenu(e,t,n,i,o){var r=$JFromIDOrElement(e),s=$JFromIDOrElement(t);(!s.is(":visible")||s.css("opacity")<1)&&(AlignMenu(r,s,n,i,o),s.hasClass("responsive_slidedown")&&window.UseSmallScreenMode&&window.UseSmallScreenMode()?s.stop().slideDown():ShowWithFade(s),r.addClass("focus"))}function HideFlyoutMenu(e,t,n){var i=$JFromIDOrElement(t),o=$JFromIDOrElement(n);if(e){var r=$J(e.relatedTarget);if(!r.length||i.length&&$J.contains(i[0],r[0])||o.length&&$J.contains(o[0],r[0])||i.is(r))return}o.hasClass("responsive_slidedown")&&window.UseSmallScreenMode&&window.UseSmallScreenMode()?o.stop().slideUp():window.setTimeout(function(){HideWithFade(o)},33),i.removeClass("focus")}function AlignMenu(e,t,n,i,o){n=n||"left";var r=$JFromIDOrElement(e),s=$JFromIDOrElement(t),a=r.offset(),l=$J(window).scrollTop(),c=$J(window).height(),u=a.top-l,d=s.height()+8;if(!i)if(l+a.top<d)i="bottom";else{var h=u,p=c-(u+r.height());i=p>d||h<d&&p>h?"bottom":"top"}var f=o?1:0,m=s.hasClass("popup_block_new")?0:12,g=0;"left"==n?g=-m-f:"right"==n?g=r.outerWidth()-s.outerWidth()+m+f:"leftsubmenu"==n?g=-s.outerWidth()+m-f:"rightsubmenu"==n&&(g=r.outerWidth()-m+2*f);var v=0;"bottom"==i?v=r.outerHeight()-m:"top"==i?v=-s.outerHeight()+m:"bottomsubmenu"==i&&(v=-m);var y=!s.is(":visible");y&&(s.css("visibility","hidden"),s.show()),s.offset({top:Math.max(a.top+v,0),left:Math.max(a.left+g,0)}),y&&(s.hide(),s.css("visibility","visible"))}function BindAutoFlyoutEvents(){$J(document).on("mouseenter.Flyout click.Flyout",".flyout_tab",function(e){var t=$J(this),n=$J("#"+t.data("flyout")),i=window.UseSmallScreenMode&&window.UseSmallScreenMode()&&n.hasClass("responsive_slidedown");!n.length||n.data("flyout-event-running")||"mouseenter"==e.type&&i||(n.data("flyout-event-running",!0),window.setTimeout(function(){n.data("flyout-event-running",!1)},1),n.is(":visible")?"click"==e.type&&HideFlyoutMenu(null,t,n):(n.data("flyout-mouseleave-bound")||(n.on("mouseleave.Flyout",function(e){window.UseSmallScreenMode&&window.UseSmallScreenMode()&&n.hasClass("responsive_slidedown")||t.is(e.relatedTarget)||$J.contains(t[0],e.relatedTarget)||HideFlyoutMenu(null,t,n)}),n.data("flyout-mouseleave-bound",!0)),FlyoutMenu(t,n,t.data("flyout-align"),t.data("flyout-valign")),window.UseTouchFriendlyMode&&window.UseTouchFriendlyMode()&&window.setTimeout(function(){$J(document).on("click.FlyoutDismiss",function(e){$J.contains(n[0],e.target)||n.is(e.target)||(HideFlyoutMenu(null,t,n),$J(document).off("click.FlyoutDismiss"),e.preventDefault())})},1)))}),$J(document).on("mouseleave.Flyout",".flyout_tab",function(e){var t=$J(this),n=$J("#"+t.data("flyout")),i=window.UseSmallScreenMode&&window.UseSmallScreenMode()&&n.hasClass("responsive_slidedown");!n.length||n.data("flyout-event-running")||i||n.is(e.relatedTarget)||$J.contains(n[0],e.relatedTarget)||n.is(":visible")&&HideFlyoutMenu(null,t,n)})}function PollOnUserActionAfterInterval(e,t,n,i){var o,r=!1,s=$J.now(),a=["touchstart","mousemove","focus","scroll",""].join("."+e+" "),l=function(){r||n(),r=!0,o()};(o=function(){window.setTimeout(function(){r=!1,i&&$J.now()<=s+i?l():$J(window).on(a,function(){$J(window).off("."+e),s=$J.now(),l()})},t)})()}CDelayedAJAXData.prototype.GetAJAXParams=function(){return GetDefaultCommunityAJAXParams(this.m_strURL,"GET")},CDelayedAJAXData.prototype.QueueAjaxRequestIfNecessary=function(){if(!this.m_$Data&&!this.m_bAJAXRequestMade){var e=this;this.m_timerDelayedAJAX=window.setTimeout(function(){e.m_timerDelayedAJAX=null,e.m_bAJAXRequestMade=!0;var t=e.GetAJAXParams();$J.ajax(t).done(function(t){e.m_$Data=$J(t),e.m_fnOnAJAXComplete&&e.m_fnOnAJAXComplete()}).fail(function(){e.m_bAJAXFailed=!0})},this.m_msDelayBeforeAJAX)}},CDelayedAJAXData.prototype.CancelAJAX=function(){this.m_timerDelayedAJAX&&window.clearTimeout(this.m_timerDelayedAJAX),this.m_fnOnAJAXComplete=null},CDelayedAJAXData.prototype.RunWhenAJAXReady=function(e){this.m_$Data?e():this.m_bAJAXFailed||(this.m_fnOnAJAXComplete=e,this.QueueAjaxRequestIfNecessary())},CDelayedAJAXData.prototype.Show=function(e){e.children().detach(),e.append(this.m_$Data)},CEmoticonDelayedAJAXData.prototype=new CDelayedAJAXData,CEmoticonDelayedAJAXData.prototype.constructor=CEmoticonDelayedAJAXData,CEmoticonDelayedAJAXData.prototype.GetAJAXParams=function(){return{url:"http://community.edgecast.steamstatic.com/"+this.m_strURL,dataType:"jsonp",jsonpCallback:"OnLoadEmoticon_"+this.m_strEmoticonName,cache:!0,data:{l:"english"}}},CScrollOffsetWatcher.prototype.SetBufferHeight=function(e){this.nBufferHeight=e,this.Recalc()},CScrollOffsetWatcher.prototype.Recalc=function(){this.nOffsetTop=this.m_$Element.offset().top,this.nOffsetTopTrigger=this.nOffsetTop-this.nBufferHeight},CScrollOffsetWatcher.sm_rgWatchers=[],CScrollOffsetWatcher.m_nTimeoutInitialLoad=0,CScrollOffsetWatcher.RegisterWatcher=function(e){var t,n=CScrollOffsetWatcher.sm_rgWatchers.length>0;for(t=CScrollOffsetWatcher.sm_rgWatchers.length;t>0&&!(e.nOffsetTopTrigger>CScrollOffsetWatcher.sm_rgWatchers[t-1].nOffsetTopTrigger);t--);if(CScrollOffsetWatcher.sm_rgWatchers.splice(t,0,e),!n){$J(window).on("scroll.ScrollOffsetWatcher",CScrollOffsetWatcher.OnScroll);var i=0;$J(window).on("resize.ScrollOffsetWatcher",function(){i&&window.clearTimeout(i),i=window.setTimeout(CScrollOffsetWatcher.ForceRecalc,500)})}CScrollOffsetWatcher.m_nTimeoutInitialLoad||(CScrollOffsetWatcher.m_nTimeoutInitialLoad=window.setTimeout(function(){CScrollOffsetWatcher.OnScroll(),CScrollOffsetWatcher.m_nTimeoutInitialLoad=0},1))},CScrollOffsetWatcher.ForceRecalc=function(){for(var e=0;e<CScrollOffsetWatcher.sm_rgWatchers.length;e++)CScrollOffsetWatcher.sm_rgWatchers[e].Recalc();CScrollOffsetWatcher.OnScroll()},CScrollOffsetWatcher.OnScroll=function(){for(var e=void 0!==window.pageYOffset,t="CSS1Compat"===(document.compatMode||""),n=(e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop)+window.innerHeight,i=0,o=0;o<CScrollOffsetWatcher.sm_rgWatchers.length;o++){var r=CScrollOffsetWatcher.sm_rgWatchers[o];if(!(n>r.nOffsetTopTrigger))break;r.Recalc(),n>r.nOffsetTopTrigger&&(r.fnOnHit(),i++)}i&&CScrollOffsetWatcher.sm_rgWatchers.splice(0,i),0==CScrollOffsetWatcher.sm_rgWatchers.length&&($J(window).off("scroll.ScrollOffsetWatcher"),$J(window).off("resize.ScrollOffsetWatcher"))},WebStorage={GetLocal:function(e,t){var n,i=t?"session":"local",o=window[i+"Storage"];if(!window[i+"Storage"])return WebStorage.GetCookie(e);try{n=o.getItem(e)}catch(e){n=null}try{n=V_ParseJSON(n)}catch(e){return null}return null==n&&null!=(n=V_GetCookie(e))&&(WebStorage.SetLocal(e,n,t),WebStorage.ClearCookie(e)),n},GetLocalSession:function(e){return WebStorage.GetLocal(e,!0)},SetLocal:function(e,t,n){var i=n?"session":"local",o=window[i+"Storage"];if(!window[i+"Storage"])return WebStorage.SetCookie(e,t,n?null:365);t=V_ToJSON(t),o.setItem(e,t,i)},SetLocalSession:function(e,t){WebStorage.SetLocal(e,t,!0)},GetCookie:function(e){var t=V_GetCookie(e);return t&&(t=decodeURIComponent(t)),V_IsJSON(t)?V_ParseJSON(t):t},SetCookie:function(e,t,n){V_SetCookie(e,t=encodeURIComponent(V_ToJSON(t)),n)},ClearCookie:function(e){WebStorage.SetCookie(e,null,-1)}},CAjaxInfiniteScrollingControls.prototype.DoneRestoreScrollTop=function(){this.m_LoadingDialog&&(this.m_LoadingDialog.Dismiss(),this.m_LoadingDialog=null),this.m_bRestoringScrollTop=!1},CAjaxInfiniteScrollingControls.prototype.RestoreScrollTop=function(e){if(this.m_bRestoringScrollTop|=e,this.m_bRestoringScrollTop){var t=parseInt($J("#"+this.m_strElementPrefix+"_scroll_top").val());if(0!=t){var n=document.viewport.getDimensions().height;t<$(document.body).getHeight()-n?(this.DoneRestoreScrollTop(),window.scrollTo(0,t)):(null==this.m_LoadingDialog&&(this.m_LoadingDialog=ShowBlockingWaitDialog("Please Wait","Returning to where you were last on this page...")),window.scrollTo(0,t))}}},CAjaxInfiniteScrollingControls.prototype.OnUnload=function(e){var t=document.viewport.getScrollOffsets().top;$J("#"+this.m_strElementPrefix+"_scroll_top").val(t)},CAjaxInfiniteScrollingControls.prototype.OnScroll=function(e){if(!this.m_bLoading){var t=$J(window).scrollTop()+$J(window).height(),n=$J("#"+this.m_strElementPrefix+"Rows"),i=n.offset();t>n.height()+i.top-750&&this.NextPage()}},CAjaxInfiniteScrollingControls.prototype.GetActionURL=function(e){return this.m_strActionURL+e+"/"},CAjaxInfiniteScrollingControls.prototype.SetPreRequestHandler=function(e){this.m_fnPreRequestHandler=e},CAjaxInfiniteScrollingControls.prototype.SetResponseHandler=function(e){this.m_fnResponseHandler=e},CAjaxInfiniteScrollingControls.prototype.SetPageChangingHandler=function(e){this.m_fnPageChangingHandler=e},CAjaxInfiniteScrollingControls.prototype.SetPageChangedHandler=function(e){this.m_fnPageChangedHandler=e},CAjaxInfiniteScrollingControls.prototype.SetStaticParameters=function(e){this.m_rgStaticParams=e},CAjaxInfiniteScrollingControls.prototype.OnAJAXComplete=function(){this.m_bLoading=!1},CAjaxInfiniteScrollingControls.prototype.NextPage=function(){this.m_iCurrentPage<this.m_cMaxPages-1&&this.LoadPage(this.m_iCurrentPage+1)},CAjaxInfiniteScrollingControls.prototype.LoadPage=function(e,t){if(void 0===t||!t){if(this.m_bLoading||e>=this.m_cMaxPages||e<0)return!1;e==this.m_iCurrentPage&&this.RestoreScrollTop(!1)}var n={query:this.m_strQuery,start:this.m_cPageSize*e,count:this.m_cPageSize};if(null!=this.m_rgStaticParams)for(var i in this.m_rgStaticParams)"string"==typeof i&&"string"==typeof this.m_rgStaticParams[i]&&(n[i]=this.m_rgStaticParams[i]);return null!=this.m_fnPageChangingHandler&&this.m_fnPageChangingHandler(e),null!=this.m_fnPreRequestHandler&&this.m_fnPreRequestHandler(n),$(this.m_strElementPrefix+"_loading").show(),this.m_bLoading=!0,new Ajax.Request(this.GetActionURL(""),{method:"get",parameters:n,onSuccess:this.OnResponseRenderResults.bind(this),onComplete:this.OnAJAXComplete.bind(this)}),!0},CAjaxInfiniteScrollingControls.prototype.OnResponseRenderResults=function(e){if(e.responseJSON&&e.responseJSON.success){$(this.m_strElementPrefix+"_loading").hide(),void 0!==RecordAJAXPageView&&RecordAJAXPageView(e.request.url);var t=e.responseJSON;if(this.m_cTotalCount=t.total_count,this.m_cMaxPages=Math.ceil(t.total_count/this.m_cPageSize),this.m_iCurrentPage=Math.floor(t.start/this.m_cPageSize),0!=this.m_iCurrentPage&&this.m_cTotalCount<=t.start)return void this.DoneRestoreScrollTop();$(this.m_strElementPrefix+"Rows").insert(t.results_html),null!=this.m_fnResponseHandler&&this.m_fnResponseHandler(t),null!=this.m_fnPageChangedHandler&&this.m_fnPageChangedHandler(this.m_iCurrentPage),this.m_bLoading=!1,this.m_iCurrentPage<this.m_cMaxPages-1?this.RestoreScrollTop(!1):this.DoneRestoreScrollTop()}else this.DoneRestoreScrollTop()},CAjaxPagingControls.prototype.GetActionURL=function(e){return e?this.m_strActionURL+e+"/":this.m_strActionURL},CAjaxPagingControls.prototype.SetPreRequestHandler=function(e){this.m_fnPreRequestHandler=e},CAjaxPagingControls.prototype.SetResponseHandler=function(e){this.m_fnResponseHandler=e},CAjaxPagingControls.prototype.SetPageChangingHandler=function(e){this.m_fnPageChangingHandler=e},CAjaxPagingControls.prototype.SetPageChangedHandler=function(e){this.m_fnPageChangedHandler=e},CAjaxPagingControls.prototype.SetStaticParameters=function(e){this.m_rgStaticParams=e},CAjaxPagingControls.prototype.OnAJAXComplete=function(){this.m_bLoading=!1},CAjaxPagingControls.prototype.NextPage=function(){this.m_iCurrentPage<this.m_cMaxPages-1&&this.GoToPage(this.m_iCurrentPage+1)},CAjaxPagingControls.prototype.PrevPage=function(){this.m_iCurrentPage>0&&this.GoToPage(this.m_iCurrentPage-1)},CAjaxPagingControls.prototype.GoToPage=function(e,t){if((void 0===t||!t)&&(this.m_bLoading||e>=this.m_cMaxPages||e<0||e==this.m_iCurrentPage))return!1;var n={query:this.m_strQuery,start:this.m_cPageSize*e,count:this.m_cPageSize};if(null!=this.m_rgStaticParams)for(var i in this.m_rgStaticParams)"string"==typeof i&&"string"==typeof this.m_rgStaticParams[i]&&(n[i]=this.m_rgStaticParams[i]);return null!=this.m_fnPageChangingHandler&&this.m_fnPageChangingHandler(e),null!=this.m_fnPreRequestHandler&&this.m_fnPreRequestHandler(n),this.m_bLoading=!0,new Ajax.Request(this.GetActionURL(this.m_strDefaultAction),{method:"get",parameters:n,onSuccess:this.OnResponseRenderResults.bind(this),onComplete:this.OnAJAXComplete.bind(this)}),!0},CAjaxPagingControls.prototype.OnResponseRenderResults=function(e){if(e.responseJSON&&e.responseJSON.success){void 0!==RecordAJAXPageView&&RecordAJAXPageView(e.request.url);var t=e.responseJSON;if(this.m_cTotalCount=t.total_count,this.m_cMaxPages=Math.ceil(t.total_count/this.m_cPageSize),this.m_iCurrentPage=Math.floor(t.start/this.m_cPageSize),0!=this.m_iCurrentPage&&this.m_cTotalCount<=t.start)return void this.GoToPage.bind(this,this.m_iCurrentPage-1).defer();var n=$(this.m_strElementPrefix+"Rows");n&&n.update(t.results_html),null!=this.m_fnResponseHandler&&this.m_fnResponseHandler(t),this.UpdatePagingDisplay(),ScrollToIfNotInView($(this.m_strElementPrefix+"Table"),40)}},CAjaxPagingControls.prototype.UpdatePagingDisplay=function(){var e=$(this.m_strElementPrefix+"_no_results");if(0==this.m_cTotalCount?($(this.m_strElementPrefix+"_ctn").hide(),e&&e.show()):($(this.m_strElementPrefix+"_ctn").show(),e&&e.hide(),$(this.m_strElementPrefix+"_total").update(v_numberformat(this.m_cTotalCount)),$(this.m_strElementPrefix+"_start").update(v_numberformat(this.m_iCurrentPage*this.m_cPageSize+1)),$(this.m_strElementPrefix+"_end").update(Math.min((this.m_iCurrentPage+1)*this.m_cPageSize,this.m_cTotalCount))),this.m_cMaxPages<=1)$(this.m_strElementPrefix+"_controls").hide();else{$(this.m_strElementPrefix+"_controls").show(),this.m_iCurrentPage>0?$(this.m_strElementPrefix+"_btn_prev").removeClassName("disabled"):$(this.m_strElementPrefix+"_btn_prev").addClassName("disabled"),this.m_iCurrentPage<this.m_cMaxPages-1?$(this.m_strElementPrefix+"_btn_next").removeClassName("disabled"):$(this.m_strElementPrefix+"_btn_next").addClassName("disabled");var t=$(this.m_strElementPrefix+"_links");t.update("");var n=Math.max(this.m_iCurrentPage-2,1),i=Math.min(this.m_iCurrentPage+4+(n-this.m_iCurrentPage),this.m_cMaxPages-2);i-this.m_iCurrentPage<2&&(n=Math.max(this.m_iCurrentPage-4+(i-this.m_iCurrentPage),1)),this.AddPageLink(t,0),1!=n&&t.insert(" ... ");for(var o=n;o<=i;o++)this.AddPageLink(t,o);i!=this.m_cMaxPages-2&&t.insert(" ... "),this.AddPageLink(t,this.m_cMaxPages-1)}null!=this.m_fnPageChangedHandler&&this.m_fnPageChangedHandler(this.m_iCurrentPage)},CAjaxPagingControls.prototype.AddPageLink=function(e,t){var n=new Element("span",{class:(""!=this.m_strClassPrefix?this.m_strClassPrefix:this.m_strElementPrefix)+"_paging_pagelink"});n.update(t+1+" "),t==this.m_iCurrentPage?n.addClassName("active"):n.observe("click",this.GoToPage.bind(this,t)),e.insert(n)},CSlider.prototype.CalcRatios=function(){var e=this.m_$Grabber.width();this.m_nWidth=this.m_$Container.width()-e,this.m_flRatio=this.m_nWidth/(this.m_nMaxVal-this.m_nMinVal)},CSlider.prototype.SetValue=function(e,t){this.m_nValue=Math.min(Math.max(e,this.m_nMinVal),this.m_nMaxVal);var n=Math.floor((this.m_nValue-this.m_nMinVal)*this.m_flRatio);this.m_$Grabber.stop(),t?this.m_$Grabber.animate({left:n},t):this.m_$Grabber.css("left",n+"px")},CSlider.prototype.GetValue=function(){return this.m_nValue},CSlider.prototype.GetMin=function(){return this.m_nMinVal},CSlider.prototype.GetMax=function(){return this.m_nMaxVal},CSlider.prototype.SetRange=function(e,t,n){this.m_nMinVal=e,this.m_nMaxVal=t,void 0!==n&&(this.m_nValue=n),this.CalcRatios(),this.SetValue(this.m_nValue)},CSlider.prototype.SetIncrement=function(e){this.m_nIncrement=e},CScrollSlider.prototype.SetValue=function(e,t){t?this.m_$Scroll.stop().animate({scrollLeft:e},t):this.m_$Scroll.stop().scrollLeft(e)},CScrollSlider.prototype.GetValue=function(){return this.m_Slider.GetValue()},CScrollSlider.prototype.UpdateRanges=function(){var e=this.m_$Scroll.width(),t=this.m_$Scroll[0].scrollWidth;t<=e?this.m_$SliderCtn.hide():(this.m_Slider.SetRange(0,t-e,this.m_$Scroll.scrollLeft()),this.m_$SliderCtn.show())},CScrollSlider.prototype.OnSliderChange=function(e,t){this.m_$Scroll.stop().scrollLeft(e)},function(e){e.deparam=function(t,n){var i={},o={true:!0,false:!1,null:null};return e.each(t.replace(/\+/g," ").split("&"),function(t,r){var s,a=r.split("="),l=decodeURIComponent(a[0]),c=i,u=0,d=l.split("]["),h=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[h])?(d[h]=d[h].replace(/\]$/,""),h=(d=d.shift().split("[").concat(d)).length-1):h=0,2===a.length)if(s=decodeURIComponent(a[1]),n&&(s=s&&!isNaN(s)?+s:"undefined"===s?void 0:void 0!==o[s]?o[s]:s),h)for(;u<=h;u++)c=c[l=""===d[u]?c.length:d[u]]=u<h?c[l]||(d[u+1]&&isNaN(d[u+1])?{}:[]):s;else e.isArray(i[l])?i[l].push(s):void 0!==i[l]?i[l]=[i[l],s]:i[l]=s;else l&&(i[l]=n?void 0:"")}),i}}(jQuery),SearchFieldWithText.prototype.handleClickOrFocus=function(){this.elem.value==this.defaultSearchText&&(this.elem.value="",this.defaultTextCSSClass&&this.elem.removeClassName(this.defaultTextCSSClass))},SearchFieldWithText.prototype.handleBlur=function(){""==this.elem.value&&(this.elem.value=this.defaultSearchText,this.defaultTextCSSClass&&this.elem.addClassName(this.defaultTextCSSClass))},SearchFieldWithText.prototype.handleKeypress=function(){if(this.onEnterFunc){var e=null;event.which?e=event.which:event.keyCode&&(e=evt.keyCode),13==e&&this.onEnterFunc()}},SearchFieldWithText.prototype.ClearIfDefaultValue=function(){this.elem.value==this.defaultSearchText&&(this.elem.value="")},CWebAPI.prototype.BuildURL=function(e,t,n,i){i||(i="v0001");var o=n?this.m_strSecureWebAPIHost:this.m_strHost;return o+=e+"/"+t+"/"+i+"/"},CWebAPI.prototype.ExecJSONP=function(e,t,n,i,o,r){n.access_token=this.m_strOAuth2Token;var s={url:this.BuildURL(e,t,i,o),dataType:"jsonp",jsonp:"jsonp",data:n};return r&&(s.timeout=1e3*r),$J.ajax(s)},CWebAPI.prototype.ExecBeacon=function(e,t,n,i,o){n.access_token=this.m_strOAuth2Token;var r=new FormData;for(var s in n)r.append(s,n[s]);navigator.sendBeacon(this.BuildURL(e,t,i,o),r)},CWebAPI.prototype.ExecPOST=function(e,t,n,i,o){return n.access_token=this.m_strOAuth2Token,n.format="json",$J.ajax({url:this.BuildURL(e,t,i,o),type:"POST",data:n})};var DELAY_BETWEEN_NOTIFICATION_COUNT_POLLS_MS=3e4;function EnableNotificationCountPolling(){var e=$J(".notification_ctn"),t=$J(".notification_count_total_ctn");(e.length||t.length)&&PollOnUserActionAfterInterval("NotificationCountPoll",DELAY_BETWEEN_NOTIFICATION_COUNT_POLLS_MS,UpdateNotificationCounts)}function UpdateNotificationCounts(){var e=$J(".notification_ctn"),t=$J(".notification_count_total_ctn");(e.length||t.length)&&$J.ajax(GetDefaultCommunityAJAXParams("actions/GetNotificationCounts","GET")).done(function(n){var i=n&&n.notifications;if(i){e.each(function(){var e=$J(this),t=e.data("notification-type"),n=i[t]||0;e.find(".notification_count").text(v_numberformat(n)),n>0?e.addClass("active_inbox_item"):e.removeClass("active_inbox_item");var o=e.find(".notification_count_string");o.length&&(1==n?(o.filter(".plural").hide(),o.filter(".singular").show()):(o.filter(".singular").hide(),o.filter(".plural").show()))}),i[11]||$J(".global_header_account_alert").hide();var o=0;for(var r in i)o+=i[r]||0;t.find(".notification_count").text(v_numberformat(o)),o>0?t.removeClass("no_notifications").addClass("has_notifications"):t.removeClass("has_notifications").addClass("no_notifications")}})}function PostToURLWithSession(e,t){var n=$J("<form/>",{action:e,method:"POST"});if("undefined"!=typeof g_sessionID&&n.append($J("<input/>",{type:"hidden",name:"sessionid",value:g_sessionID})),t)for(var i in t)n.append($J("<input/>",{type:"hidden",name:i,value:t[i]}));n.appendTo("body"),n.submit()}function ShowWithFade(e,t){var n=$JFromIDOrElement(e);n.stop(),n.fadeTo(t||200,1)}function HideWithFade(e,t){var n=$JFromIDOrElement(e);n.stop(),n.fadeOut(t||200)}function LaunchWebChat(e){var t=window.open("","SteamWebChat","height=790,width=1015,resize=yes,scrollbars=yes");t&&("about:blank"==t.location?(e&&SetValueLocalStorage("rgChatStartupParam",V_ToJSON(e)),t.location="https://steamcommunity.com//chat/"):e&&t.OnWebchatLaunchURL(e),t.focus())}function ShowSupportAlerts(e){window.open(e,"SupportAlerts","height=700,width=700,resize=yes,scrollbars=yes")}function ToggleFamilyView(e,t){e?window.location=t:ShowConfirmDialog("Return to Family View","Are you sure you want to return to Family View?","Return to Family View").done(function(){ShowBlockingWaitDialog("Return to Family View"),window.location=t})}function setTimezoneCookies(){var e=new Date,t=new Date;t.setTime(e.getTime()+31536e6);var n=-1*e.getTimezoneOffset()*60;document.cookie="timezoneOffset="+n+",0;expires="+t.toGMTString()+";path=/"}function FlushStyleChanges(e){$J(e).css("opacity")}var k_EScrollbarDirectionVertical=1,k_EScrollbarDirectionHorizontal=2;function InitAutoComplete(e,t,n){return new CAutoComplete(e,t,n)}function CAutoComplete(e,t,n){this.m_bSuppresseNextKeyUp=!1,this.m_hSearchTimeout=0,this.m_strLastSearch="",this.m_$Input=$J(e),this.m_fnSearch=t,this.m_fnOnChange=n;var i=this.m_$Input.attr("name");i||(i="unknown"),i+="_autocomplete",this.m_$Popup=$J('<div class="'+i+'"></div>'),this.m_$Popup.css("width",this.m_$Input.outerWidth()+"px"),this.m_$Input.after(this.m_$Popup),this.m_$Popup.hide();var o=this;this.m_$Input.on("keydown.autocomplete",function(e){o.OnInputKeyDown(e)}),this.m_$Input.on("keyup.autocomplete",function(e){o.OnInputKeyUp(e)}),this.m_$Input.on("blur.autocomplete",function(e){o.OnInputBlur(e)}),this.m_$Input.on("change input paste",function(e){o.OnInputChange(e)}),this.m_$Popup.on("mousedown.autocomplete",function(e){o.m_$Popup.data("mousedown",!0)}),this.m_$Popup.on("mouseup.autocomplete",function(e){o.m_$Popup.data("mousedown",!1)})}function GetCurrentScrollPercentage(){return $J(window).scrollTop()/($J(document).height()-$J(window).height())*100}function FixedElementOnScrollWrapper(e,t,n,i,o){o=$J.extend({fixedClass:null},o),this.fixedElement=$(e),this.$FixedElement=$JFromIDOrElement(e),this.fixedOffsetTop=void 0!==t?t:0,this.bScrollWithPageIfTooTall=void 0!==n&&n,this.docHeightOffset=void 0!==i?i:0,this.homePosn={x:this.fixedElement.cumulativeOffset()[0],y:this.fixedElement.cumulativeOffset()[1]},this.fixedClass=o.fixedClass,this.$FixedElementPadding=$J("<div/>",{class:"FixedElementOnScrollWrapper_padding",id:"ScrollWrapperPadding_"+e}).hide(),this.fixedElement.insert({before:this.$FixedElementPadding[0]});var r=this;$J(window).on("scroll.FixedElementOnScrollWrapper hashchange.FixedElementOnScrollWrapper",function(){r.handleScroll()}),$J(window).on("resize.FixedElementOnScrollWrapper",function(){r.handleScroll(!0)}),this.handleScroll()}function CTextInputSuggest(e,t,n,i){this.Init(e,t,n,i)}function CIndexedInputSuggest(e,t,n,i){this.Init(e,t,n,i)}function InitBBCodeVideos(e){var t=$J("video");if(0!=t.length)for(var n=0;n<t.length;++n){var i=t[n],o=$J(i);o.hasClass("bb_video_loop")&&i.setAttribute("loop","loop"),o.hasClass("bb_video_controls")&&i.setAttribute("controls","controls"),e?(o.unbind("mouseenter mouseleave"),i.preload=o.hasClass("bb_video_preload")?"auto":"metadata",o.hasClass("bb_video_autoplay")&&(i.autoplay="autoplay")):(i.preload="metadata",o.hover(function(){this.hasAttribute("controls")?this.removeAttribute("controls"):this.setAttribute("controls","controls")}))}}function LoginUsingSteamClient(e){V_GetCookie("lastAutoLogin")||(V_SetCookie("lastAutoLogin","1",1/24),"withCredentials"in new XMLHttpRequest&&$J.ajax({type:"GET",url:"http://localhost:27060/auth/?u=public",dataType:"json",success:function(t){$J.ajax({type:"POST",url:e+"/login/checkclientautologin",data:{steamid:t.steamid,sessionkey:t.sessionkey,encrypted_loginkey:t.encrypted_loginkey,digest:t.digest,redirectURL:window.location.href},dataType:"json",success:function(e){location.reload()}})}}))}window.VScrollbar=function(e,t,n){this.m_eleHandle=t,this.m_eleTarget=e;var i,o,r,s,a,l=this;n==k_EScrollbarDirectionVertical?(i="top",o="height",r="outerHeight","y",s="pageY",a="offsetY"):n==k_EScrollbarDirectionHorizontal&&(i="left",o="width",r="outerWidth","x",s="pageX",a="offsetX",this.m_eleTarget.first().css({"white-space":"nowrap"})),this.m_eleHandle.css({position:"absolute"}),"static"==this.m_eleHandle.parent().css("position")&&this.m_eleHandle.parent().css({position:"relative"}),this.m_eleTarget.css({position:"relative",float:"left"}),this.m_eleTarget.css(i,"0px"),this.m_eleTarget.addClass("animating"),this.m_eleTarget.parent().addClass("v_scrollbar_target"),this.m_eleTarget.parent().css({position:"relative",overflow:"hidden"}),this.m_nDesiredPosition=0,this.m_flPercent=0;var c=function(e){var t=!0;l.m_eleTarget[o]()-l.m_eleTarget.parent()[o]()<=0?(l.m_eleHandle.parent().addClass("disabled"),l.m_flPercent=0,t=!1):l.m_eleHandle.parent().removeClass("disabled"),l.m_flPercent<0&&(l.m_flPercent=0),l.m_flPercent>1&&(l.m_flPercent=1);var n=l.m_flPercent;e&&l.DisableTransitions(),l.m_nDesiredPosition=-n*(l.m_eleTarget[o]()-l.m_eleTarget.parent()[o]()),l.m_eleTarget[0].style[i]=l.m_nDesiredPosition+"px";var s=l.m_eleHandle.parent()[o]()-l.m_eleHandle[r]();return l.m_eleHandle[0].style[i]=n*s+"px",e&&l.EnableTransitions(),t},u=function(e){var t=(e[s]-l.m_eleHandle.parent().offset()[i])/(l.m_eleHandle.parent()[o]()-l.m_eleHandle[r]());l.m_flPercent=t,c(!0)&&e.preventDefault()};$J(e).bind("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta||-12*e.originalEvent.detail,n=-1*l.m_nDesiredPosition,i=l.m_eleTarget[r]()-l.m_eleTarget.parent()[o]();if(!(n<=0&&t>0||n==i&&t<0)){(n-=t)<0&&(n=0),n>i&&(n=i);var s=n/i;l.m_flPercent=s,c()&&e.preventDefault()}}),$J(t.parent()).bind("click",function(e){var t=-1*l.m_eleTarget.position()[i],n=l.m_eleTarget[r]()-l.m_eleTarget.parent()[o](),s=l.m_eleTarget.parent()[o]();e[a]<l.m_eleHandle.position()[i]&&(s*=-1),(t+=s)<0&&(t=0),t>n&&(t=n);var u=t/n;l.m_flPercent=u,c()&&e.preventDefault()}),t.mousedown(function(e){$J(window).bind("mousemove.scroll",u),e.stopPropagation()}),t.click(function(e){e.stopPropagation()}),$J(window).mouseup(function(e){$J(window).unbind("mousemove.scroll"),e.stopPropagation()}),this.Reset=function(){return l.m_flPercent=0,c(!0)},this.EnsureVisible=function(e){var t=$J(e),n=t[r](!0),s=t.position()[i]-.5*n,a=s+2*n,u=l.m_eleTarget[r]()-l.m_eleTarget.parent()[o](),d=l.m_eleTarget.parent()[o](),h=-1*l.m_eleTarget.position()[i];return h>s?l.m_flPercent=s/u:h+d<a&&(l.m_flPercent=(a-d)/u),c()},this.EnableTransitions=function(){l.m_eleTarget.addClass("animating")},this.DisableTransitions=function(){l.m_eleTarget.removeClass("animating")},c(!0)},CAutoComplete.KEY_ENTER=13,CAutoComplete.KEY_UP=38,CAutoComplete.KEY_DOWN=40,CAutoComplete.prototype.OnInputChange=function(e){if(this.m_fnOnChange&&this.m_fnOnChange(this.m_$Input,null),0==this.m_hSearchTimeout){var t=this;this.m_hSearchTimeout=window.setTimeout(function(){t.m_hSearchTimeout=0;var e=t.m_$Input.val();e!=t.m_strLastSearch&&(t.m_strLastSearch=e,t.m_fnSearch(t.m_$Input,e,function(e){t.SetPopupContents(e)}))},300)}},CAutoComplete.prototype.SetPopupContents=function(e){if(e){this.m_$Popup.html(""),this.m_$Popup.append(e);var t=this;this.m_$Popup.children().on("click.autocomplete",function(e){t.SelectSuggestion($J(this))}),this.m_$Popup.show()}else this.ClosePopup()},CAutoComplete.prototype.OnInputBlur=function(e){this.m_$Popup.data("mousedown")||this.ClosePopup()},CAutoComplete.prototype.SelectSuggestion=function(e){0!=e.length&&(this.m_$Input.val(e.data("suggestion")),this.m_fnOnChange&&this.m_fnOnChange(this.m_$Input,e),this.ClosePopup(),this.m_$Input.focus())},CAutoComplete.prototype.ClosePopup=function(){0!=this.m_hSearchTimeout&&(window.clearTimeout(this.m_hSearchTimeout),this.m_hSearchTimeout=0),this.m_strLastSearch="",this.m_$Popup.hide()},CAutoComplete.prototype.OnInputKeyDown=function(e){var t=this.m_$Popup.children(".focus"),n=$J();if(e.keyCode==CAutoComplete.KEY_ENTER)return this.SelectSuggestion(t),this.m_bSuppressNextKeyUp=!0,void e.preventDefault();e.keyCode!=CAutoComplete.KEY_UP&&e.keyCode!=CAutoComplete.KEY_DOWN||(e.keyCode==CAutoComplete.KEY_UP?(t.length&&(n=t.prev()),n.length||(n=this.m_$Popup.children("div:last-child"))):(t.length&&(n=t.next()),n.length||(n=this.m_$Popup.children("div:first-child"))),n.length&&(t.removeClass("focus"),n.addClass("focus")),e.preventDefault())},CAutoComplete.prototype.OnInputKeyUp=function(e){this.m_bSuppressNextKeyUp&&e.keyCode==CAutoComplete.KEY_ENTER&&(this.m_bSuppressNextKeyUp=!1,e.preventDefault())},FixedElementOnScrollWrapper.prototype.BIsFixed=function(){return this.fixedClass?this.$FixedElement.hasClass(this.fixedClass):"fixed"==this.$FixedElement.css("position")},FixedElementOnScrollWrapper.prototype.handleScroll=function(e){this.scrollOffset=document.viewport.getScrollOffsets().top;var t=this.fixedOffsetTop+GetResponsiveHeaderFixedOffsetAdjustment();if(e&&!this.BIsFixed()&&(this.homePosn={x:this.fixedElement.cumulativeOffset()[0],y:this.fixedElement.cumulativeOffset()[1]}),this.scrollOffset>this.homePosn.y-t){if(this.BIsFixed()&&!e||(this.fixedClass?this.$FixedElement.addClass(this.fixedClass):this.$FixedElement.css("position","fixed"),this.fixedElement.style.top=t+"px",this.fixedElement.style.left=this.homePosn.x,this.$FixedElementPadding.css("display",""),this.$FixedElementPadding.css("height",this.fixedElement.getHeight()+"px")),this.bScrollWithPageIfTooTall){var n=this.fixedElement.getHeight()+t;if(n>document.viewport.getHeight()){var i=GetCurrentScrollPercentage(),o=n-(document.viewport.getHeight()-this.docHeightOffset);t-=Math.floor(o*i/100),this.fixedElement.style.top=t+"px"}}}else this.BIsFixed()&&(this.fixedClass?this.$FixedElement.removeClass(this.fixedClass):this.$FixedElement.css("position",""),this.$FixedElement.css("top","").css("left",""),this.$FixedElementPadding.css("display","none"))},CTextInputSuggest.prototype.Init=function(e,t,n,i){i||(i="popup_block_new"),this.m_bHaveSuggestions=!1,this.m_$Input=e,this.m_fnSuggestForTerm=t,this.m_fnOnSuggest=n||function(e){},this.m_strLastVal="",this.m_align="left",this.m_valign="bottom",this.m_$Focus=$J(),this.m_strLastFocusVal=null,this.m_$SuggestionsCtn=$J("<div/>",{class:i,style:"display: none;"}),this.m_$Suggestions=$J("<div/>",{class:"popup_body popup_menu"}),this.m_$SuggestionsCtn.append(this.m_$Suggestions),this.m_$SuggestionsCtn.hide(),$J(document.body).append(this.m_$SuggestionsCtn);var o=200;this.m_$Input.parents().each(function(){var e=$J(this).css("zIndex");"auto"!=e&&0!=e&&(o=e)}),this.m_$SuggestionsCtn.css("zIndex",o+20);var r=this;this.m_$Input.on("keyup.CTextInputSuggest click.CTextInputSuggest",function(e){r.OnTextChanged(e)}),this.m_$Input.on("paste.CTextInputSuggest cut.CTextInputSuggest",function(){window.setTimeout(function(){r.OnTextChanged()},1)}),this.m_$Input.on("keydown.CTextInputSuggest",function(e){r.OnKeyDown(e)}),this.m_$Input.on("focus.CTextInputSuggest",function(){r.ShowSuggestions()}),this.m_$Input.on("blur.CTextInputSuggest",function(){r.HideSuggestions()})},CTextInputSuggest.prototype.SetAlignment=function(e,t){this.m_align=e||"left",this.m_valign=t||"bottom"},CTextInputSuggest.prototype.SetSuggestionsContainerId=function(e){this.m_$SuggestionsCtn.attr("id",e)},CTextInputSuggest.prototype.ShowSuggestions=function(){!this.m_$SuggestionsCtn.find(":visible").length&&this.m_bHaveSuggestions&&(AlignMenu(this.m_$Input[0],this.m_$SuggestionsCtn[0],this.m_align,this.m_valign,!0),this.m_$SuggestionsCtn.fadeIn("fast"))},CTextInputSuggest.prototype.HideSuggestions=function(){this.m_bHaveSuggestions?this.m_$SuggestionsCtn.fadeOut("fast"):this.m_$SuggestionsCtn.hide()},CTextInputSuggest.prototype.OnSuggestionSelected=function(e){this.m_$Input.val(e.text()),this.m_bHaveSuggestions=!1,this.m_$Focus=$J(),this.HideSuggestions(),this.m_fnOnSuggest(e.text())},CTextInputSuggest.prototype.SetSuggestions=function(e){var t=this.m_strLastFocusVal;if(this.m_$Suggestions.empty(),this.m_$Focus=$J(),this.m_strLastFocus=null,e&&e.length){for(var n=0;n<e.length;n++){var i=$J("<div/>",{class:"suggestion_item popup_menu_item"});i.text(e[n]),i.click($J.proxy(this.OnSuggestionSelected,this,i)),i.mouseenter($J.proxy(this.SetFocus,this,i)),this.m_$Suggestions.append(i),e[n]==t&&this.SetFocus(i)}this.m_bHaveSuggestions=!0,this.ShowSuggestions()}else this.m_bHaveSuggestions=!1,this.HideSuggestions()},CTextInputSuggest.prototype.OnTextChanged=function(e){if(!e||13!=e.which&&27!=e.which){var t=this.m_$Input.val();if(t!=this.m_strLastVal){var n=this;this.m_fnSuggestForTerm(t,function(e){n.SetSuggestions(e)}),this.m_strLastVal=t}}},CTextInputSuggest.prototype.OnKeyDown=function(e){if(27==e.which)this.HideSuggestions();else if(this.m_bHaveSuggestions){var t=null;13==e.which?this.m_$Focus.length&&this.m_bHaveSuggestions&&(this.OnSuggestionSelected(this.m_$Focus),e.stopPropagation(),e.preventDefault()):38==e.which?(e.preventDefault(),this.m_$Focus.length&&(t=this.m_$Focus.prev()),t||(t=this.m_$Suggestions.children().last())):40==e.which&&(e.preventDefault(),this.m_$Focus.length&&(t=this.m_$Focus.next()),t||(t=this.m_$Suggestions.children().first())),t&&this.SetFocus(t)}},CTextInputSuggest.prototype.SetFocus=function(e){this.m_$Focus.removeClass("focus"),this.m_$Focus=e,this.m_$Focus.addClass("focus"),this.m_strLastFocusVal=e.text()},CTextInputSuggest.prototype.Destroy=function(){this.m_$SuggestionsCtn.remove(),this.m_$Input.off(".CTextInputSuggest")},CIndexedInputSuggest.prototype=Object.create(CTextInputSuggest.prototype),CIndexedInputSuggest.prototype.OnSuggestionSelected=function(e){this.m_$Input.val(e.text()),this.m_bHaveSuggestions=!1,this.m_$Focus=$J(),this.HideSuggestions(),this.m_fnOnSuggest(e.data("suggest-key"),e.text())},CIndexedInputSuggest.prototype.SetSuggestions=function(e){var t=this.m_strLastFocusVal;if(this.m_$Suggestions.empty(),this.m_$Focus=$J(),this.m_strLastFocus=null,e&&e.length){for(var n=0;n<e.length;n++){var i=$J("<div/>",{class:"suggestion_item popup_menu_item"});e[n].text?i.text(e[n].text):e[n].html&&i.html(e[n].html),i.data("suggest-key",e[n].key),i.click($J.proxy(this.OnSuggestionSelected,this,i)),i.mouseenter($J.proxy(this.SetFocus,this,i)),this.m_$Suggestions.append(i),e[n]==t&&this.SetFocus(i)}this.m_bHaveSuggestions=!0,this.ShowSuggestions()}else this.m_bHaveSuggestions=!1,this.HideSuggestions()};var CAjaxSubPageController=function(e,t,n,i){this.elTarget=e,this.strBaseURL=t,this.strStateID=n||"navid",this.strDefaultLocation=i||"",this.rgOriginalEvent={html:this.elTarget.innerHTML,title:document.title,id:this.strStateID},window.addEventListener("popstate",this.OnWindowPopState.bind(this)),this.InstrumentLinks(document);var o=this;setTimeout(function(){$J(o.elTarget).children().trigger("load")},1);var r=window.location.href.substring(t.length);this.PaintLinks(r||this.strDefaultLocation)};CAjaxSubPageController.prototype.InstrumentLinks=function(e){for(var t=$J("[data-"+this.strStateID+"]",e),n=0;n<t.length;n++)t[n].addEventListener("click",this.Navigate.bind(this,t[n].dataset[this.strStateID],t[n].dataset.title)),t[n].href=this.strBaseURL+t[n].dataset[this.strStateID];BindStoreTooltip($J("[data-store-tooltip]",e))},CAjaxSubPageController.prototype.PaintLinks=function(e){for(var t=document.querySelectorAll("[data-"+this.strStateID+"]"),n=0;n<t.length;n++)t[n].dataset[this.strStateID]==e?t[n].classList.add("active"):t[n].classList.remove("active")},CAjaxSubPageController.prototype.Navigate=function(e,t,n){var i=this,o=this.strBaseURL+e;this.elTarget.classList.add("loading"),this.PaintLinks(e),$J("form",this.elTarget).trigger("saveform"),$J.ajax({url:o,dataType:"html",cache:!0,data:{ajax:1}}).done(function(e){var n=$J(e);$J(i.elTarget).empty(),$J(i.elTarget).append(n),i.elTarget.classList.remove("loading"),$J(n).trigger("load"),i.InstrumentLinks(i.elTarget),t&&(document.title=t),$J(".tooltip",i.elTarget).v_tooltip(),window.history.pushState({html:e,title:t,id:i.strStateID},"",o)}),n&&n.preventDefault()},CAjaxSubPageController.prototype.OnWindowPopState=function(e){null==e.state&&(e.state=5);var t=e.state||this.rgOriginalEvent;if(t&&t.id==this.strStateID){var n=window.location.href.substring(this.strBaseURL.length);this.PaintLinks(n);var i=$J(t.html);$J(this.elTarget).empty(),$J(this.elTarget).append(i),t.title&&(document.title=t.title),$J(i).trigger("load"),this.InstrumentLinks(i)}},$J=jQuery.noConflict(),"object"==typeof JSON&&JSON.stringify&&JSON.parse||document.write('<script type="text/javascript" src="http://community.edgecast.steamstatic.com/public/javascript/json2.js?v=pmScf4470EZP&amp;l=english" ><\/script>\n');var modalContent={},activeContent,bodyClassName="",resizeActiveContentTimer=null,g_bModalModifyAnchorTargets=!0,g_bModalCacheContent=!0;function OnModalContentDismissal(){document.body.style.overflow="",$("modalContentScrollbarHack").hide(),$("ModalContentContainer")&&($("ModalContentContainer").className=bodyClassName),activeContent.contentWindow.onModalHidden&&activeContent.contentWindow.onModalHidden(),activeContent.contentWindow.document.getElementsByTagName("object").length>0||activeContent.contentWindow.document.getElementsByTagName("iframe").length>0||!g_bModalCacheContent?($("modalContentFrameContainer").removeChild(activeContent),modalContent[activeContent.src]=null):modalContent[activeContent.src]||$("modalContentFrameContainer").removeChild(activeContent),activeContent=null,$("modalContent").fire("modalContent:dismissed")}function InnerAnchorClickHandler_Deferred(){PollResizeActiveModalContent(),HookAnchors()}function InnerAnchorClickHandler(){setTimeout(InnerAnchorClickHandler_Deferred,1)}function HookAnchors(){if(activeContent){if(g_bModalModifyAnchorTargets){var e;try{e=activeContent.contentDocument.getElementsByTagName("a")}catch(e){return}for(var t=0;t<e.length;t++){var n=e[t];""==n.target&&(n.target="_top")}}Event.observe(activeContent.contentDocument.body,"click",InnerAnchorClickHandler)}}function OnModalContentLoaded(){modalContentLoaded||(modalContentLoaded=!0,HookAnchors(),$("modalContentWait").hide(),modalContent[activeContent.src]=activeContent,activeContent.show(),SizeModalContent(activeContent))}function OnModalContentFullyLoaded(){OnModalContentLoaded(),$(activeContent).contentDocument.body.setStyle&&$(activeContent).contentDocument.body.setStyle({"overflow-x":"hidden"}),activeContent.forceResize=!0,SizeModalContent(activeContent),resizeActiveContentTimer=setTimeout(PollResizeActiveModalContent,100)}function SizeModalContent(e){e.sizeToFit?(SizeToFitScreen(e),resizeActiveContentTimer=setTimeout(PollResizeActiveModalContent,200)):ResizeModalContent(e)}function SizeToFitScreen(e){SizeToFitScreen_Deferred.bind(null,e).defer()}function SizeToFitScreen_Deferred(e){var t=document.viewport.getDimensions(),n=t.width,i=t.height;if(!e.forceResize&&void 0!==e.lastWidth&&void 0!==e.lastHeight&&e.lastWindowWidth==n&&e.lastWindowHeight==i)return $("modalContent").style.width=e.lastWidth+"px",$("modalContent").style.height=e.lastHeight+"px",modalSizing($("modalContent")),!1;e.forceResize=!1;var o=Math.floor(.95*n),r=Math.max(300,Math.floor(.95*i)),s=$(e).contentDocument.body.offsetWidth/$(e).contentDocument.body.offsetHeight;$("modalContentTitleBar").visible()&&$("modalContentTitleBar").getHeight();var a=o,l=Math.floor(a/s);l>r&&(l=r,a=Math.floor(l*s)),a+=12,$("modalContent").style.width=a+"px";var c=ResizeModalContent(e);return e.lastWindowWidth=n,e.lastWindowHeight=i,e.lastWidth=a,e.lastHeight=$("modalContent").getHeight(),c}function PollResizeActiveModalContent(){if(activeContent&&activeContent.visible()){(activeContent.sizeToFit?SizeToFitScreen(activeContent):ResizeModalContent(activeContent))&&(resizeActiveContentTimer=setTimeout(PollResizeActiveModalContent,100))}}function ResizeModalContent(e){var t=document.viewport.getDimensions(),n=t.height,i=t.width,o=$(e).contentDocument.body.scrollHeight,r=Math.min(o,Math.max(300,Math.floor(.95*n))),s=r;$("modalContentTitleBar").visible()&&(s+=$("modalContentTitleBar").getHeight());var a=$("modalContent").getHeight()-4,l=$("modalContentFrameContainer").getHeight(),c=$(e).getHeight();if(a==s&&l==r&&c==o)return!1;$("modalContent").style.height=s+"px",$("modalContentFrameContainer").style.height=r+"px";var u=$J("#modalContent");return u.width()>.95*i?(u.data("origWidth")||u.data("origWidth",u.width()),$("modalContent").style.width=Math.max(310,Math.floor(.95*i))+"px"):u.data("origWidth")&&u.data("origWidth")>u.width()&&($("modalContent").style.width=Math.min(u.data("origWidth"),Math.floor(.95*i))+"px"),$(e).style.height=r+"px",modalSizing($("modalContent")),!0}function ShowModalContent(e,t,n,i){var o=!1;navigator.userAgent.match(/Valve Steam Tenfoot/i)&&(o=!0),void 0!==document.location.toString().toQueryParams().insideModal||o?window.parent.location.href=e.replace("insideModal=1","insideModal=0"):(EnsureModalContentDivExists(),ShowModalContent_Deferred.bind(null,e,t,n,void 0!==i&&i).defer())}function ShowModalContent_Deferred(e,t,n,i){return EnsureModalContentDivExists(),i=void 0!==i&&i,$("modalContent").style.width="990px",$("modalContent").style.height="",showModal("modalContent",!1,!1),$("modalContent").OnModalDismissal=OnModalContentDismissal,$("modalContentFrameContainer").childElements().invoke("hide"),$("modalContent").childElements().invoke("hide"),$("modalContentWait").show(),void 0!==t&&void 0!==n?($("modalContentTitleBar").show(),$("modalContentTitleBarLink").href=n,$("modalContentTitleBarImageLink").href=n,$("modalContentTitleBarLink").innerHTML=t):$("modalContentTitleBar").hide(),document.body.style.overflow="hidden",$("ModalContentContainer")&&(bodyClassName=$("ModalContentContainer").className,$("ModalContentContainer").className="modalBody"),$("modalContentScrollbarHack").show(),$("modalContentDismiss").show(),modalContent[e]?($("modalContentWait").hide(),modalContent[e].show(),SizeModalContent(modalContent[e]),activeContent=modalContent[e],resizeActiveContentTimer=setTimeout(PollResizeActiveModalContent,100)):(modalContentLoaded=!1,iframeContent=new Element("iframe",{class:"modalContent_iFrame",onLoad:"OnModalContentFullyLoaded()",style:"display: none;",scrolling:i?"no":"auto"}),iframeContent.src=e,(activeContent=iframeContent).sizeToFit=i,$("modalContentFrameContainer").appendChild(iframeContent),$("modalContentFrameContainer").style.height="0px"),$("modalContentFrameContainer").show(),!1}function HideModalContent(){$("modalContent")&&hideModal("modalContent")}function EnsureModalContentDivExists(){$("modalContent")||$(document.body).insert({bottom:'<div id="modalContentScrollbarHack" style="display: none"></div>\r\n\r\n<div id="modalContent" class="modal_frame" style="display: none">\r\n\t<div id="modalContentTitleBar">\r\n\t\t<a id="modalContentTitleBarLink" href="" target="_blank">&nbsp;</a>\r\n\t\t<a id="modalContentTitleBarImageLink" href="" target="_blank"><img src="http://community.edgecast.steamstatic.com/public/images/skin_1/ico_external_link.gif" alt=""></a>\r\n\t\t<div id="modalContentDismiss" class="modalContentDismissImage" onclick="HideModalContent();">\r\n\t\t\t<img src="http://community.edgecast.steamstatic.com/public/images/x9x9.gif" width="9" height="9" border="0" alt="Close">\r\n\t\t</div>\r\n\t</div>\r\n\t<div id="modalContentWait"><img src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif" alt="Loading"></div>\r\n\t<div id="modalContentFrameContainer"></div>\r\n</div>'})}modalContentLoaded=!1,$J(function(e){e(window).on("resize.modalContent",PollResizeActiveModalContent);var t=!1;e(document).on("touchstart.modalContent","a.modalContentLink, div.modalContentLink",function(e){t=!0}),e(document).on("click.modalContent","a.modalContentLink, div.modalContentLink",function(n){var i=e(n.currentTarget),o=i.is("a");if(o&&(t||n.which&&1!=n.which))t=!1;else{o&&n.preventDefault();var r=i.data("modalContentUrl");if(r||(r=i.attr("href")),0==window.location.href.indexOf("https://")&&(r=r.replace("http://","https://")),t)return t=!1,void(window.location=r);var s=i.data("modalContentPopupUrl");s||(s=r+(-1!=r.indexOf("?")?"&":"?")+"insideModal=1");var a=e(n.currentTarget).data("modalContentTitle");a||(a=V_EscapeHTML(r));var l=e(n.currentTarget).data("modalContentSizetofit");void 0===l&&(l=!0),ShowModalContent(s,a,r,l)}})});var g_fnModalDismissHandler=!1,g_bIsMobileController=!1;function showGotSteamModal(e,t,n){$("gotSteam_SteamURL").href=t,$("gotSteam_AppName").update(n),showModal(e)}function showContentAsModal(e,t,n){var i=$(e),o=i.down(".modal_box_ctn");t.parentNode!=o&&(t.parentNode&&t.remove(),o.appendChild(t)),t.siblings().invoke("hide"),t.show(),showModal(i,n)}function showModal(e,t,n){var i=$(e);if(i.is_visible_modal)modalSizing(i,!0);else{var o=$("modalBG");o||(o=document.createElement("div"),$J(document.body).append(o),o.id="modalBG"),o.effect&&o.effect.cancel(),o.setOpacity(0),o.effect=new Effect.Appear(o,{from:0,to:.7,duration:.4}),i.parentNode!=document.body&&$(document.body).appendChild(i),i.show(),g_bIsMobileController||(modalSizing(i,!0),i.sizingListener=modalSizing.bind(null,i,!1)),Prototype.Browser.MobileSafari||g_bIsMobileController||null!=n&&0!=n||(Event.observe(window,"resize",i.sizingListener),Event.observe(window,"scroll",i.sizingListener)),t||(i.identify(),function(){g_fnModalDismissHandler=RegisterPopupDismissal(hideModal.bind(null,i),i,!0)}.defer()),i.is_visible_modal=!0}}function modalSizing(e,t){var n=1/(document.body.style.zoom||1),i=document.viewport.getWidth()*n,o=document.viewport.getHeight()*n,r=document.viewport.getScrollOffsets().left,s=document.viewport.getScrollOffsets().top,a=e.offsetWidth,l=e.offsetHeight,c=Math.floor(o/2-l/2)+s,u=Math.floor(i/2-a/2)+r;l<document.viewport.getHeight()?e.style.top=(c<0?0:c)+"px":t&&(e.style.top=s+"px"),a<document.viewport.getWidth()?e.style.left=(u<0?0:u)+"px":t&&(e.style.left=r+"px")}function hideModal(e){var t=$(e);if(t.is_visible_modal){var n=$("modalBG");n.effect&&n.effect.cancel(),n.effect=new Effect.Fade(n,{duration:.2}),t.hide(),currentModal=!1,Prototype.Browser.MobileSafari||(Event.stopObserving(window,"resize",t.sizingListener),Event.stopObserving(window,"scroll",t.sizingListener)),g_fnModalDismissHandler&&(g_fnModalDismissHandler.unregister(),g_fnModalDismissHandler=!1),t.OnModalDismissal&&t.OnModalDismissal(),t.is_visible_modal=!1}}function modalAlert(e){if(modalEl=document.getElementById("modalAlert"),modalEl){for(x=0;x<modalEl.childNodes.length;x++)modalEl.removeChild(modalEl.childNodes[x]);modalEl.parentNode.removeChild(modalEl)}modalEl=document.createElement("div")}function PresentGroupInviteOptions(e){var t=new jQuery.Deferred,n=ShowDialog("Invite to Join Your Group",'<div class="group_invite_throbber"><img src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif"></div>'),i=$J("<div/>",{class:"newmodal_content_innerbg"}),o=!1,r=g_rgProfileData.steamid,s=g_rgProfileData.url;e&&e instanceof Array&&(1==e.length?s="http://steamcommunity.com/profiles/"+(r=e[0])+"/":(r=e,o=!0));var a=function(){t.reject()};return $J.get(s+"ajaxgroupinvite?new_profile=1"+(o?"&bulk=1":""),function(e){n.GetContent().find(".newmodal_content").html(""),n.GetContent().find(".newmodal_content").append(i),i.html(e),n.AdjustSizing(),i.children(".group_list_results").children().each(function(){var e=this.getAttribute("data-groupid");e&&$J(this).click(function(){a=function(){},InviteUserToGroup(n,e,r).done(function(){t.resolve()}).fail(function(){t.reject()})})})}),n.done(function(){a()}),t.promise()}function InviteUserToGroup(e,t,n){var i={json:1,type:"groupInvite",group:t,sessionID:g_sessionID};return n instanceof Array?i.invitee_list=V_ToJSON(n):i.invitee=n,$J.ajax({url:"http://steamcommunity.com/actions/GroupInvite",data:i,type:"POST"}).done(function(t){e&&e.Dismiss();ShowAlertDialog("Invite to Join Your Group","Invitation Sent!")}).fail(function(t){e&&e.Dismiss();var n=t.responseJSON,i="";n.rgAccounts&&(i='<table class="clanInviteErrorTable" ><thead><tr><th class="inviteTablePersona" >Invited Player</th><th class="inviteTableError">Error</th></tr></thead><tbody>',$J.each(n.rgAccounts,function(e,t){i+="<tr>",i+='<td class="inviteTablePersona">'+t.persona+"</td>",i+='<td class="inviteTableError">'+t.strError+"</td>",i+="</tr>"}),i+="</tbody></table>"),ShowAlertDialog("Error",n.results?n.results+i:"Error processing your request. Please try again.")})}function RemoveFriend(){var e=g_rgProfileData.steamid,t=g_rgProfileData.personaname;ShowConfirmDialog("Remove friend","Are you sure you want to remove %s from your friend list?".replace(/%s/,t),"Remove friend").done(function(){$J.post("http://steamcommunity.com/actions/RemoveFriendAjax",{sessionID:g_sessionID,steamid:e}).done(function(){ShowAlertDialog("Remove friend","%s has been removed from your friends list.".replace(/%s/,t)).done(function(){window.location.reload()})}).fail(function(){ShowAlertDialog("Remove friend","Error processing your request. Please try again.")})})}function AddFriend(e,t,n){var i=t||g_rgProfileData.steamid,o=n||g_rgProfileData.personaname;$J.post("http://steamcommunity.com/actions/AddFriendAjax",{sessionID:g_sessionID,steamid:i,accept_invite:e?1:0}).done(function(){e?ShowAlertDialog("Accept Friend Request","Friend request accepted").done(function(){window.location.reload()}):ShowAlertDialog("Add Friend - "+o,"Friend invite sent. They will appear as a friend once they have accepted your invite.")}).fail(function(e){var t=e.responseJSON.failed_invites_result;if(void 0!==t){var n="Error adding friend. Please try again.";switch(t[0]){case 25:n="Could not invite %s. Your friends list is full.";break;case 15:n="Could not invite %s. Their friends list is full.";break;case 40:n="Error adding Friend. Communication between you and this user has been blocked.";break;case 11:n="You are blocking all communication with this user. Before communicating with this user, you must unblock them by visiting their Steam Community Profile.";break;case 84:n="You've sent too many invitations recently. Try again in a day or two.";break;case 24:n='Your account does not meet the requirements to use this feature. <a class="whiteLink" href="https://help.steampowered.com/en/wizard/HelpWithLimitedAccount" target="_blank" rel="noreferrer">Visit Steam Support</a> for more information.'}ShowAlertDialog("Add Friend",n=n.replace(/%s/,o))}else ShowAlertDialog("Add Friend","Error adding friend. Please try again.")})}function IgnoreFriendInvite(e,t){var n=e||g_rgProfileData.steamid;t||g_rgProfileData.personaname;$J.post("http://steamcommunity.com/actions/IgnoreFriendInviteAjax",{sessionID:g_sessionID,steamid:n}).done(function(){ShowAlertDialog("Ignore Friend Request","Friend request ignored").done(function(){window.location.reload()})}).fail(function(){ShowAlertDialog("Ignore Friend Request","Error ignoring friend request. Please try again.")})}function ConfirmBlock(){var e=g_rgProfileData.steamid,t=g_rgProfileData.personaname;ShowConfirmDialog("Block All Communication","You are about to block all communication with %s.".replace(/%s/,t),"Yes, block them").done(function(){$J.post("http://steamcommunity.com/actions/BlockUserAjax",{sessionID:g_sessionID,steamid:e,block:1}).done(function(){ShowAlertDialog("Block All Communication","You have blocked all communications with this player.").done(function(){location.reload()})}).fail(function(){ShowAlertDialog("Block All Communication","Error processing your request. Please try again.")})})}function ConfirmUnblock(){var e=g_rgProfileData.steamid,t=g_rgProfileData.personaname;ShowConfirmDialog("Unblock All Communication","You are about to unblock all communication with %s.".replace(/%s/,t),"Yes, unblock them").done(function(){$J.post("http://steamcommunity.com/actions/BlockUserAjax",{sessionID:g_sessionID,steamid:e,block:0}).done(function(){ShowAlertDialog("Unblock All Communication","You have unblocked all communications with this player.").done(function(){location.reload()})}).fail(function(){ShowAlertDialog("Unblock All Communication","Error processing your request. Please try again.")})})}function InitProfileSummary(e){var t=$J(".profile_summary"),n=$J(".profile_summary_footer");if(t[0].scrollHeight<=76)t.addClass("noexpand"),n.hide();else{var i=$J("<div/>",{class:"profile_summary_modal"}).html(e);n.find("span").click(function(){var e=ShowDialog("Info",i);window.setTimeout(function(){e.AdjustSizing()},1)})}}function ShowFriendsInCommon(e){ShowPlayerList("Friends in Common","friendsincommon",e)}function ShowFriendsInGroup(e){ShowPlayerList("Friends in Group","friendsingroup",e)}function ShowPlayerList(e,t,n,i){var o=ShowAlertDialog(e,'<div class="group_invite_throbber"><img src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif"></div>'),r=$J("<div/>",{class:"player_list_ctn"}),s=o.GetContent().find(".newmodal_buttons").detach();o.GetContent().css("min-width",268);var a={};t&&(a.type=t),n&&(a.target=n),i&&(a.accountids=i.join(",")),$J.get("http://steamcommunity.com/actions/PlayerList/",a,function(e){r.html(e);var t=o.GetContent().find(".newmodal_content");t.html(""),t.append(r),t.append(s),o.AdjustSizing(),r.append()})}function ToggleManageFriends(){$J("#manage_friends_actions_ctn").is(":hidden")?($J("#manage_friends_btn").find(".btn_details_arrow").removeClass("down").addClass("up"),$J("#manage_friends_actions_ctn").slideDown("fast"),$J("div.manage_friend_checkbox").show(),$J("a.friendBlockLinkOverlay").on("click.manage_friends",function(e){e.which&&1!=e.which||(e.preventDefault(),$J(this).siblings(".manage_friend_checkbox").find("input[type=checkbox]").prop("checked",function(e,t){return!t}))})):($J("#manage_friends_btn").find(".btn_details_arrow").removeClass("up").addClass("down"),$J("#manage_friends_actions_ctn").slideUp("fast"),$J("div.manage_friend_checkbox").hide(),$J("a.friendBlockLinkOverlay").off("click.manage_friends"))}function ManageFriendsInviteToGroup(e,t){e.find('input[type="checkbox"]');var n=[];e.find("input[type=checkbox]").each(function(){this.checked&&n.push($J(this).attr("data-steamid"))}),n.length>0?t?InviteUserToGroup(null,t,n).done(function(){e.find("input[type=checkbox]").prop("checked",!1)}):PresentGroupInviteOptions(n).done(function(){e.find("input[type=checkbox]").prop("checked",!1)}):ShowAlertDialog("Invite to Join Your Group","You have not selected any friends.")}function ManageFriendsExecuteBulkAction(e,t){0!=e.find("input[type=checkbox]:checked").length?(e.find("input[name=action]").val(t),e.submit()):ShowAlertDialog("","You have not selected any friends.")}function ManageFriendsConfirmBulkAction(e,t,n,i,o){var r=e.find("input[type=checkbox]:checked").length;if(0!=r){var s=i;1!=r&&(s=o.replace(/%s/,r)),ShowConfirmDialog(n,s).done(function(){ManageFriendsExecuteBulkAction(e,t)})}else ShowAlertDialog(n,"You have not selected any friends.")}function ManageFriendsBlock(e){ManageFriendsConfirmBulkAction(e,"ignore","Block","Are you sure you want to block this friend? You will no longer be able to send or receive messages or invites with this player.","Are you sure you want to block these %s friends? You will no longer be able to send or receive messages or invites with these players.")}function ManageFriendsRemove(e){ManageFriendsConfirmBulkAction(e,"remove","Remove Friend","Are you sure you want to remove this friend? This player will no longer appear in your friends list and you will not be able to communicate with them.","Are you sure you want to remove these %s friends? These players will no longer appear in your friends list and you will not be able to communicate with them.")}function ManageFollowingRemove(e){ManageFriendsConfirmBulkAction(e,"removefollowing","Remove from your following list?","Are you sure you want to stop following this person?","Are you sure you want to stop following %s people?")}function ManageFriendsAddFriends(e){ManageFriendsConfirmBulkAction(e,"addfriend","Add to friends list","Are you sure you want to send a friend invite to the selected players? ","Are you sure you want to send a friend invite to the selected players? ")}var AliasesLoaded=!1;function ShowAliasPopup(e){if(ShowMenu(e,"NamePopup","left"),AliasesLoaded)return!0;var t=$("NamePopupAliases"),n=document.createElement("img");n.src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif",t.appendChild(n),new Ajax.Request(g_rgProfileData.url+"ajaxaliases/",{method:"post",parameters:{},onSuccess:function(e){var n=e.responseJSON;if(t){t.update(""),n&&0!=n.length||n.push({newname:"This user has no known aliases"});for(var i=0;i<n.length;i++){var o=n[i],r=document.createElement("p"),s=document.createTextNode(o.newname);r.appendChild(s),t.appendChild(r)}AliasesLoaded=!0}},onFailure:function(e){alert("Please try again later")}})}function IsValidNickname(e){return 0==e.length||e.strip().length>2}function ShowNicknameModal(){ShowPromptDialog("Add Nickname","Add a persistent nickname to this player to keep track of who they are.","Add Nickname","Cancel").done(function(e,t){$J.ajax({url:g_rgProfileData.url+"ajaxsetnickname/",data:{nickname:e,sessionid:g_sessionID},type:"POST",dataType:"json"}).done(function(e){null!=e.nickname&&e.nickname.length>0?($target=$J(".persona_name .nickname"),0==$target.length&&($target=$J('<span class="nickname"></span>').insertBefore(".namehistory_link")),$target.text("("+e.nickname+") "),$target.show()):$J(".persona_name .nickname").hide()}).fail(function(e){ShowAlertDialog("",e.results?e.results:"Error processing your request. Please try again.")})})}function SetFollowing(e,t){var n=e?g_rgProfileData.url+"followuser/":g_rgProfileData.url+"unfollowuser/";$J.ajax({url:n,data:{sessionid:g_sessionID},type:"POST",dataType:"json"}).done(function(n){t(e)}).fail(function(e){ShowAlertDialog("",e.results?e.results:"Error processing your request. Please try again.")})}function ShowFriendSelect(e,t){var n=ShowAlertDialog(e,'<div class="group_invite_throbber"><img src="http://community.edgecast.steamstatic.com/public/images/login/throbber.gif"></div>',"Cancel"),i=$J("<div/>",{class:"player_list_ctn"}),o=n.GetContent().find(".newmodal_buttons").detach();n.GetContent().css("min-width",268);$J.get("http://steamcommunity.com/actions/PlayerList/",{type:"friends"},function(e){i.html(e),i.find("a").remove(),i.find("[data-miniprofile]").each(function(){var e=$J(this);e.click(function(){n.Dismiss(),t(e.data("miniprofile"))})});var r=n.GetContent().find(".newmodal_content");r.html(""),r.append(i),r.append(o),n.AdjustSizing()})}function StartTradeOffer(e,t){var n=t||{};n.partner=e,ShowTradeOffer("new",n)}function CancelTradeOffer(e){ShowConfirmDialog("Cancel Trade Offer","Are you sure you want to cancel this trade offer?","Yes","No").done(function(){ActOnTradeOffer(e,"cancel","Trade Offer Canceled","Cancel Trade Offer")})}function DeclineTradeOffer(e){ShowConfirmDialog("Decline Trade","Are you sure you want to decline this trade offer?  You can also modify the items and send a counter offer.","Decline Trade",null,"Make a Counter Offer").done(function(t){"OK"==t?ActOnTradeOffer(e,"decline","Trade Declined","Decline Trade"):ShowTradeOffer(e,{counteroffer:1})})}function ActOnTradeOffer(e,t,n,i){var o=$J("#tradeofferid_"+e);return o.find(".tradeoffer_footer_actions").hide(),$J.ajax({url:"https://steamcommunity.com/tradeoffer/"+e+"/"+t,data:{sessionid:g_sessionID},type:"POST",crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(t){AddTradeOfferBanner(e,n,!1),RefreshNotificationArea()}).fail(function(){ShowAlertDialog(i,"There was an error modifying this trade offer.  Please try again later."),o.find(".tradeoffer_footer_actions").show()})}function AddTradeOfferBanner(e,t,n){var i=$J("#tradeofferid_"+e);i.find(".tradeoffer_footer_actions").hide(),i.find(".link_overlay").hide(),i.find(".tradeoffer_items_ctn").removeClass("active").addClass("inactive");var o=$J("<div/>",{class:"tradeoffer_items_banner"});n&&o.addClass("accepted"),o.text(t),i.find(".tradeoffer_items_rule").replaceWith(o)}var g_elActiveSticker=!1,g_elStickerContainer=null,g_rgDragState=!1,g_nBaseScaleFactor=1,CStickerManager=function(e,t){for(var n in this.unWidthActual=940,this.fScaleFactor=this.unWidthActual/2100,this.elContainer=e,this.rgOwnedStickers=[],this.bEditMode=t||!1,this.rgNewStickersCount={},this.bEditMode&&this.ShowEditHandles(),this.rgStickerDefinitions=g_rgStickerDefs,this.rgStickerDefinitions)this.rgStickerToIdMap.push(n),-1===this.rgSceneToIdMap.indexOf(this.rgStickerDefinitions[n].texture)&&this.rgSceneToIdMap.push(this.rgStickerDefinitions[n].texture);for(var i=0;i<this.rgSceneToIdMap.length;i++)CStickerManager.prototype.rgStickerTextures[this.rgSceneToIdMap[i]]="http://community.edgecast.steamstatic.com/public/images/promo/summer2017/stickers/"+this.rgSceneToIdMap[i]+"_sprites.png?v=22",CStickerManager.prototype.rgBackgroundTextures[this.rgSceneToIdMap[i]]="http://community.edgecast.steamstatic.com/public/images/promo/summer2017/stickers/"+this.rgSceneToIdMap[i]+".jpg?v=22";window.addEventListener("resize",this.HandleResize.bind(this)),this.HandleResize()};CStickerManager.prototype.HandleResize=function(){var e=this.elContainer.parentNode.clientWidth/this.unWidthActual;this.elContainer.style.transform="scale( "+e+", "+e+" )",this.fLocalScale=e,this.elContainer.style.width=this.unWidthActual+"px",this.elContainer.getElementsByClassName("sticker_background")[0].style.width=this.unWidthActual+"px",document.getElementById("logo_anim")&&(document.getElementById("logo_anim").style.transform="scale( "+e+", "+e+" )")},CStickerManager.prototype.rgStickerTextures={},CStickerManager.prototype.rgBackgroundTextures={},CStickerManager.prototype.rgStickerToIdMap=[],CStickerManager.prototype.rgSceneToIdMap=[],CStickerManager.prototype.rgSceneData={},CStickerManager.prototype.rgStickerDefinitions={},CStickerManager.prototype.RegisterSprites=function(e,t,n){},CStickerManager.prototype.AddSticker=function(e){if(!this.BSceneHasSticker(e))if(this.GetSceneData().length>50)ShowAlertDialog("Too many stickers!","Whoa there! You're trying to put more than 50 stickers on this page. If you want to add more, you'll need to peel a few off first.");else{var t=this.rgStickerDefinitions[e];t.texture==this.strScene?this.CreateSticker(e,t.dx*this.fScaleFactor,t.dy*this.fScaleFactor,1,1,0,t.z):this.CreateSticker(e,10,10,1,1,0),!this.BSceneUnlocked(this.strScene)&&this.BSceneCanBeUnlocked(this.strScene)&&this.UnlockScene(this.strScene)}},CStickerManager.prototype.PopulateStickerList=function(){var e=document.getElementById("sticker_selector");if(e){for(;e.firstChild;)e.removeChild(e.firstChild);if(this.unStickerPacks>0){var t=document.createElement("div");t.classList.add("sticker_item");var n=document.createElement("img");n.src="http://community.edgecast.steamstatic.com/public/images/promo/summer2017/stickers_group.png",t.addEventListener("click",this.OpenPack.bind(this)),t.appendChild(n),e.appendChild(t)}for(var i in this.rgStickerDefinitions){var o=this.rgStickerDefinitions[i];if(this.BSceneUnlocked(this.strScene)||o.texture==this.strScene){var r=this.CreateScaledSticker(i,140,100,!this.BOwnsSticker(i));this.BOwnsSticker(i)&&r.addEventListener("click",this.AddSticker.bind(this,i)),e.appendChild(r)}}}},CStickerManager.prototype.CreateScaledSticker=function(e,t,n,i){var o=document.createElement("div"),r=this.rgStickerDefinitions[e],s=this.rgStickerTextures[r.texture],a=document.createElement("div");a.classList.add("sticker_item"),o.style.width=r.w+"px",o.style.height=r.h+"px",i?(o.style.webkitMask="url('"+s+"') no-repeat -"+r.x+"px -"+r.y+"px",o.style.mask="url('"+s+"') no-repeat -"+r.x+"px -"+r.y+"px",o.style.backgroundColor="#9E9E9E"):o.style.background="url('"+s+"') no-repeat -"+r.x+"px -"+r.y+"px";var l=1;return r.w>t&&(l=t/r.w),r.h>n&&n/r.h<l&&(l=n/r.h),o.style.transform="scale( "+l+", "+l+" )",a.appendChild(o),this.BOwnsSticker(e)&&(a.addEventListener("click",this.AddSticker.bind(this,e)),a.draggable=!0,a.addEventListener("dragstart",this.DragStart.bind(this,e))),a},CStickerManager.prototype.DragStart=function(e,t){t.dataTransfer.setData("key",e),t.dataTransfer.dropEffect="copy",console.log(t)},CStickerManager.prototype.PopulateSelectors=function(){var e=document.getElementById("scene_selector");if(e){for(;e.firstChild;)e.removeChild(e.firstChild);for(var t in this.rgBackgroundTextures){var n=document.createElement("div"),i=document.createElement("img"),o=this.rgBackgroundTextures[t];i.src=o,n.classList.add("item"),n.id=t+"_select_icon";var r=this.rgSceneToIdMap.indexOf(t);i.addEventListener("click",this.SetScene.bind(this,r));var s=this.GetStickerCounts(t),a=document.createElement("div");a.textContent="%1$s of %2$s stickers".replace(/%1\$s/,s[0]).replace(/%2\$s/,s[1]),n.appendChild(i),n.appendChild(a);var l,c=this.rgNewStickersCount[t];if(c)(l=document.createElement("div")).classList.add("new"),l.textContent=c,n.appendChild(l);if(this.rgOwnership.scenes[r])(l=document.createElement("div")).classList.add("new"),l.classList.add("unlocked"),l.textContent="✔",n.appendChild(l);c?e.insertBefore(n,e.firstChild):e.appendChild(n)}}},CStickerManager.prototype.GetStickerCounts=function(e){var t=0,n=0;for(var i in this.rgStickerDefinitions){this.rgStickerDefinitions[i].texture==e&&(t++,this.BOwnsSticker(i)&&n++)}return[n,t]},CStickerManager.prototype.BOwnsSticker=function(e){var t=this.rgStickerToIdMap.indexOf(e);return this.rgOwnership.stickers[t]},CStickerManager.prototype.BSceneUnlocked=function(e){var t=this.rgSceneToIdMap.indexOf(e);return this.rgOwnership.scenes[t]},CStickerManager.prototype.BSceneCanBeUnlocked=function(e){var t=this.GetSceneData();for(var n in this.rgStickerDefinitions){if(this.rgStickerDefinitions[n].texture==e){for(var i=!1,o=0;o<t.length;o++)if(t[o].id==n){i=!0;break}if(!i)return!1}}return!0},CStickerManager.prototype.ResetScene=function(){for(var e=this.elContainer.getElementsByClassName("sticker"),t=e.length-1;t>=0;t--)this.elContainer.removeChild(e[t])},CStickerManager.prototype.GetDefaultScene=function(e){var t=[];for(var n in this.rgStickerDefinitions){var i=this.rgStickerDefinitions[n];i.texture==e&&t.push({id:n,x:i.dx*this.fScaleFactor,y:i.dy*this.fScaleFactor,sx:1,sy:1,r:0,z:i.z})}return t},CStickerManager.prototype.PreloadScene=function(){},CStickerManager.prototype.CreateSticker=function(e,t,n,i,o,r,s){var a=document.createElement("div"),l=this.rgStickerDefinitions[e],c=this.rgStickerTextures[l.texture];a.sticker={id:e,x:t,y:n,sx:i,sy:o,r:r,z:s},a.style.width=l.w+"px",a.style.height=l.h+"px",a.style.background="url('"+c+"') no-repeat -"+l.x+"px -"+l.y+"px",this.elContainer.appendChild(a);var u=this;a.addEventListener("mousedown",function(e){u.SetStickerActive(a),u.StickerDragStart("x","y",!1,e)}),a.addEventListener("touchstart",function(e){u.SetStickerActive(a),u.StickerDragStart("x","y",!1,e)}),this.UpdateStickerState(a),a.classList.add("sticker")},CStickerManager.prototype.UpdateStickerState=function(e){e.style.transform="rotate("+e.sticker.r+"deg) scale("+e.sticker.sx*this.fScaleFactor+", "+e.sticker.sy*this.fScaleFactor+")";e.getBoundingClientRect();e.style.left=e.sticker.x+"px",e.style.top=e.sticker.y+"px",e.sticker.z&&(e.style.zIndex=e.sticker.z)},CStickerManager.prototype.SetScene=function(e){if(this.strScene){var t=this.rgSceneToIdMap.indexOf(this.strScene);this.rgSceneData[t]=this.GetSceneData()}this.strScene=this.rgSceneToIdMap[e],this.elContainer.getElementsByClassName("sticker_background")[0].src=this.rgBackgroundTextures[this.strScene],this.Render(this.rgSceneData[e]);for(var n=document.querySelectorAll(".background_selection_container .item"),i=0;i<n.length;i++)n[i].classList.remove("selected");var o=document.getElementById(this.strScene+"_select_icon");o&&o.classList.add("selected"),this.PopulateStickerList(),this.bEditMode&&(this.BSceneUnlocked(this.strScene)?(document.getElementById("r_handle").style.display="block",document.getElementById("s_handle").style.display="block",document.getElementById("feature_on_profile").style.display="inline-block"):(document.getElementById("r_handle").style.display="none",document.getElementById("s_handle").style.display="none",document.getElementById("feature_on_profile").style.display="none"))},CStickerManager.prototype.Render=function(e){this.ResetScene();for(var t=0;t<e.length;t++){var n=e[t];this.CreateSticker(n.id,n.x,n.y,n.sx,n.sy,n.r,n.z)}this.DeactivateSticker()},CStickerManager.prototype.MoveDot=function(e,t,n){(e=document.getElementById(e)).style.top=n+"px",e.style.left=t+"px"},CStickerManager.prototype.SetStickerActive=function(e){this.DeactivateSticker(),this.elActiveSticker=e,e.classList.add("active"),document.getElementById("edit_box").classList.add("active"),this.UpdateStickerHandles()},CStickerManager.prototype.DeactivateSticker=function(){this.elActiveSticker&&(this.elActiveSticker.classList.remove("active"),document.getElementById("edit_box").classList.remove("active"))},CStickerManager.prototype.UpdateStickerHandles=function(){var e=document.getElementById("edit_box"),t=this.elActiveSticker.getBoundingClientRect(),n=this.elContainer.getBoundingClientRect();e.style.left=1/this.fLocalScale*(t.left-n.left)+"px",e.style.top=1/this.fLocalScale*(t.top-n.top)+"px",e.style.width=1/this.fLocalScale*t.width+"px",e.style.height=1/this.fLocalScale*t.height+"px"},CStickerManager.prototype.ShowEditHandles=function(){document.getElementById("d_handle").addEventListener("mouseup",this.StickerDelete.bind(this)),document.getElementById("s_handle").addEventListener("mousedown",this.StickerDragStart.bind(this,"sx","sy",!1)),document.getElementById("r_handle").addEventListener("mousedown",this.StickerDragStart.bind(this,"r","r",!1)),this.elContainer.addEventListener("mousemove",this.StickerDragMove.bind(this)),this.elContainer.addEventListener("mouseup",this.StickerDragStop.bind(this)),document.getElementById("d_handle").addEventListener("touchend",this.StickerDelete.bind(this)),document.getElementById("s_handle").addEventListener("touchstart",this.StickerDragStart.bind(this,"sx","sy",!1)),document.getElementById("r_handle").addEventListener("touchstart",this.StickerDragStart.bind(this,"r","r",!1)),this.elContainer.addEventListener("touchmove",this.StickerDragMove.bind(this)),this.elContainer.addEventListener("touchend",this.StickerDragStop.bind(this)),this.elContainer.addEventListener("touchcancel",this.StickerDragStop.bind(this)),this.elContainer.addEventListener("drop",this.StickerDragDrop.bind(this)),this.elContainer.addEventListener("dragover",this.StickerDrag.bind(this))},CStickerManager.prototype.StickerDragDrop=function(e){e.dataTransfer.getData("key")&&this.AddSticker(e.dataTransfer.getData("key"))},CStickerManager.prototype.StickerDrag=function(e){e.preventDefault()},CStickerManager.prototype.StickerDelete=function(){this.elActiveSticker.parentNode.removeChild(this.elActiveSticker),this.DeactivateSticker()},CStickerManager.prototype.StickerDragStart=function(e,t,n,i){i.target.parentNode.classList.add("active"),this.rgDragState={x:i.screenX||i.touches[0].screenX,y:i.screenY||i.touches[0].screenY,property_x:e,property_y:t,property_r:n},i.preventDefault()},CStickerManager.prototype.StickerDragStop=function(){this.rgDragState=!1,event.preventDefault();for(var e=document.querySelectorAll("#edit_box > div"),t=0;t<e.length;t++)e[t].classList.remove("active")},CStickerManager.prototype.StickerDragMove=function(e){if(this.rgDragState&&this.BSceneUnlocked(this.strScene)){var t=e.screenX||e.touches[0].screenX,n=e.screenY||e.touches[0].screenY,i=e.pageX||e.touches[0].pageX,o=e.pageY||e.touches[0].pageY;if(this.rgDragState.property_x){var r=t-this.rgDragState.x;"sx"==this.rgDragState.property_x?this.elActiveSticker.sticker.sx+=r/this.rgStickerDefinitions[this.elActiveSticker.sticker.id].w:this.elActiveSticker.sticker[this.rgDragState.property_x]+=r}if(this.rgDragState.property_y){var s=n-this.rgDragState.y;"sy"==this.rgDragState.property_y?this.elActiveSticker.sticker.sy+=s/this.rgStickerDefinitions[this.elActiveSticker.sticker.id].h:this.elActiveSticker.sticker[this.rgDragState.property_y]+=s}if(this.elActiveSticker.sticker.sx=this.elActiveSticker.sticker.sy,this.rgDragState.property_r){var a=this.elActiveSticker.getBoundingClientRect(),l=this.elActiveSticker.getBoundingClientRect(),c=a.left-l.left+a.width/2,u=a.top-l.top+a.height/2,d=i-l.left,h=o-l.top,p=180*Math.atan2(h-u,d-c)/Math.PI;this.elActiveSticker.sticker[this.rgDragState.property_r]=p}this.rgDragState.x=t,this.rgDragState.y=n,this.UpdateStickerState(this.elActiveSticker),this.UpdateStickerHandles(),e.preventDefault()}},CStickerManager.prototype.SetOwnedStickers=function(e){this.rgOwnership=e,this.unStickerPacks=e.stickerpacks,this.PopulateSelectors(),this.PopulateStickerList()},CStickerManager.prototype.SetSceneData=function(e){for(var t=0;t<this.rgSceneToIdMap.length;t++)this.rgSceneData[t]=e[t]||[]},CStickerManager.prototype.BSceneHasSticker=function(e){for(var t=this.GetSceneData(),n=0;n<t.length;n++)if(t[n].id==e)return!0;return!1},CStickerManager.prototype.GetSceneData=function(){var e=[],t=document.getElementsByClassName("sticker");if(t)for(var n=0;n<t.length;n++)e.push(t[n].sticker);return e},CStickerManager.prototype.SaveScene=function(e,t){var n={scene_data:this.GetSceneData(),sceneid:this.rgSceneToIdMap.indexOf(this.strScene),sessionid:g_sessionID,active:e?1:0};$J.ajax({url:g_strProfileURL+"/stickerssave/",data:n,method:"POST"}).done(function(){t||ShowAlertDialog("Changes Saved","Your sticker progress has been saved."),console.log("SAVED")})},CStickerManager.prototype.UnlockScene=function(){this.SaveScene(!1,!0);var e=this.rgSceneToIdMap.indexOf(this.strScene),t=this;$J.ajax({url:g_strProfileURL+"/stickerscomplete/",method:"POST",data:{scene:e}}).done(function(n){1==n.success&&(ShowAlertDialog("Scene unlocked!","You can now move, rotate, and scale stickers on this scene, as well as add stickers from other scenes and feature it on your profile!"),t.rgOwnership.scenes[e]=1,t.PopulateStickerList())})},CStickerManager.prototype.OpenPack=function(){var e=this;$J.ajax({url:g_strProfileURL+"/stickersopen/",method:"POST"}).done(function(t){if(t&&1==t.success&&t.stickers.length>0){var n=document.createElement("div");n.classList.add("openpack_container");var i=document.createElement("p");i.textContent="%1$s new stickers have been added to your collection.".replace(/%1\$s/,t.stickers.length),n.appendChild(i);var o=document.createElement("div");for(o.classList.add("sticker_container");t.stickers.length;){var r=t.stickers.pop(),s=e.CreateScaledSticker(e.rgStickerToIdMap[r],140,100,!1);o.appendChild(s),e.rgOwnership.stickers[r]=1;var a=e.rgStickerToIdMap[r],l=e.rgStickerDefinitions[a].texture;e.rgNewStickersCount[l]?e.rgNewStickersCount[l]++:e.rgNewStickersCount[l]=1}n.appendChild(o);for(var c=!1,u=0;u<t.stickers.length;u++){l=e.rgStickerDefinitions[e.rgStickerToIdMap[u]].texture;e.BSceneUnlocked(l)&&(c=e.rgBackgroundTextures[l])}if(c){var d=document.createElement("div");d.classList.add("unlock_container");var h=document.createElement("h2");h.textContent="Scene unlocked!";var p=document.createElement("img");p.src=c;var f=document.createElement("p");f.textContent="You can now move, rotate, and scale stickers on this scene, as well as add stickers from other scenes and feature it on your profile!",d.appendChild(p),d.appendChild(h),d.appendChild(f),n.appendChild(d)}e.unStickerPacks=t.stickerpacks;ShowAlertDialog("New stickers have been added to your collection!",n)}e.PopulateStickerList(),e.PopulateSelectors();var m=document.getElementById(e.strScene+"_select_icon");m&&m.classList.add("selected")})};var CTaskManager=function(){};CTaskManager.prototype.rgTaskList=[{name:"Explore your Discovery Queue",desc:'Visit your <a href="http://store.steampowered.com/explore">personal Discovery Queue</a> and click through to the end. You can complete this quest once per day.'},{name:"Play a game from your library",desc:"Just play any game from your Steam library! Something new, or something from your backlog..."},{name:"View your Friend Activity page",desc:'See what\'s going on with your friends on Steam at your <a href="http://steamcommunity.com/my/home">Friend Activity</a> page.'},{name:"Add to your wishlist",desc:'Find a game you are interested in, and add it to your <a href="http://steamcommunity.com/my/wishlist">Wishlist</a>.'},{name:"Review your Preferences",desc:'You can help the Steam store show you the best stuff by making sure your <a href="http://store.steampowered.com/account/preferences/">Store Preferences</a> match your interests.'},{name:"Earn an Achievement",desc:'Play any Steam game in your library, and earn an Achievement. You can check your Achievement progress for any game you own <a href="http://steamcommunity.com/my/games">on your Games page</a>.'},{name:"Visit the Broadcasts page",desc:'Take a look at the <a href="http://steamcommunity.com?subsection=broadcasts">Broadcasts</a> currently running on the Community.'},{name:"Mark a Review as Helpful ... or not",desc:"Did a Steam community review help you make a decision about a game? Mark any review as Helpful, Not Helpful, or Funny."},{name:"Follow a Curator",desc:'Look through the <a href="http://store.steampowered.com/curators">Steam Curators</a> and follow someone that will help you find the best games on Steam.'},{name:"View a Profile",desc:'Take a look at what <a href="http://steamcommunity.com/my/friends">your friends</a> have showcased on their Steam Community Profile.'},{name:"Explore popular tags",desc:'Choose something interesting from <a href="http://store.steampowered.com/tag/browse">the recommended tags for you</a>. Try a few!'},{name:"Mark something Not Interested",desc:"Somewhere on the store, you'll find a game that isn't for you. Click the Not Interested button - don't worry, it only affects that game."},{name:"Browse the Videos on Steam",desc:'Visit the <a href="http://store.steampowered.com/videos">Video Hub</a> on Steam.'},{name:"Visit your screenshot library",desc:'You can take a screenshot in-game (default hotkey is F12) and upload it to Steam; go <a href="http://steamcommunity.com/my/screenshots">visit your uploaded Screenshots</a> on the Steam Community.'},{name:"Personalize your Steam Community Profile",desc:'There are a lot of ways you can customize <a href="http://steamcommunity.com/my/profile">your profile</a> - click the attractive Edit Profile button, and personalize!'},{name:"Customize your Discovery Queue",desc:'Make sure your personalized Discovery Queue is personal – your <a href="http://store.steampowered.com/account/preferences?discoveryqueue=1">Discovery Queue settings</a> should match what you want to see on Steam.'}],CTaskManager.prototype.RenderTaskList=function(e){var t=document.getElementById("tasks_remaining_container"),n=document.getElementById("tasks_completed_container"),i={},o=0;for(var r in e.tasks_remaining)if(e.tasks_remaining[r]>0){var s=this.rgTaskList[r];i[r]=1,(u=document.createElement("div")).classList.add("task");var a=document.createElement("h2");a.innerHTML=s.name;var l=document.createElement("p");l.innerHTML=s.desc,u.appendChild(a),u.appendChild(l),t.appendChild(u),o++}if(0==o)(c=document.getElementById("tasks_none"))&&(c.style.display="inline");else if(1==o){(c=document.getElementById("tasks_one"))&&(c.style.display="inline")}else{var c;if(c=document.getElementById("tasks_many"))c.style.display="inline",document.getElementById("task_count").textContent=o}for(var r in e.tasks_limits)if(e.tasks_limits[r]>0&&!i[r]){var u;if(!(s=this.rgTaskList[r]))continue;(u=document.createElement("div")).classList.add("task"),u.innerHTML="✔ "+s.name,n.appendChild(u)}};var gItems=Array();function BanItem(e){var t,n=gItems[e],i=n.consumer_appid,o=(n.title,{method:"post",postBody:"id="+e+"&appid="+i+"&sessionid="+g_sessionID+"&IsBanned=1",onComplete:(t=e,function(e){ShowWithFade($("banned_"+t)),$J("#item_"+t).addClass("banned")})});new Ajax.Request("http://steamcommunity.com/sharedfiles/ban",o)}function MarkIncompatible(e){var t,n=gItems[e],i=n.consumer_appid,o=(n.title,{method:"post",postBody:"id="+e+"&appid="+i+"&sessionid="+g_sessionID+"&incompatible=1",onComplete:(t=e,function(e){ShowWithFade($("incompatible_"+t)),$J("#item_"+t).addClass("incompatible")})});new Ajax.Request("http://steamcommunity.com/sharedfiles/updateincompatible",o)}function ResetReports(e){var t,n=gItems[e],i=n.consumer_appid,o=(n.title,{method:"post",postBody:"id="+e+"&appid="+i+"&sessionid="+g_sessionID,onComplete:(t=e,function(e){$J("#ModerationControls_"+t).html('<span style="color: green">Reports Cleared!</span>')})});new Ajax.Request("http://steamcommunity.com/sharedfiles/resetreportedcount",o)}function ViewReports(e){var t=gItems[e],n=t.consumer_appid,i=t.title;$("reportsTitle").update("All Reports for: "+i),$("reports").update("<div style='width: 100%; text-align: center;'>Loading</div>"),new Ajax.Updater("reports","http://steamcommunity.com/sharedfiles/getreports/?id="+e+"&appid="+n),showModal("reportsModal",!1)}function UpdateSelectedItems(){$J("#NumItemsSelected").text($J(".reported_item_checkbox:checked").length),$J(".reported_item_checkbox").each(function(e,t){var n=(t=$J(t)).data("dsPublishedfileid"),i=$J("#item_"+n);t.prop("checked")?i.css("background-color","rgba( 84, 133, 183, 0.4)"):i.css("background-color","rgba( 0,0,0,.3)")})}function SelectAllItems(){$J(".reported_item_checkbox").prop("checked",!0),UpdateSelectedItems()}function DeselectAllItems(){$J(".reported_item_checkbox").prop("checked",!1),UpdateSelectedItems()}function ApplyFuncOnSelectedItems(e){$J(".reported_item_checkbox").each(function(t,n){if((n=$J(n)).prop("checked")){var i=n.data("itemid");e(i)}})}function SelectedItems_Ban(){ApplyFuncOnSelectedItems(BanItem)}function SelectedItems_MarkIncompatible(){ApplyFuncOnSelectedItems(MarkIncompatible)}function SelectedItems_ResetReports(){ApplyFuncOnSelectedItems(ResetReports)}function BanReview(e){UserReview_Moderate_SetBanStatus(e,1,"http://steamcommunity.com",function(t){ShowWithFade($("banned_"+e))},"Mass banned from reported content page")}function ClearReviewDevFlag(e){UserReview_ClearDeveloperFlag(e,"http://steamcommunity.com",function(t){ShowWithFade($("incompatible_"+e))})}function ClearReviewReports(e){UserReview_ShowClearReportsDialog(e,"http://steamcommunity.com",function(t){$("report_score_"+e).update("0")})}function ViewReviewReports(e){UserReview_ShowReportsDialog(e,"http://steamcommunity.com")}function SelectedReviews_Ban(){ApplyFuncOnSelectedItems(BanReview)}function SelectedReviews_ClearReports(){ApplyFuncOnSelectedItems(ClearReviewReports)}function SelectedReviews_ClearReviewDevFlag(){ApplyFuncOnSelectedItems(ClearReviewDevFlag)}function ResetProfileAndGroupContent(e){new Ajax.Request("http://steamcommunity.com/moderation/ajaxgetresetcontentmodal",{method:"post",parameters:{steamid:e},onSuccess:function(e){var t=e.responseText,n=ShowConfirmDialog("Reset Content",$J(t),"Reset Content");n.AdjustSizing();var i=n.GetContent();n.done(function(){new Ajax.Request("http://steamcommunity.com/moderation/ajaxresetcontent",{method:"post",parameters:i.find("#resetcontentform").serialize(),onSuccess:function(e){(t=V_ParseJSON(e.responseText)).success?location.reload():ShowAlertDialog("Reset Content Failed",t.failures.length+" content types failed to be cleared")}})})}})}function Responsive_InitMenuSwipes(e,t,n,i,o){if(i||o){var r=e(".responsive_page_frame"),s=!1,a=!1,l=!1,c=!1,u=0,d=0,h=0,p=0,f=function(e){var t=e.originalEvent,n=t?t.touches:null;return n&&1==n.length?n[0]:null},m=function(){if(r.removeClass("in_menu_drag"),c){var e=s?i:o;(s?t:n).parents(".responsive_page_menu_ctn").css("left","").css("right",""),(!l&&d<u/2||l&&d>u/2)&&e.fnDismissMenu()}a=s=c=l=!1};e(window).on("touchstart.ResponsiveMenuActivate",function(e){if(UseSmallScreenMode()){var u=f(e);if(u){if(r.hasClass("mainmenu_active"))u.clientX>.9*t.width()&&(s=!0,l=!0);else if(r.hasClass("localmenu_active"))u.clientX<window.innerWidth-.9*n.width()&&(a=!0,l=!0);else{var d=100*u.clientX/window.innerWidth;l=!1,d>93&&o?a=!0:d<7&&i&&(s=!0)}(a||s)&&(c=!1,h=u.pageX,p=u.pageY)}}}),e(window).on("touchmove.ResponsiveMenuActive",function(e){if(a||s){var g=f(e);if(g){var v=g.pageX-h,y=g.pageY-p;(a&&!l||s&&l)&&(v=-v);var b=s?i:o,S=s?t:n;if(!c&&v>25&&v>2*y)r.addClass("in_menu_drag"),l||b.fnActivateMenu(),u=S.width(),c=!0;else if(y>2*v)return void m();if(c){d=Math.max(Math.min(v,u),0);var _=l?-d:-(u-d);S.parents(".responsive_page_menu_ctn").css(a?"right":"left",_+"px")}}}}),e(window).on("touchend.ResponsiveMenuActivate touchcancel.ResponsiveMenuActivate",function(e){m()})}}function Responsive_InitTouchDetection(e){var t=$J("html");!t.hasClass("touch")&&t.hasClass("responsive")&&$J(window).one("touchstart",function(){t.addClass("touch"),V_SetCookie("strResponsiveViewPrefs","touch",0)})}function Responsive_InitTabSelect(e){$J(document).on("change.ResponsiveTabSelect","select.responsive_tab_select",function(){var e=$J(this).val();e!=window.location&&(window.location=e)})}function Responsive_InitFixOnScroll(e){var t=$J(".responsive_fixonscroll_ctn"),n=$J(".responsive_fixonscroll");if(n.length){var i=-1,o=0;$J(window).on("scroll.ResponsiveFixOnScroll resize.ResponsiveFixOnScroll",function(){var e=GetResponsiveHeaderFixedOffsetAdjustment(),r=$J(window).scrollTop()+e+o;e!=i&&(i=e,t.css("top",i+"px")),n.each(function(){var e=$J(this);e.is(":visible")?e.offset().top>r?e.hasClass("in_fixed_ctn")&&(e.append(e.data("originalContents")),e.removeClass("in_fixed_ctn"),e.css("height",""),o=t.height()):e.hasClass("in_fixed_ctn")||(e.css("height",e.height()+"px"),e.data("originalContents",e.children()),t.append(e.children()),e.addClass("in_fixed_ctn"),o=t.height()):e.hasClass("in_fixed_ctn")&&e.data("originalContents")&&(e.append(e.data("originalContents")),e.removeClass("in_fixed_ctn"),e.css("height",""),o=t.height())})})}}function Responsive_BuildChangeLanguageOption(e){e.click(function(){var e=$J("<form/>",{class:"responsive_change_language_form"}),t=$J("<select/>",{class:"responsive_change_language_select"});t.append($J("<option/>",{value:"english"}).text("English")),t.append($J("<option/>",{value:"bulgarian"}).text("Български (Bulgarian)")),t.append($J("<option/>",{value:"czech"}).text("čeština (Czech)")),t.append($J("<option/>",{value:"danish"}).text("Dansk (Danish)")),t.append($J("<option/>",{value:"dutch"}).text("Nederlands (Dutch)")),t.append($J("<option/>",{value:"finnish"}).text("Suomi (Finnish)")),t.append($J("<option/>",{value:"french"}).text("Français (French)")),t.append($J("<option/>",{value:"greek"}).text("Ελληνικά (Greek)")),t.append($J("<option/>",{value:"german"}).text("Deutsch (German)")),t.append($J("<option/>",{value:"hungarian"}).text("Magyar (Hungarian)")),t.append($J("<option/>",{value:"italian"}).text("Italiano (Italian)")),t.append($J("<option/>",{value:"japanese"}).text("日本語 (Japanese)")),t.append($J("<option/>",{value:"koreana"}).text("한국어 (Korean)")),t.append($J("<option/>",{value:"norwegian"}).text("Norsk (Norwegian)")),t.append($J("<option/>",{value:"polish"}).text("Polski (Polish)")),t.append($J("<option/>",{value:"portuguese"}).text("Português (Portuguese)")),t.append($J("<option/>",{value:"brazilian"}).text("Português-Brasil (Portuguese-Brazil)")),t.append($J("<option/>",{value:"russian"}).text("Русский (Russian)")),t.append($J("<option/>",{value:"romanian"}).text("Română (Romanian)")),t.append($J("<option/>",{value:"schinese"}).text("简体中文 (Simplified Chinese)")),t.append($J("<option/>",{value:"spanish"}).text("Español (Spanish)")),t.append($J("<option/>",{value:"swedish"}).text("Svenska (Swedish)")),t.append($J("<option/>",{value:"tchinese"}).text("繁體中文 (Traditional Chinese)")),t.append($J("<option/>",{value:"thai"}).text("ไทย (Thai)")),t.append($J("<option/>",{value:"turkish"}).text("Türkçe (Turkish)"));var n=null,i=function(){"english"!=t.val()&&ChangeLanguage(t.val()),n&&n.Dismiss()};e.submit(function(e){e.preventDefault(),i()}),t.change(i),e.append(t),e.append($J("<input/>",{type:"submit"}).hide()),n=ShowConfirmDialog("Change language",e,"Change language").done(i),t.focus()})}function Responsive_RequestDesktopView(){Responsive_UpdateResponsivePrefs("desktop",!0),window.location.reload()}function Responsive_RequestMobileView(){Responsive_UpdateResponsivePrefs("desktop",!1),window.location.reload()}function Responsive_UpdateResponsivePrefs(e,t){t?V_SetCookie("strResponsiveViewPrefs",e,365):V_SetCookie("strResponsiveViewPrefs",null,-1)}function Responsive_InitResponsiveToggleEvents(e){var t,n;e(window).on("resize.ResponsiveToggle",function(){window.UseTouchFriendlyMode()!==t&&(t=window.UseTouchFriendlyMode(),e(window).trigger("Responsive_TouchFriendlyModeToggled")),window.UseSmallScreenMode()!==n&&(n=window.UseSmallScreenMode(),e(window).trigger("Responsive_SmallScreenModeToggled"))}).trigger("resize.ResponsiveToggle")}function Responsive_ReparentItemsInResponsiveMode(e,t){var n=function(){var n=window.UseSmallScreenMode&&window.UseSmallScreenMode();$J(e).each(function(){var e=$J(this),i=e.data("originalParent");i||(e.wrap($J("<div/>")),i=e.parent(),e.data("originalParent",i)),n?t.append(e):i.append(e)})};n(),$J(window).on("Responsive_SmallScreenModeToggled",n)}function Responsive_InitJQPlotHooks(e){e.jqplot&&e.jqplot.postInitHooks.push(function(e,t,n){var i,o,r=this;$J(window).resize(function(){(UseSmallScreenMode()||i)&&(o?window.clearInterval(o):r.target.css("overflow","hidden"),o=window.setTimeout(function(){o=null,r.replot(),r.target.css("overflow","")},100),i=UseSmallScreenMode())})})}jQuery(function(e){var t=window.matchMedia?window.matchMedia("(max-width: 910px)"):{matches:!1},n=$J("html");window.UseTouchFriendlyMode=function(){return n.hasClass("responsive")&&(t.matches||n.hasClass("touch"))},window.UseSmallScreenMode=function(){return n.hasClass("responsive")&&t.matches};var i=e("#responsive_page_menu"),o=e(".responsive_page_frame"),r=e(".responsive_page_content"),s=e(".responsive_page_content_overlay"),a=function(){o.removeClass("mainmenu_active"),o.removeClass("localmenu_active"),$J(document.body).removeClass("overflow_hidden"),s.off("click.ReponsiveMenuDismiss")};$J(document).on("click.OnClickDismissMenu",".responsive_OnClickDismissMenu",a);var l=WebStorage.GetLocalSession("responsiveMenuLastSubmenu"),c=function(t,n){t.append($J("<div/>",{class:"chevron"}));var i=$J("<div/>",{class:"menuitem_submenu_wrapper"});t.after(i.append(n)),n.wrap(e("<div/>",{class:"inner_borders"})),l&&l==n.data("submenuid")?(i.css("height",n.height()+"px"),t.addClass("submenu_active"),i.addClass("active")):i.css("height",0),n.show(),t.click(function(e){e.preventDefault(),i.hasClass("active")?(i.removeClass("active").css("height",0),t.removeClass("submenu_active"),WebStorage.SetLocalSession("responsiveMenuLastSubmenu",null)):(i.siblings(".menuitem_submenu_wrapper.active").css("height",0).removeClass("active"),t.siblings(".menuitem").removeClass("submenu_active"),i.css("height",n.height()+"px"),t.addClass("submenu_active"),i.addClass("active"),WebStorage.SetLocalSession("responsiveMenuLastSubmenu",n.data("submenuid")))})},u=function(e,t,n){var i=t+"_active",l=function(){r.off("click.ReponsiveMenuDismiss"),o.removeClass(i),$J(document.body).removeClass("overflow_hidden"),window.setTimeout(function(){o.hasClass("mainmenu_active")||o.hasClass("localmenu_active")||a()},500)},c=!1;return{fnActivateMenu:function(){c||(n&&n(),c=!0),o.hasClass(i)?l():($J(document.body).addClass("overflow_hidden"),e.removeClass("secondary_active"),o.addClass(i),s.one("click.ResponsiveMenuDismiss",function(){l()}))},fnDismissMenu:l}},d=null;i.length&&(d=u(i,"mainmenu",function(){e(".responsive_page_menu").find(".supernav").each(function(){var t=e(this);t.attr("href","");var n=t.data("tooltip-content"),i=t.parent().find(n);i.length&&c(t,i)});var t=i.find(".notifications_item"),n=i.find(".notification_submenu");t.length&&n.length&&c(t,n),Responsive_BuildChangeLanguageOption(i.find(".change_language_action"))}),e("#responsive_menu_logo").click(function(e){d.fnActivateMenu()}));var h=e(".responsive_local_menu"),p=null,f=null;if(h.length){var m=!1,g=[];p=$J("#responsive_page_local_menu");var v=$J(".responsive_local_menu_tab");f=u(p,"localmenu"),v.click(function(e){f.fnActivateMenu()}),e(window).on("Responsive_SmallScreenModeToggled.ReponsiveLocalMenu",function(){var t=UseSmallScreenMode();if(m!=t){if(t)v.addClass("active"),function(){if(!g.length)for(var t=0;t<h.length;t++){var n=e(h[t]).wrap($J("<div/>",{class:"responsive_local_menu_placeholder"})),i=e(h[t]).parent();g.push({wrapper:i,content:n})}}(),p.find(".localmenu_content").append(h);else{a(),v.removeClass("active");for(var n=0;n<g.length;n++)g[n].wrapper.append(g[n].content)}m=t}}).trigger("Responsive_SmallScreenModeToggled.ReponsiveLocalMenu")}Responsive_InitMenuSwipes(e,i,p,d,f),Responsive_InitFixOnScroll(e),Responsive_InitTouchDetection(e),Responsive_InitTabSelect(e),Responsive_InitResponsiveToggleEvents(e),Responsive_InitJQPlotHooks(e)}),jQuery(function(e){e(".tooltip").v_tooltip(),e("#global_header .supernav").v_tooltip({location:"bottom",destroyWhenDone:!1,tooltipClass:"supernav_content",offsetY:-4,offsetX:1,horizontalSnap:4,tooltipParent:"#global_header .supernav_container",correctForScreenSize:!1})}),$J(EnableNotificationCountPolling),RegisterFlyout("account_language_pulldown","language_dropdown","leftsubmenu","bottomsubmenu",!0),g_sessionID="b87c7f9a58a5bd344df8447f",g_steamID="76561198008822803",setTimezoneCookies(),$J(function(){InitMiniprofileHovers(),InitEmoticonHovers(),window.BindCommunityTooltip=function(e){e.v_tooltip({tooltipClass:"community_tooltip",dataName:"communityTooltip"})},BindCommunityTooltip($J("[data-community-tooltip]"))}),$J(function(){InitEconomyHovers("http://community.edgecast.steamstatic.com/public/css/skin_1/economy.css?v=q6EkkWwqjgQx","http://community.edgecast.steamstatic.com/public/javascript/economy_common.js?v=tsXdRVB0yEaR&l=english","http://community.edgecast.steamstatic.com/public/javascript/economy.js?v=DNiCDdc9ihXn&l=english")}),g_rgProfileData={url:"http://steamcommunity.com/id/diegocard/",steamid:"76561198008822803",personaname:"DC",summary:' <b>Contact</b> <br>• Mail: <a href="mailto:diegocard@gmail.com">diegocard@gmail.com</a><br>• Phone: (+598) 99687570<br><br>'},$J(function(){window.Responsive_ReparentItemsInResponsiveMode&&Responsive_ReparentItemsInResponsiveMode(".responsive_groupfriends_element",$J("#responsive_groupfriends_element_ctn"))}),$J(function(){InitProfileSummary(g_rgProfileData.summary)}),$J(function(){InitializeCommentThread("Profile","Profile_76561198008822803_0",{feature:"-1",feature2:0,owner:"76561198008822803",total_count:0,start:0,pagesize:6,has_upvoted:0,upvotes:0,votecountid:null,voteupid:null,commentcountid:null,subscribed:!1},"http://steamcommunity.com/comment/Profile/",40)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("./javascript/service-worker.js").then(function(){console.log("Service Worker Registered")});var dataCacheName="template-pwa",cacheName="template-pwa",filesToCache=["../","../index.html","../fonts/motiva-sans-bold-italic.ttf","../fonts/motiva-sans-light-italic.ttf","../fonts/motiva-sans-regular-italic.ttf","../fonts/MotivaSans-Black.ttf","../fonts/MotivaSans-Bold.ttf","../fonts/MotivaSans-Light.ttf","../fonts/MotivaSans-Medium.ttf","../fonts/MotivaSans-Regular.ttf","../fonts/MotivaSans-Thin.ttf","../images/icons/icon-128x128.png","../images/icons/icon-144x144.png","../images/icons/icon-152x152.png","../images/icons/icon-192x192.png","../images/icons/icon-256x256.png","../index.html","../manifest.json","../dist/app.min.js","../dist/app.min.css","../service-worker.js"];self.addEventListener("install",function(e){console.log("[ServiceWorker] Install"),e.waitUntil(caches.open(cacheName).then(function(e){return console.log("[ServiceWorker] Caching assets"),e.addAll(filesToCache)}))}),self.addEventListener("activate",function(e){return console.log("[ServiceWorker] Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==cacheName&&e!==dataCacheName)return console.log("[ServiceWorker] Removing old cache",e),caches.delete(e)}))})),self.clients.claim()}),self.addEventListener("fetch",function(e){console.log("[Service Worker] Fetch",e.request.url),e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))});var dataCacheName="template-pwa",cacheName="template-pwa",filesToCache=["/","../fonts","../fonts/motiva-sans-bold-italic.ttf","../fonts/motiva-sans-light-italic.ttf","../fonts/motiva-sans-regular-italic.ttf","../fonts/MotivaSans-Black.ttf","../fonts/MotivaSans-Bold.ttf","../fonts/MotivaSans-Light.ttf","../fonts/MotivaSans-Medium.ttf","../fonts/MotivaSans-Regular.ttf","../fonts/MotivaSans-Thin.ttf","../images","../images/icons","../images/icons/icon-128x128.png","../images/icons/icon-144x144.png","../images/icons/icon-152x152.png","../images/icons/icon-192x192.png","../images/icons/icon-256x256.png","../index.html","../manifest.json","../dist","../dist/app.min.js","../dist/app.min.css","../service-worker.js"];self.addEventListener("install",function(e){console.log("[ServiceWorker] Install"),e.waitUntil(caches.open(cacheName).then(function(e){return console.log("[ServiceWorker] Caching assets"),e.addAll(filesToCache)}))}),self.addEventListener("activate",function(e){return console.log("[ServiceWorker] Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==cacheName&&e!==dataCacheName)return console.log("[ServiceWorker] Removing old cache",e),caches.delete(e)}))})),self.clients.claim()}),self.addEventListener("fetch",function(e){console.log("[Service Worker] Fetch",e.request.url),e.respondWith(caches.match(e.request).then(function(t){return t||fetch(e.request)}))});
//# sourceMappingURL=maps/app.min.js.map
